import{u as J,ag as Ge,s as Fe,ax as st,t as $e,ae as ot,_ as ae,K as Xe,G as Je,aG as lt,U as Pe,C as Ie,J as Z,r as Ne,d as rt,aH as dt,o as it,aI as ut,F as ct,E as ue,W as pt,D as ht}from"./document.119ae42e.js";import{f as G,ai as be,B as ne,z as $,r as q,o as E,c as U,a4 as R,h as O,as as ee,w as M,d as B,X as L,F as ie,a as Y,g as A,aj as ge,b as ye,t as me,A as Be,aH as Ee,K as De,Q as ft,N as vt,D as oe,a1 as Qe,G as W,br as mt,E as et,a0 as le,l as gt,R as yt,T as tt,bH as kt,u as D,Z as Nt,s as we,q as Ct,n as bt,V as Ke,W as Se,a3 as Et,Y as Dt,az as Me,a2 as wt,U as Kt,aK as Oe,aa as St,P as At,J as _e,c6 as Tt,c7 as xt,bZ as Ft,ao as He,_ as ke,e as $t}from"./app.8c8a4a35.js";import{c as qe,E as Bt}from"./index.ec1b8a05.js";import{b as Lt}from"./index.28de6ddf.js";import{i as de}from"./isEqual.af43be9c.js";import{i as Vt,f as Ce,g as Pt}from"./aria.ff564609.js";import{b as It,u as ze,c as je}from"./arrays.c0e3b82b.js";import{s as Mt}from"./scroll.16fc5126.js";import{E as Ot}from"./index.74a676b3.js";import{E as _t}from"./index.f26f2e97.js";import{E as Ht}from"./index.d8710a2c.js";import{E as qt}from"./index.73c90c75.js";import"./index.a0761fdb.js";import"./typescript.72bf8adc.js";import"./index.31f66c9b.js";import"./index.d6f07aca.js";import"./validator.b33499a8.js";import"./index.acda1572.js";var zt=1/0;function jt(t){var e=t==null?0:t.length;return e?It(t,zt):[]}var Ut=G({name:"NodeContent",setup(){return{ns:J("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:n}=this.$parent,{data:a,label:s}=e,{renderLabelFn:o}=n;return be("span",{class:t.e("label")},o?o({node:e,data:a}):s)}});const Le=Symbol(),Rt=G({name:"ElCascaderNode",components:{ElCheckbox:Ge,ElRadio:Lt,NodeContent:Ut,ElIcon:Fe,Check:st,Loading:$e,ArrowRight:ot},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const n=ne(Le),a=J("cascader-node"),s=$(()=>n.isHoverMenu),o=$(()=>n.config.multiple),l=$(()=>n.config.checkStrictly),r=$(()=>{var w;return(w=n.checkedNodes[0])==null?void 0:w.uid}),u=$(()=>t.node.isDisabled),h=$(()=>t.node.isLeaf),c=$(()=>l.value&&!h.value||!u.value),p=$(()=>y(n.expandingNode)),d=$(()=>l.value&&n.checkedNodes.some(y)),y=w=>{var P;const{level:H,uid:g}=t.node;return((P=w==null?void 0:w.pathNodes[H-1])==null?void 0:P.uid)===g},N=()=>{p.value||n.expandNode(t.node)},S=w=>{const{node:P}=t;w!==P.checked&&n.handleCheckChange(P,w)},b=()=>{n.lazyLoad(t.node,()=>{h.value||N()})},x=w=>{!s.value||(z(),!h.value&&e("expand",w))},z=()=>{const{node:w}=t;!c.value||w.loading||(w.loaded?N():b())},_=()=>{s.value&&!h.value||(h.value&&!u.value&&!l.value&&!o.value?T(!0):z())},j=w=>{l.value?(S(w),t.node.loaded&&N()):T(w)},T=w=>{t.node.loaded?(S(w),!l.value&&N()):b()};return{panel:n,isHoverMenu:s,multiple:o,checkStrictly:l,checkedNodeId:r,isDisabled:u,isLeaf:h,expandable:c,inExpandingPath:p,inCheckedPath:d,ns:a,handleHoverExpand:x,handleExpand:z,handleClick:_,handleCheck:T,handleSelectCheck:j}}}),Wt=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Zt=Y("span",null,null,-1);function Yt(t,e,n,a,s,o){const l=q("el-checkbox"),r=q("el-radio"),u=q("check"),h=q("el-icon"),c=q("node-content"),p=q("loading"),d=q("arrow-right");return E(),U("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:L([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...y)=>t.handleHoverExpand&&t.handleHoverExpand(...y)),onFocus:e[3]||(e[3]=(...y)=>t.handleHoverExpand&&t.handleHoverExpand(...y)),onClick:e[4]||(e[4]=(...y)=>t.handleClick&&t.handleClick(...y))},[R(" prefix "),t.multiple?(E(),O(l,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=ee(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(E(),O(r,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=ee(()=>{},["stop"]))},{default:M(()=>[R(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Zt]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(E(),O(h,{key:2,class:L(t.ns.e("prefix"))},{default:M(()=>[B(u)]),_:1},8,["class"])):R("v-if",!0),R(" content "),B(c),R(" postfix "),t.isLeaf?R("v-if",!0):(E(),U(ie,{key:3},[t.node.loading?(E(),O(h,{key:0,class:L([t.ns.is("loading"),t.ns.e("postfix")])},{default:M(()=>[B(p)]),_:1},8,["class"])):(E(),O(h,{key:1,class:L(["arrow-right",t.ns.e("postfix")])},{default:M(()=>[B(d)]),_:1},8,["class"]))],64))],42,Wt)}var Gt=ae(Rt,[["render",Yt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Xt=G({name:"ElCascaderMenu",components:{Loading:$e,ElIcon:Fe,ElScrollbar:Xe,ElCascaderNode:Gt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=Be(),n=J("cascader-menu"),{t:a}=Je(),s=lt();let o=null,l=null;const r=ne(Le),u=A(null),h=$(()=>!t.nodes.length),c=$(()=>!r.initialLoaded),p=$(()=>`cascader-menu-${s}-${t.index}`),d=b=>{o=b.target},y=b=>{if(!(!r.isHoverMenu||!o||!u.value))if(o.contains(b.target)){N();const x=e.vnode.el,{left:z}=x.getBoundingClientRect(),{offsetWidth:_,offsetHeight:j}=x,T=b.clientX-z,w=o.offsetTop,P=w+o.offsetHeight;u.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${w} L${_} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${P} L${_} ${j} V${P} Z" />
        `}else l||(l=window.setTimeout(S,r.config.hoverThreshold))},N=()=>{!l||(clearTimeout(l),l=null)},S=()=>{!u.value||(u.value.innerHTML="",N())};return{ns:n,panel:r,hoverZone:u,isEmpty:h,isLoading:c,menuId:p,t:a,handleExpand:d,handleMouseMove:y,clearHoverZone:S}}});function Jt(t,e,n,a,s,o){const l=q("el-cascader-node"),r=q("loading"),u=q("el-icon"),h=q("el-scrollbar");return E(),O(h,{key:t.menuId,tag:"ul",role:"menu",class:L(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:M(()=>{var c;return[(E(!0),U(ie,null,ge(t.nodes,p=>(E(),O(l,{key:p.uid,node:p,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(E(),U("div",{key:0,class:L(t.ns.e("empty-text"))},[B(u,{size:"14",class:L(t.ns.is("loading"))},{default:M(()=>[B(r)]),_:1},8,["class"]),ye(" "+me(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(E(),U("div",{key:1,class:L(t.ns.e("empty-text"))},me(t.t("el.cascader.noData")),3)):(c=t.panel)!=null&&c.isHoverMenu?(E(),U("svg",{key:2,ref:"hoverZone",class:L(t.ns.e("hover-zone"))},null,2)):R("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Qt=ae(Xt,[["render",Jt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let en=0;const tn=t=>{const e=[t];let{parent:n}=t;for(;n;)e.unshift(n),n=n.parent;return e};class re{constructor(e,n,a,s=!1){this.data=e,this.config=n,this.parent=a,this.root=s,this.uid=en++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:l,children:r}=n,u=e[r],h=tn(this);this.level=s?0:a?a.level+1:1,this.value=e[o],this.label=e[l],this.pathNodes=h,this.pathValues=h.map(c=>c.value),this.pathLabels=h.map(c=>c.label),this.childrenData=u,this.children=(u||[]).map(c=>new re(c,n,this)),this.loaded=!n.lazy||this.isLeaf||!Ee(u)}get isDisabled(){const{data:e,parent:n,config:a}=this,{disabled:s,checkStrictly:o}=a;return(De(s)?s(e,this):!!e[s])||!o&&(n==null?void 0:n.isDisabled)}get isLeaf(){const{data:e,config:n,childrenData:a,loaded:s}=this,{lazy:o,leaf:l}=n,r=De(l)?l(e,this):e[l];return ft(r)?o&&!s?!1:!(Array.isArray(a)&&a.length):!!r}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:n,children:a}=this,s=new re(e,this.config,this);return Array.isArray(n)?n.push(e):this.childrenData=[e],a.push(s),s}calcText(e,n){const a=e?this.pathLabels.join(n):this.label;return this.text=a,a}broadcast(e,...n){const a=`onParent${qe(e)}`;this.children.forEach(s=>{s&&(s.broadcast(e,...n),s[a]&&s[a](...n))})}emit(e,...n){const{parent:a}=this,s=`onChild${qe(e)}`;a&&(a[s]&&a[s](...n),a.emit(e,...n))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,n=e.filter(s=>!s.isDisabled),a=n.length?n.every(s=>s.checked):!1;this.setCheckState(a)}setCheckState(e){const n=this.children.length,a=this.children.reduce((s,o)=>{const l=o.checked?1:o.indeterminate?.5:0;return s+l},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&e,this.indeterminate=this.loaded&&a!==n&&a>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:n,multiple:a}=this.config;n||!a?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}}const Ae=(t,e)=>t.reduce((n,a)=>(a.isLeaf?n.push(a):(!e&&n.push(a),n=n.concat(Ae(a.children,e))),n),[]);class Ue{constructor(e,n){this.config=n;const a=(e||[]).map(s=>new re(s,this.config));this.nodes=a,this.allNodes=Ae(a,!1),this.leafNodes=Ae(a,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,n){const a=n?n.appendChild(e):new re(e,this.config);n||this.nodes.push(a),this.allNodes.push(a),a.isLeaf&&this.leafNodes.push(a)}appendNodes(e,n){e.forEach(a=>this.appendNode(a,n))}getNodeByValue(e,n=!1){return!e&&e!==0?null:this.getFlattedNodes(n).find(s=>de(s.value,e)||de(s.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:a,level:s})=>de(e.value,a)&&e.level===s)||null}}const nn={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},an={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:vt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},sn=t=>$(()=>({...an,...t.props})),Re=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},on=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():Vt(t)&&t.click()},ln=(t,e)=>{const n=e.slice(0),a=n.map(o=>o.uid),s=t.reduce((o,l)=>{const r=a.indexOf(l.uid);return r>-1&&(o.push(l),n.splice(r,1),a.splice(r,1)),o},[]);return s.push(...n),s},rn=G({name:"ElCascaderPanel",components:{ElCascaderMenu:Qt},props:{...nn,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Pe,Ie,"close","expand-change"],setup(t,{emit:e,slots:n}){let a=!1;const s=J("cascader"),o=sn(t);let l=null;const r=A(!0),u=A([]),h=A(null),c=A([]),p=A(null),d=A([]),y=$(()=>o.value.expandTrigger==="hover"),N=$(()=>t.renderLabel||n.default),S=()=>{const{options:m}=t,f=o.value;a=!1,l=new Ue(m,f),c.value=[l.getNodes()],f.lazy&&Ee(t.options)?(r.value=!1,b(void 0,v=>{v&&(l=new Ue(v,f),c.value=[l.getNodes()]),r.value=!0,H(!1,!0)})):H(!1,!0)},b=(m,f)=>{const v=o.value;m=m||new re({},v,void 0,!0),m.loading=!0;const k=K=>{const i=m,C=i.root?null:i;K&&(l==null||l.appendNodes(K,C)),i.loading=!1,i.loaded=!0,i.childrenData=i.childrenData||[],f&&f(K)};v.lazyLoad(m,k)},x=(m,f)=>{var v;const{level:k}=m,K=c.value.slice(0,k);let i;m.isLeaf?i=m.pathNodes[k-2]:(i=m,K.push(m.children)),((v=p.value)==null?void 0:v.uid)!==(i==null?void 0:i.uid)&&(p.value=m,c.value=K,!f&&e("expand-change",(m==null?void 0:m.pathValues)||[]))},z=(m,f,v=!0)=>{const{checkStrictly:k,multiple:K}=o.value,i=d.value[0];a=!0,!K&&(i==null||i.doCheck(!1)),m.doCheck(f),P(),v&&!K&&!k&&e("close"),!v&&!K&&!k&&_(m)},_=m=>{!m||(m=m.parent,_(m),m&&x(m))},j=m=>l==null?void 0:l.getFlattedNodes(m),T=m=>{var f;return(f=j(m))==null?void 0:f.filter(v=>v.checked!==!1)},w=()=>{d.value.forEach(m=>m.doCheck(!1)),P()},P=()=>{var m;const{checkStrictly:f,multiple:v}=o.value,k=d.value,K=T(!f),i=ln(k,K),C=i.map(I=>I.valueByOption);d.value=i,h.value=v?C:(m=C[0])!=null?m:null},H=(m=!1,f=!1)=>{const{modelValue:v}=t,{lazy:k,multiple:K,checkStrictly:i}=o.value,C=!i;if(!(!r.value||a||!f&&de(v,h.value)))if(k&&!m){const X=ze(jt(je(v))).map(Q=>l==null?void 0:l.getNodeByValue(Q)).filter(Q=>!!Q&&!Q.loaded&&!Q.loading);X.length?X.forEach(Q=>{b(Q,()=>H(!1,f))}):H(!0,f)}else{const I=K?je(v):[v],X=ze(I.map(Q=>l==null?void 0:l.getNodeByValue(Q,C)));g(X,f),h.value=v}},g=(m,f=!0)=>{const{checkStrictly:v}=o.value,k=d.value,K=m.filter(I=>!!I&&(v||I.isLeaf)),i=l==null?void 0:l.getSameNode(p.value),C=f&&i||K[0];C?C.pathNodes.forEach(I=>x(I,!0)):p.value=null,k.forEach(I=>I.doCheck(!1)),K.forEach(I=>I.doCheck(!0)),d.value=K,le(F)},F=()=>{!gt||u.value.forEach(m=>{const f=m==null?void 0:m.$el;if(f){const v=f.querySelector(`.${s.namespace.value}-scrollbar__wrap`),k=f.querySelector(`.${s.b("node")}.${s.is("active")}`)||f.querySelector(`.${s.b("node")}.in-active-path`);Mt(v,k)}})},V=m=>{const f=m.target,{code:v}=m;switch(v){case Z.up:case Z.down:{m.preventDefault();const k=v===Z.up?-1:1;Ce(Pt(f,k,`.${s.b("node")}[tabindex="-1"]`));break}case Z.left:{m.preventDefault();const k=u.value[Re(f)-1],K=k==null?void 0:k.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Ce(K);break}case Z.right:{m.preventDefault();const k=u.value[Re(f)+1],K=k==null?void 0:k.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Ce(K);break}case Z.enter:on(f);break}};return oe(Le,Qe({config:o,expandingNode:p,checkedNodes:d,isHoverMenu:y,initialLoaded:r,renderLabelFn:N,lazyLoad:b,expandNode:x,handleCheckChange:z})),W([o,()=>t.options],S,{deep:!0,immediate:!0}),W(()=>t.modelValue,()=>{a=!1,H()}),W(h,m=>{de(m,t.modelValue)||(e(Pe,m),e(Ie,m))}),mt(()=>u.value=[]),et(()=>!Ee(t.modelValue)&&H()),{ns:s,menuList:u,menus:c,checkedNodes:d,handleKeyDown:V,handleCheckChange:z,getFlattedNodes:j,getCheckedNodes:T,clearCheckedNodes:w,calculateCheckedValue:P,scrollToExpandingNode:F}}});function dn(t,e,n,a,s,o){const l=q("el-cascader-menu");return E(),U("div",{class:L([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...r)=>t.handleKeyDown&&t.handleKeyDown(...r))},[(E(!0),U(ie,null,ge(t.menus,(r,u)=>(E(),O(l,{key:u,ref_for:!0,ref:h=>t.menuList[u]=h,index:u,nodes:[...r]},null,8,["index","nodes"]))),128))],34)}var pe=ae(rn,[["render",dn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);pe.install=t=>{t.component(pe.name,pe)};const un=pe,cn=un,pn={name:"ElCollapseTransition"},hn=G({...pn,setup(t){const e=J("collapse-transition"),n={beforeEnter(a){a.dataset||(a.dataset={}),a.dataset.oldPaddingTop=a.style.paddingTop,a.dataset.oldPaddingBottom=a.style.paddingBottom,a.style.maxHeight=0,a.style.paddingTop=0,a.style.paddingBottom=0},enter(a){a.dataset.oldOverflow=a.style.overflow,a.scrollHeight!==0?(a.style.maxHeight=`${a.scrollHeight}px`,a.style.paddingTop=a.dataset.oldPaddingTop,a.style.paddingBottom=a.dataset.oldPaddingBottom):(a.style.maxHeight=0,a.style.paddingTop=a.dataset.oldPaddingTop,a.style.paddingBottom=a.dataset.oldPaddingBottom),a.style.overflow="hidden"},afterEnter(a){a.style.maxHeight="",a.style.overflow=a.dataset.oldOverflow},beforeLeave(a){a.dataset||(a.dataset={}),a.dataset.oldPaddingTop=a.style.paddingTop,a.dataset.oldPaddingBottom=a.style.paddingBottom,a.dataset.oldOverflow=a.style.overflow,a.style.maxHeight=`${a.scrollHeight}px`,a.style.overflow="hidden"},leave(a){a.scrollHeight!==0&&(a.style.maxHeight=0,a.style.paddingTop=0,a.style.paddingBottom=0)},afterLeave(a){a.style.maxHeight="",a.style.overflow=a.dataset.oldOverflow,a.style.paddingTop=a.dataset.oldPaddingTop,a.style.paddingBottom=a.dataset.oldPaddingBottom}};return(a,s)=>(E(),O(Nt,tt({name:D(e).b()},kt(n)),{default:M(()=>[yt(a.$slots,"default")]),_:3},16,["name"]))}});var he=ae(hn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);he.install=t=>{t.component(he.name,he)};const fn=he,se="$treeNodeId",We=function(t,e){!e||e[se]||Object.defineProperty(e,se,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Ve=function(t,e){return t?e[t]:e[se]},Te=(t,e,n)=>{const a=t.value.currentNode;n();const s=t.value.currentNode;a!==s&&e("current-change",s||null,s)},xe=t=>{let e=!0,n=!0,a=!0;for(let s=0,o=t.length;s<o;s++){const l=t[s];(l.checked!==!0||l.indeterminate)&&(e=!1,l.disabled||(a=!1)),(l.checked!==!1||l.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:a,half:!e&&!n}},fe=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:n,half:a}=xe(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):a?(t.checked=!1,t.indeterminate=!0):n&&(t.checked=!1,t.indeterminate=!1);const s=t.parent;!s||s.level===0||t.store.checkStrictly||fe(s)},ce=function(t,e){const n=t.store.props,a=t.data||{},s=n[e];if(typeof s=="function")return s(a,t);if(typeof s=="string")return a[s];if(typeof s>"u"){const o=a[e];return o===void 0?"":o}};let vn=0;class te{constructor(e){this.id=vn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const n in e)we(e,n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const n=e.props;if(n&&typeof n.isLeaf<"u"){const o=ce(this,"isLeaf");typeof o=="boolean"&&(this.isLeafByUser=o)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||We(this,this.data),!this.data)return;const a=e.defaultExpandedKeys,s=e.key;s&&a&&a.includes(this.key)&&this.expand(null,e.autoExpandParent),s&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||We(this,e),this.data=e,this.childNodes=[];let n;this.level===0&&Array.isArray(this.data)?n=this.data:n=ce(this,"children")||[];for(let a=0,s=n.length;a<s;a++)this.insertChild({data:n[a]})}get label(){return ce(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ce(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return e.childNodes[n+1]}return null}get previousSibling(){const e=this.parent;if(e){const n=e.childNodes.indexOf(this);if(n>-1)return n>0?e.childNodes[n-1]:null}return null}contains(e,n=!0){return(this.childNodes||[]).some(a=>a===e||n&&a.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,n,a){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof te)){if(!a){const s=this.getChildren(!0);s.includes(e.data)||(typeof n>"u"||n<0?s.push(e.data):s.splice(n,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Qe(new te(e)),e instanceof te&&e.initialize()}e.level=this.level+1,typeof n>"u"||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()}insertBefore(e,n){let a;n&&(a=this.childNodes.indexOf(n)),this.insertChild(e,a)}insertAfter(e,n){let a;n&&(a=this.childNodes.indexOf(n),a!==-1&&(a+=1)),this.insertChild(e,a)}removeChild(e){const n=this.getChildren()||[],a=n.indexOf(e.data);a>-1&&n.splice(a,1);const s=this.childNodes.indexOf(e);s>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(e){let n=null;for(let a=0;a<this.childNodes.length;a++)if(this.childNodes[a].data===e){n=this.childNodes[a];break}n&&this.removeChild(n)}expand(e,n){const a=()=>{if(n){let s=this.parent;for(;s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(s=>{s.canFocus=!0})};this.shouldLoadData()?this.loadData(s=>{Array.isArray(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||fe(this),a())}):a()}doCreateChildren(e,n={}){e.forEach(a=>{this.insertChild(Object.assign({data:a},n),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,n,a,s){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:r}=xe(this.childNodes);!this.isLeaf&&!l&&r&&(this.checked=!1,e=!1);const u=()=>{if(n){const h=this.childNodes;for(let d=0,y=h.length;d<y;d++){const N=h[d];s=s||e!==!1;const S=N.disabled?N.checked:s;N.setChecked(S,n,!0,s)}const{half:c,all:p}=xe(h);p||(this.checked=p,this.indeterminate=c)}};if(this.shouldLoadData()){this.loadData(()=>{u(),fe(this)},{checked:e!==!1});return}else u()}const o=this.parent;!o||o.level===0||a||fe(o)}getChildren(e=!1){if(this.level===0)return this.data;const n=this.data;if(!n)return null;const a=this.store.props;let s="children";return a&&(s=a.children||"children"),n[s]===void 0&&(n[s]=null),e&&!n[s]&&(n[s]=[]),n[s]}updateChildren(){const e=this.getChildren()||[],n=this.childNodes.map(o=>o.data),a={},s=[];e.forEach((o,l)=>{const r=o[se];!!r&&n.findIndex(h=>h[se]===r)>=0?a[r]={index:l,data:o}:s.push({index:l,data:o})}),this.store.lazy||n.forEach(o=>{a[o[se]]||this.removeChildByData(o)}),s.forEach(({index:o,data:l})=>{this.insertChild({data:l},o)}),this.updateLeafState()}loadData(e,n={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(n).length)){this.loading=!0;const a=s=>{this.childNodes=[],this.doCreateChildren(s,n),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,s)};this.store.load(this,a)}else e&&e.call(this)}}class mn{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const n in e)we(e,n)&&(this[n]=e[n]);this.nodesMap={}}initialize(){if(this.root=new te({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,n=>{this.root.doCreateChildren(n),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const n=this.filterNodeMethod,a=this.lazy,s=function(o){const l=o.root?o.root.childNodes:o.childNodes;if(l.forEach(r=>{r.visible=n.call(r,e,r.data,r),s(r)}),!o.visible&&l.length){let r=!0;r=!l.some(u=>u.visible),o.root?o.root.visible=r===!1:o.visible=r===!1}!e||o.visible&&!o.isLeaf&&!a&&o.expand()};s(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof te)return e;const n=Ct(e)?Ve(this.key,e):e;return this.nodesMap[n]||null}insertBefore(e,n){const a=this.getNode(n);a.parent.insertBefore({data:e},a)}insertAfter(e,n){const a=this.getNode(n);a.parent.insertAfter({data:e},a)}remove(e){const n=this.getNode(e);n&&n.parent&&(n===this.currentNode&&(this.currentNode=null),n.parent.removeChild(n))}append(e,n){const a=n?this.getNode(n):this.root;a&&a.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(a=>{const s=n[a];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const n=this.key;!e||!e.data||(n?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(a=>{this.deregisterNode(a)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,n=!1){const a=[],s=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(r=>{(r.checked||n&&r.indeterminate)&&(!e||e&&r.isLeaf)&&a.push(r.data),s(r)})};return s(this),a}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(n=>(n||{})[this.key])}getHalfCheckedNodes(){const e=[],n=function(a){(a.root?a.root.childNodes:a.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),n(o)})};return n(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],n=this.nodesMap;for(const a in n)we(n,a)&&e.push(n[a]);return e}updateChildren(e,n){const a=this.nodesMap[e];if(!a)return;const s=a.childNodes;for(let o=s.length-1;o>=0;o--){const l=s[o];this.remove(l.data)}for(let o=0,l=n.length;o<l;o++){const r=n[o];this.append(r,a.data)}}_setCheckedKeys(e,n=!1,a){const s=this._getAllNodes().sort((r,u)=>u.level-r.level),o=Object.create(null),l=Object.keys(a);s.forEach(r=>r.setChecked(!1,!1));for(let r=0,u=s.length;r<u;r++){const h=s[r],c=h.data[e].toString();if(!l.includes(c)){h.checked&&!o[c]&&h.setChecked(!1,!1);continue}let d=h.parent;for(;d&&d.level>0;)o[d.data[e]]=!0,d=d.parent;if(h.isLeaf||this.checkStrictly){h.setChecked(!0,!1);continue}if(h.setChecked(!0,!0),n){h.setChecked(!1,!1);const y=function(N){N.childNodes.forEach(b=>{b.isLeaf||b.setChecked(!1,!1),y(b)})};y(h)}}}setCheckedNodes(e,n=!1){const a=this.key,s={};e.forEach(o=>{s[(o||{})[a]]=!0}),this._setCheckedKeys(a,n,s)}setCheckedKeys(e,n=!1){this.defaultCheckedKeys=e;const a=this.key,s={};e.forEach(o=>{s[o]=!0}),this._setCheckedKeys(a,n,s)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(n=>{const a=this.getNode(n);a&&a.expand(null,this.autoExpandParent)})}setChecked(e,n,a){const s=this.getNode(e);s&&s.setChecked(!!n,a)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const n=this.currentNode;n&&(n.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,n=!0){const a=e[this.key],s=this.nodesMap[a];this.setCurrentNode(s),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,n=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const a=this.getNode(e);a&&(this.setCurrentNode(a),n&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const gn=G({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=J("tree"),n=ne("NodeInstance"),a=ne("RootTree");return()=>{const s=t.node,{data:o,store:l}=s;return t.renderContent?t.renderContent(be,{_self:n,node:s,data:o,store:l}):be("span",{class:e.be("node","label")},[a.ctx.slots.default?a.ctx.slots.default({node:s,data:o}):s.label])}}});var yn=ae(gn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function nt(t){const e=ne("TreeNodeMap",null),n={treeNodeExpand:a=>{t.node!==a&&t.node.collapse()},children:[]};return e&&e.children.push(n),oe("TreeNodeMap",n),{broadcastExpanded:a=>{if(!!t.accordion)for(const s of n.children)s.treeNodeExpand(a)}}}const at=Symbol("dragEvents");function kn({props:t,ctx:e,el$:n,dropIndicator$:a,store:s}){const o=J("tree"),l=A({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return oe(at,{treeNodeDragStart:({event:c,treeNode:p})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(p.node))return c.preventDefault(),!1;c.dataTransfer.effectAllowed="move";try{c.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=p,e.emit("node-drag-start",p.node,c)},treeNodeDragOver:({event:c,treeNode:p})=>{const d=p,y=l.value.dropNode;y&&y!==d&&Ne(y.$el,o.is("drop-inner"));const N=l.value.draggingNode;if(!N||!d)return;let S=!0,b=!0,x=!0,z=!0;typeof t.allowDrop=="function"&&(S=t.allowDrop(N.node,d.node,"prev"),z=b=t.allowDrop(N.node,d.node,"inner"),x=t.allowDrop(N.node,d.node,"next")),c.dataTransfer.dropEffect=b||S||x?"move":"none",(S||b||x)&&y!==d&&(y&&e.emit("node-drag-leave",N.node,y.node,c),e.emit("node-drag-enter",N.node,d.node,c)),(S||b||x)&&(l.value.dropNode=d),d.node.nextSibling===N.node&&(x=!1),d.node.previousSibling===N.node&&(S=!1),d.node.contains(N.node,!1)&&(b=!1),(N.node===d.node||N.node.contains(d.node))&&(S=!1,b=!1,x=!1);const _=d.$el.getBoundingClientRect(),j=n.value.getBoundingClientRect();let T;const w=S?b?.25:x?.45:1:-1,P=x?b?.75:S?.55:0:1;let H=-9999;const g=c.clientY-_.top;g<_.height*w?T="before":g>_.height*P?T="after":b?T="inner":T="none";const F=d.$el.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),V=a.value;T==="before"?H=F.top-j.top:T==="after"&&(H=F.bottom-j.top),V.style.top=`${H}px`,V.style.left=`${F.right-j.left}px`,T==="inner"?rt(d.$el,o.is("drop-inner")):Ne(d.$el,o.is("drop-inner")),l.value.showDropIndicator=T==="before"||T==="after",l.value.allowDrop=l.value.showDropIndicator||z,l.value.dropType=T,e.emit("node-drag-over",N.node,d.node,c)},treeNodeDragEnd:c=>{const{draggingNode:p,dropType:d,dropNode:y}=l.value;if(c.preventDefault(),c.dataTransfer.dropEffect="move",p&&y){const N={data:p.node.data};d!=="none"&&p.node.remove(),d==="before"?y.node.parent.insertBefore(N,y.node):d==="after"?y.node.parent.insertAfter(N,y.node):d==="inner"&&y.node.insertChild(N),d!=="none"&&s.value.registerNode(N),Ne(y.$el,o.is("drop-inner")),e.emit("node-drag-end",p.node,y.node,d,c),d!=="none"&&e.emit("node-drop",p.node,y.node,d,c)}p&&!y&&e.emit("node-drag-end",p.node,null,d,c),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const Nn=G({name:"ElTreeNode",components:{ElCollapseTransition:fn,ElCheckbox:Ge,NodeContent:yn,ElIcon:Fe,Loading:$e},props:{node:{type:te,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const n=J("tree"),{broadcastExpanded:a}=nt(t),s=ne("RootTree"),o=A(!1),l=A(!1),r=A(null),u=A(null),h=A(null),c=ne(at),p=Be();oe("NodeInstance",p),t.node.expanded&&(o.value=!0,l.value=!0);const d=s.props.children||"children";W(()=>{const g=t.node.data[d];return g&&[...g]},()=>{t.node.updateChildren()}),W(()=>t.node.indeterminate,g=>{S(t.node.checked,g)}),W(()=>t.node.checked,g=>{S(g,t.node.indeterminate)}),W(()=>t.node.expanded,g=>{le(()=>o.value=g),g&&(l.value=!0)});const y=g=>Ve(s.props.nodeKey,g.data),N=g=>{const F=t.props.class;if(!F)return{};let V;if(De(F)){const{data:m}=g;V=F(m,g)}else V=F;return bt(V)?{[V]:!0}:V},S=(g,F)=>{(r.value!==g||u.value!==F)&&s.ctx.emit("check-change",t.node.data,g,F),r.value=g,u.value=F},b=g=>{Te(s.store,s.ctx.emit,()=>s.store.value.setCurrentNode(t.node)),s.currentNode.value=t.node,s.props.expandOnClickNode&&z(),s.props.checkOnClickNode&&!t.node.disabled&&_(null,{target:{checked:!t.node.checked}}),s.ctx.emit("node-click",t.node.data,t.node,p,g)},x=g=>{s.instance.vnode.props.onNodeContextmenu&&(g.stopPropagation(),g.preventDefault()),s.ctx.emit("node-contextmenu",g,t.node.data,t.node,p)},z=()=>{t.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",t.node.data,t.node,p),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,p)))},_=(g,F)=>{t.node.setChecked(F.target.checked,!s.props.checkStrictly),le(()=>{const V=s.store.value;s.ctx.emit("check",t.node.data,{checkedNodes:V.getCheckedNodes(),checkedKeys:V.getCheckedKeys(),halfCheckedNodes:V.getHalfCheckedNodes(),halfCheckedKeys:V.getHalfCheckedKeys()})})};return{ns:n,node$:h,tree:s,expanded:o,childNodeRendered:l,oldChecked:r,oldIndeterminate:u,getNodeKey:y,getNodeClass:N,handleSelectChange:S,handleClick:b,handleContextMenu:x,handleExpandIconClick:z,handleCheckChange:_,handleChildNodeExpand:(g,F,V)=>{a(F),s.ctx.emit("node-expand",g,F,V)},handleDragStart:g=>{!s.props.draggable||c.treeNodeDragStart({event:g,treeNode:t})},handleDragOver:g=>{g.preventDefault(),s.props.draggable&&c.treeNodeDragOver({event:g,treeNode:{$el:h.value,node:t.node}})},handleDrop:g=>{g.preventDefault()},handleDragEnd:g=>{!s.props.draggable||c.treeNodeDragEnd(g)},CaretRight:dt}}}),Cn=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],bn=["aria-expanded"];function En(t,e,n,a,s,o){const l=q("el-icon"),r=q("el-checkbox"),u=q("loading"),h=q("node-content"),c=q("el-tree-node"),p=q("el-collapse-transition");return Ke((E(),U("div",{ref:"node$",class:L([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=ee((...d)=>t.handleClick&&t.handleClick(...d),["stop"])),onContextmenu:e[2]||(e[2]=(...d)=>t.handleContextMenu&&t.handleContextMenu(...d)),onDragstart:e[3]||(e[3]=ee((...d)=>t.handleDragStart&&t.handleDragStart(...d),["stop"])),onDragover:e[4]||(e[4]=ee((...d)=>t.handleDragOver&&t.handleDragOver(...d),["stop"])),onDragend:e[5]||(e[5]=ee((...d)=>t.handleDragEnd&&t.handleDragEnd(...d),["stop"])),onDrop:e[6]||(e[6]=ee((...d)=>t.handleDrop&&t.handleDrop(...d),["stop"]))},[Y("div",{class:L(t.ns.be("node","content")),style:Dt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(E(),O(l,{key:0,class:L([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:ee(t.handleExpandIconClick,["stop"])},{default:M(()=>[(E(),O(Et(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):R("v-if",!0),t.showCheckbox?(E(),O(r,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=ee(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):R("v-if",!0),t.node.loading?(E(),O(l,{key:2,class:L([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:M(()=>[B(u)]),_:1},8,["class"])):R("v-if",!0),B(h,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),B(p,null,{default:M(()=>[!t.renderAfterExpand||t.childNodeRendered?Ke((E(),U("div",{key:0,class:L(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(E(!0),U(ie,null,ge(t.node.childNodes,d=>(E(),O(c,{key:t.getNodeKey(d),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:d,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,bn)),[[Se,t.expanded]]):R("v-if",!0)]),_:1})],42,Cn)),[[Se,t.node.visible]])}var Dn=ae(Nn,[["render",En],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function wn({el$:t},e){const n=J("tree"),a=Me([]),s=Me([]);et(()=>{l()}),wt(()=>{a.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),W(s,r=>{r.forEach(u=>{u.setAttribute("tabindex","-1")})}),Kt(t,"keydown",r=>{const u=r.target;if(!u.className.includes(n.b("node")))return;const h=r.code;a.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`));const c=a.value.indexOf(u);let p;if([Z.up,Z.down].includes(h)){if(r.preventDefault(),h===Z.up){p=c===-1?0:c!==0?c-1:a.value.length-1;const y=p;for(;!e.value.getNode(a.value[p].dataset.key).canFocus;){if(p--,p===y){p=-1;break}p<0&&(p=a.value.length-1)}}else{p=c===-1?0:c<a.value.length-1?c+1:0;const y=p;for(;!e.value.getNode(a.value[p].dataset.key).canFocus;){if(p++,p===y){p=-1;break}p>=a.value.length&&(p=0)}}p!==-1&&a.value[p].focus()}[Z.left,Z.right].includes(h)&&(r.preventDefault(),u.click());const d=u.querySelector('[type="checkbox"]');[Z.enter,Z.space].includes(h)&&d&&(r.preventDefault(),d.click())});const l=()=>{var r;a.value=Array.from(t.value.querySelectorAll(`.${n.is("focusable")}[role=treeitem]`)),s.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const u=t.value.querySelectorAll(`.${n.is("checked")}[role=treeitem]`);if(u.length){u[0].setAttribute("tabindex","0");return}(r=a.value[0])==null||r.setAttribute("tabindex","0")}}const Kn=G({name:"ElTree",components:{ElTreeNode:Dn},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:it}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:n}=Je(),a=J("tree"),s=A(new mn({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));s.value.initialize();const o=A(s.value.root),l=A(null),r=A(null),u=A(null),{broadcastExpanded:h}=nt(t),{dragState:c}=kn({props:t,ctx:e,el$:r,dropIndicator$:u,store:s});wn({el$:r},s);const p=$(()=>{const{childNodes:i}=o.value;return!i||i.length===0||i.every(({visible:C})=>!C)});W(()=>t.currentNodeKey,i=>{s.value.setCurrentNodeKey(i)}),W(()=>t.defaultCheckedKeys,i=>{s.value.setDefaultCheckedKey(i)}),W(()=>t.defaultExpandedKeys,i=>{s.value.setDefaultExpandedKeys(i)}),W(()=>t.data,i=>{s.value.setData(i)},{deep:!0}),W(()=>t.checkStrictly,i=>{s.value.checkStrictly=i});const d=i=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(i)},y=i=>Ve(t.nodeKey,i.data),N=i=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const C=s.value.getNode(i);if(!C)return[];const I=[C.data];let X=C.parent;for(;X&&X!==o.value;)I.push(X.data),X=X.parent;return I.reverse()},S=(i,C)=>s.value.getCheckedNodes(i,C),b=i=>s.value.getCheckedKeys(i),x=()=>{const i=s.value.getCurrentNode();return i?i.data:null},z=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const i=x();return i?i[t.nodeKey]:null},_=(i,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(i,C)},j=(i,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(i,C)},T=(i,C,I)=>{s.value.setChecked(i,C,I)},w=()=>s.value.getHalfCheckedNodes(),P=()=>s.value.getHalfCheckedKeys(),H=(i,C=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Te(s,e.emit,()=>s.value.setUserCurrentNode(i,C))},g=(i,C=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Te(s,e.emit,()=>s.value.setCurrentNodeKey(i,C))},F=i=>s.value.getNode(i),V=i=>{s.value.remove(i)},m=(i,C)=>{s.value.append(i,C)},f=(i,C)=>{s.value.insertBefore(i,C)},v=(i,C)=>{s.value.insertAfter(i,C)},k=(i,C,I)=>{h(C),e.emit("node-expand",i,C,I)},K=(i,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(i,C)};return oe("RootTree",{ctx:e,props:t,store:s,root:o,currentNode:l,instance:Be()}),oe(ut,void 0),{ns:a,store:s,root:o,currentNode:l,dragState:c,el$:r,dropIndicator$:u,isEmpty:p,filter:d,getNodeKey:y,getNodePath:N,getCheckedNodes:S,getCheckedKeys:b,getCurrentNode:x,getCurrentKey:z,setCheckedNodes:_,setCheckedKeys:j,setChecked:T,getHalfCheckedNodes:w,getHalfCheckedKeys:P,setCurrentNode:H,setCurrentKey:g,t:n,getNode:F,remove:V,append:m,insertBefore:f,insertAfter:v,handleNodeExpand:k,updateKeyChildren:K}}});function Sn(t,e,n,a,s,o){var l;const r=q("el-tree-node");return E(),U("div",{ref:"el$",class:L([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(E(!0),U(ie,null,ge(t.root.childNodes,u=>(E(),O(r,{key:t.getNodeKey(u),node:u,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(E(),U("div",{key:0,class:L(t.ns.e("empty-block"))},[Y("span",{class:L(t.ns.e("empty-text"))},me((l=t.emptyText)!=null?l:t.t("el.tree.emptyText")),3)],2)):R("v-if",!0),Ke(Y("div",{ref:"dropIndicator$",class:L(t.ns.e("drop-indicator"))},null,2),[[Se,t.dragState.showDropIndicator]])],2)}var ve=ae(Kn,[["render",Sn],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);ve.install=t=>{t.component(ve.name,ve)};const An=ve,Tn=An,Ze=[{value:"guide",label:"Guide",children:[{value:"disciplines",label:"Disciplines",children:[{value:"consistency",label:"Consistency"},{value:"feedback",label:"Feedback"},{value:"efficiency",label:"Efficiency"},{value:"controllability",label:"Controllability"}]},{value:"navigation",label:"Navigation",children:[{value:"side nav",label:"Side Navigation"},{value:"top nav",label:"Top Navigation"}]}]},{value:"component",label:"Component",children:[{value:"basic",label:"Basic",children:[{value:"layout",label:"Layout"},{value:"color",label:"Color"},{value:"typography",label:"Typography"},{value:"icon",label:"Icon"},{value:"button",label:"Button"}]},{value:"notice",label:"Notice",children:[{value:"alert",label:"Alert"},{value:"loading",label:"Loading"},{value:"message",label:"Message"},{value:"message-box",label:"MessageBox"},{value:"notification",label:"Notification"}]}]}],xn=G({__name:"index",props:{name:{type:String,default:""},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},loadingText:{type:String,default:"\u52A0\u8F7D\u4E2D"},emptyText:{type:String,default:"\u5C1A\u672A\u9009\u62E9"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array],required:!0},options:{type:[Array,Function],default:()=>[]},props:{type:Object,default:()=>{}},expires:{type:[Date,Number],default:60*60*2}},emits:["update:modelValue","change","init"],setup(t,{emit:e}){const n=t,[a,s]=Oe(),[o,l]=Oe(),r=A(!1),u=A(),h=Tt(()=>!r.value&&!n.disabled&&s(),300),c=$(()=>({label:"label",value:"value",children:"children",multiple:n.multiple,emitPath:!1,...n.props})),p=$(()=>({label:c.value.label,value:c.value.value,children:c.value.children,disabled:""})),d=$({get:()=>n.modelValue,set:f=>e("update:modelValue",f)}),y=$(()=>Array.isArray(n.options)?n.options:u.value||[]),N=$(()=>r.value?n.loadingText:n.placeholder),S=$({get(){let f=n.modelValue;n.multiple&&(f=ct(n,"modelValue[0]")||[]);const k=xt.getPath(y.value,K=>K[c.value.value]===f).map(K=>K[c.value.label]);if(n.multiple){if(!k||k.length===0||!Array.isArray(n.modelValue))return;const K=[...n.modelValue];return K[0]=k.join(" / "),K}return k.join(" / ")},set(){}}),b=Ft(),x=$(()=>({[b["is-active"]]:a.value})),z=A(),_=A();St(_,f=>{let v=f.target,k=!1;do k=v.classList.contains(b.select),v=v.parentNode;while(k===!1&&v.nodeName!=="BODY");!k&&s(!1)});const j=A(),T=()=>le(()=>{var f,v;(v=(f=j.value)==null?void 0:f.popperRef)==null||v.popperInstanceRef.update()}),w=(f,v)=>f?f.includes(v[c.value.value]):!0,P=A(),H=f=>{le(()=>{var v;return(v=P.value)==null?void 0:v.filter(f)}),T()},g=A(),F=f=>{var k;const v=(k=g.value)==null?void 0:k.getCheckedNodes(!0);e("change",f,v),n.multiple?H(f):s()},V=()=>{e("update:modelValue",n.multiple?[]:""),n.multiple&&H([])};W(a,f=>{f&&n.multiple&&H(n.modelValue||"")});const m=async()=>{if(Array.isArray(n.options))return;const f=`tree-picker-${n.name}`;if(n.name){const v=He.get(f);if(v){u.value=v,e("init",v);return}}r.value=!0;try{u.value=await n.options(),n.name&&He.set(f,u.value,{expires:n.expires}),e("init",u.value)}finally{r.value=!1}};return At(()=>m()),(f,v)=>(E(),O(D(Ot),{ref_key:"myPopover",ref:j,visible:D(a),placement:"bottom","popper-class":D(b).popover,onBeforeEnter:v[2]||(v[2]=()=>D(l)()),onAfterLeave:v[3]||(v[3]=()=>D(l)())},{reference:M(()=>[B(D(Bt),{ref_key:"mySelect",ref:z,modelValue:D(S),"onUpdate:modelValue":v[1]||(v[1]=k=>_e(S)?S.value=k:null),placeholder:D(N),"collapse-tags":"",clearable:"",disabled:r.value||t.disabled,multiple:t.multiple,class:L([D(x),D(b).select]),"popper-class":D(b)["popover-select"],onClick:D(h),onClear:V},null,8,["modelValue","placeholder","disabled","multiple","class","popper-class","onClick"])]),default:M(()=>[Y("div",{ref_key:"myWrapper",ref:_,class:L(D(b).wrapper)},[t.multiple?(E(),U("div",{key:0,class:L(D(b).selected)},[B(D(Xe),null,{default:M(()=>[B(D(Tn),{ref_key:"myTree",ref:P,"default-expand-all":"",data:D(y),"node-key":D(c).value,props:D(p),"filter-node-method":w,"empty-text":t.emptyText},null,8,["data","node-key","props","empty-text"])]),_:1})],2)):R("v-if",!0),D(o)?(E(),O(D(cn),tt({key:1,ref_key:"myCascader",ref:g,modelValue:D(d),"onUpdate:modelValue":v[0]||(v[0]=k=>_e(d)?d.value=k:null),props:D(c),options:D(y)},f.$attrs,{onExpandChange:T,onChange:F}),null,16,["modelValue","props","options"])):R("v-if",!0)],2)]),_:1},8,["visible","popper-class"]))}}),Fn="_popover_8h79y_1",$n="_wrapper_8h79y_6",Bn="_select_8h79y_13",Ln="_selected_8h79y_24",Vn={popover:Fn,wrapper:$n,select:Bn,"is-active":"_is-active_8h79y_17",selected:Ln,"popover-select":"_popover-select_8h79y_47"},Pn={$style:Vn},Ye=ke(xn,[["__cssModules",Pn],["__file","index.vue"]]),In=G({__name:"example",setup(t){const e=A(""),n=A(!1),a=A(!0),s=r=>{e.value=r?[]:""},o=()=>new Promise(r=>{setTimeout(()=>r(Ze),3e3)}),l=()=>{a.value=!1,le(()=>{a.value=!0})};return(r,u)=>(E(),O(pt,null,{default:M(()=>[B(D(ue),{label:"\u5C55\u793A\u533A\uFF1A\u540C\u6B65"},{default:M(()=>[B(Ye,{modelValue:e.value,"onUpdate:modelValue":u[0]||(u[0]=h=>e.value=h),options:D(Ze),multiple:n.value,width:"300px"},null,8,["modelValue","options","multiple"])]),_:1}),B(D(ue),{label:"\u5C55\u793A\u533A\uFF1A\u5F02\u6B65"},{default:M(()=>[B(D(_t),null,{default:M(()=>[a.value?(E(),O(Ye,{key:0,modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=h=>e.value=h),options:o,multiple:n.value,width:"300px"},null,8,["modelValue","multiple"])):R("v-if",!0),B(D(Ht),{onClick:l},{default:M(()=>[ye("\u91CD\u65B0\u52A0\u8F7D")]),_:1})]),_:1})]),_:1}),B(D(ue),{label:"\u53C2\u6570\uFF1A\u5355/\u591A\u9009"},{default:M(()=>[B(D(qt),{modelValue:n.value,"onUpdate:modelValue":u[2]||(u[2]=h=>n.value=h),"active-text":"\u591A\u9009","inactive-text":"\u5355\u9009","active-value":!0,"inactive-value":!1,onChange:s},null,8,["modelValue"])]),_:1}),B(D(ue),{label:"\u7ED3\u679C"},{default:M(()=>[Y("span",null,me(e.value),1)]),_:1})]),_:1}))}}),Mn=ke(In,[["__file","example.vue"]]),On=G({__name:"usage",setup(t){const e={params:[{param:"*v-model",description:"\u7ED1\u5B9A\u503C",type:"Value | Value[]",defaultValue:"-"},{param:"*multiple",description:"\u662F\u5426\u591A\u9009",type:"boolean",defaultValue:"false"},{param:"*options",description:"\u6811\u5F62\u7ED3\u6784\u6570\u636E\uFF0C\u53C2\u8003 el-cascader \uFF0C\u53EF\u4EE5\u662F Promise \u6570\u636E",type:"ITreeOption | (() => Promise<ITreeOption>)",defaultValue:"[]"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascader-%E5%B1%9E%E6%80%A7",defaultValue:"-"},{param:"placeholder",description:"placeholder",type:"string",defaultValue:"\u8BF7\u9009\u62E9"},{param:"loadingText",description:"\u52A0\u8F7D\u5F02\u6B65\u6570\u636E\u65F6\u7684\u6587\u672C",type:"string",defaultValue:"\u52A0\u8F7D\u4E2D"},{param:"emptyText",description:"\u590D\u9009\u672A\u9009\u62E9\u65F6\uFF0C\u5DF2\u9009\u6570\u636E\u9762\u677F\u5C55\u793A\u7684\u6587\u6848",type:"string",defaultValue:"\u5C1A\u672A\u9009\u62E9"},{param:"name",description:"\u4F7F\u7528 localStorage \u7F13\u5B58\u65F6\u7684 key\uFF0C\u7A7A\u4E0D\u7F13\u5B58",type:"string",defaultValue:""},{param:"expires",description:"\u5BF9\u6570\u636E\u8FDB\u884C localStorage \u7F13\u5B58\uFF0C\u6307\u5B9A\u65E5\u671F\u5230\u671F\u6216\u8005 X \u79D2\u540E\u5931\u6548\u3002\u4E0D\u7F13\u5B58\u8BBE\u7F6E\u4E3A 0",type:"Date | number",defaultValue:"7200"},{param:"props",description:"\u7EA7\u8054\u9009\u62E9\u5668 CascaderPanel \u7684\u53C2\u6570\uFF0C\u4F1A\u8986\u76D6\u5185\u7F6E\u529F\u80FD",type:"CascaderProps",defaultValue:"-"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascaderprops",defaultValue:"-"},{param:"\u5176\u4ED6",description:"el-cascader \u7684\u5C5E\u6027\u3001\u4E8B\u4EF6",type:"-",defaultValue:"-"}],types:[{param:"Value",description:"string | number | boolean"},{param:"ITreeOption",description:"{label: string, value: Value, children: ITreeOption[], ...\u5176\u4ED6}"}],events:[{name:"init",description:"options \u4E3A\u5F02\u6B65\u65F6\uFF0C\u52A0\u8F7D\u5B8C\u6210\u7684\u56DE\u8C03",param:"options"},{name:"change",description:"\u9009\u62E9\u53D8\u5316\u65F6\u7684\u89E6\u53D1",param:"value, node"}]};return(n,a)=>(E(),O(ht,{data:e}))}}),_n=ke(On,[["__file","usage.vue"]]),Hn=Y("h2",{id:"\u529F\u80FD",tabindex:"-1"},[Y("a",{class:"header-anchor",href:"#\u529F\u80FD","aria-hidden":"true"},"#"),ye(" \u529F\u80FD")],-1),qn=Y("p",null,"\u7528\u4E8E\u6811\u5F62\u6570\u636E\u7684\u9009\u62E9\uFF0C\u5229\u7528Select\u3001Cascader\u3001Popover\u8FDB\u884C\u6269\u5C55\uFF0C\u589E\u5F3A\u591A\u9009\u529F\u80FD\u3002",-1),zn=Y("p",null,"\u4E0D\u540C\u4E8E\u5B98\u65B9\u7684 Cascader\uFF0C\u5728\u591A\u9009\u7ED3\u679C\u5C55\u793A\u65F6\u4F7F\u7528\u5355\u72EC\u7684\u9762\u677F\u5C55\u793A\u6811\u5F62\u9009\u62E9\u7ED3\u679C\u3002",-1),jn=Y("h2",{id:"\u529F\u80FD\u793A\u4F8B",tabindex:"-1"},[Y("a",{class:"header-anchor",href:"#\u529F\u80FD\u793A\u4F8B","aria-hidden":"true"},"#"),ye(" \u529F\u80FD\u793A\u4F8B")],-1),Un=$t(`<h2 id="\u6700\u5C0F\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u6700\u5C0F\u793A\u4F8B" aria-hidden="true">#</a> \u6700\u5C0F\u793A\u4F8B</h2><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTreePicker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Wrapper <span class="token keyword">from</span> <span class="token string">&#39;@/components/simple-wrapper.vue&#39;</span>
<span class="token keyword">import</span> treeData <span class="token keyword">from</span> <span class="token string">&#39;./data&#39;</span>
<span class="token keyword">import</span> HTreePicker <span class="token keyword">from</span> <span class="token string">&#39;../index.vue&#39;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2>`,3),Rn={__name:"tree-picker.html",setup(t){return(e,n)=>(E(),U("div",null,[Hn,qn,zn,jn,B(Mn),Un,B(_n)]))}},ca=ke(Rn,[["__file","tree-picker.html.vue"]]);export{ca as default};
