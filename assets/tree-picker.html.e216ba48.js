import{u as J,ah as Ge,s as $e,ay as ot,t as Be,af as lt,_ as ae,N as Xe,G as Je,aG as rt,U as Pe,C as Ie,M as Z,r as Ne,d as dt,aH as it,o as ct,aI as ut,K as ht,E as ce,W as pt,D as ft}from"./document.710a3afc.js";import{f as G,ai as be,B as ne,z as B,r as H,o as E,c as U,a4 as R,h as O,as as ee,w as M,d as F,X as L,F as ie,a as Y,g as A,aj as me,b as ye,t as ge,A as Fe,aI as Ee,K as De,Q as vt,N as gt,D as oe,a1 as Qe,G as W,bs as mt,E as et,a0 as le,l as yt,R as kt,T as tt,bI as Nt,u as D,Z as Ct,s as we,q as bt,n as Et,V as Se,W as Ke,a3 as Dt,Y as wt,aA as Me,a2 as St,U as Kt,aL as Oe,aa as At,P as Tt,J as _e,b$ as xt,c6 as $t,c7 as Bt,b_ as Ft,ao as qe,_ as ke,e as Lt}from"./app.2c247f0d.js";import{c as He,E as Vt}from"./index.2eec1dd4.js";import{b as Pt}from"./index.7086ee85.js";import{i as de}from"./isEqual.cf5d84ee.js";import{b as It,u as ze,c as je}from"./arrays.b7dce77b.js";import{s as Mt}from"./scroll.cca35ff1.js";import{E as Ot}from"./index.b9ac4769.js";import{E as _t}from"./index.3b0a4ee4.js";import{E as qt}from"./index.00233e20.js";import{E as Ht}from"./index.69683420.js";import"./index.ecad7783.js";import"./typescript.72bf8adc.js";import"./index.e424981c.js";import"./index.f4ea09c5.js";import"./validator.f6e1e8ad.js";import"./index.dd0a4458.js";var zt=1/0;function jt(e){var t=e==null?0:e.length;return t?It(e,zt):[]}const nt=e=>!e.getAttribute("aria-owns"),Ut=(e,t,a)=>{const{parentNode:n}=e;if(!n)return null;const s=n.querySelectorAll(a),o=Array.prototype.indexOf.call(s,e);return s[o+t]||null},Ce=e=>{!e||(e.focus(),!nt(e)&&e.click())};var Rt=G({name:"NodeContent",setup(){return{ns:J("cascader-node")}},render(){const{ns:e}=this,{node:t,panel:a}=this.$parent,{data:n,label:s}=t,{renderLabelFn:o}=a;return be("span",{class:e.e("label")},o?o({node:t,data:n}):s)}});const Le=Symbol(),Wt=G({name:"ElCascaderNode",components:{ElCheckbox:Ge,ElRadio:Pt,NodeContent:Rt,ElIcon:$e,Check:ot,Loading:Be,ArrowRight:lt},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(e,{emit:t}){const a=ne(Le),n=J("cascader-node"),s=B(()=>a.isHoverMenu),o=B(()=>a.config.multiple),l=B(()=>a.config.checkStrictly),r=B(()=>{var w;return(w=a.checkedNodes[0])==null?void 0:w.uid}),c=B(()=>e.node.isDisabled),p=B(()=>e.node.isLeaf),u=B(()=>l.value&&!p.value||!c.value),h=B(()=>y(a.expandingNode)),d=B(()=>l.value&&a.checkedNodes.some(y)),y=w=>{var P;const{level:q,uid:m}=e.node;return((P=w==null?void 0:w.pathNodes[q-1])==null?void 0:P.uid)===m},N=()=>{h.value||a.expandNode(e.node)},K=w=>{const{node:P}=e;w!==P.checked&&a.handleCheckChange(P,w)},b=()=>{a.lazyLoad(e.node,()=>{p.value||N()})},x=w=>{!s.value||(z(),!p.value&&t("expand",w))},z=()=>{const{node:w}=e;!u.value||w.loading||(w.loaded?N():b())},_=()=>{s.value&&!p.value||(p.value&&!c.value&&!l.value&&!o.value?T(!0):z())},j=w=>{l.value?(K(w),e.node.loaded&&N()):T(w)},T=w=>{e.node.loaded?(K(w),!l.value&&N()):b()};return{panel:a,isHoverMenu:s,multiple:o,checkStrictly:l,checkedNodeId:r,isDisabled:c,isLeaf:p,expandable:u,inExpandingPath:h,inCheckedPath:d,ns:n,handleHoverExpand:x,handleExpand:z,handleClick:_,handleCheck:T,handleSelectCheck:j}}}),Zt=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Yt=Y("span",null,null,-1);function Gt(e,t,a,n,s,o){const l=H("el-checkbox"),r=H("el-radio"),c=H("check"),p=H("el-icon"),u=H("node-content"),h=H("loading"),d=H("arrow-right");return E(),U("li",{id:`${e.menuId}-${e.node.uid}`,role:"menuitem","aria-haspopup":!e.isLeaf,"aria-owns":e.isLeaf?null:e.menuId,"aria-expanded":e.inExpandingPath,tabindex:e.expandable?-1:void 0,class:L([e.ns.b(),e.ns.is("selectable",e.checkStrictly),e.ns.is("active",e.node.checked),e.ns.is("disabled",!e.expandable),e.inExpandingPath&&"in-active-path",e.inCheckedPath&&"in-checked-path"]),onMouseenter:t[2]||(t[2]=(...y)=>e.handleHoverExpand&&e.handleHoverExpand(...y)),onFocus:t[3]||(t[3]=(...y)=>e.handleHoverExpand&&e.handleHoverExpand(...y)),onClick:t[4]||(t[4]=(...y)=>e.handleClick&&e.handleClick(...y))},[R(" prefix "),e.multiple?(E(),O(l,{key:0,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:e.isDisabled,onClick:t[0]||(t[0]=ee(()=>{},["stop"])),"onUpdate:modelValue":e.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):e.checkStrictly?(E(),O(r,{key:1,"model-value":e.checkedNodeId,label:e.node.uid,disabled:e.isDisabled,"onUpdate:modelValue":e.handleSelectCheck,onClick:t[1]||(t[1]=ee(()=>{},["stop"]))},{default:M(()=>[R(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Yt]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):e.isLeaf&&e.node.checked?(E(),O(p,{key:2,class:L(e.ns.e("prefix"))},{default:M(()=>[F(c)]),_:1},8,["class"])):R("v-if",!0),R(" content "),F(u),R(" postfix "),e.isLeaf?R("v-if",!0):(E(),U(ie,{key:3},[e.node.loading?(E(),O(p,{key:0,class:L([e.ns.is("loading"),e.ns.e("postfix")])},{default:M(()=>[F(h)]),_:1},8,["class"])):(E(),O(p,{key:1,class:L(["arrow-right",e.ns.e("postfix")])},{default:M(()=>[F(d)]),_:1},8,["class"]))],64))],42,Zt)}var Xt=ae(Wt,[["render",Gt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Jt=G({name:"ElCascaderMenu",components:{Loading:Be,ElIcon:$e,ElScrollbar:Xe,ElCascaderNode:Xt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(e){const t=Fe(),a=J("cascader-menu"),{t:n}=Je(),s=rt();let o=null,l=null;const r=ne(Le),c=A(null),p=B(()=>!e.nodes.length),u=B(()=>!r.initialLoaded),h=B(()=>`cascader-menu-${s}-${e.index}`),d=b=>{o=b.target},y=b=>{if(!(!r.isHoverMenu||!o||!c.value))if(o.contains(b.target)){N();const x=t.vnode.el,{left:z}=x.getBoundingClientRect(),{offsetWidth:_,offsetHeight:j}=x,T=b.clientX-z,w=o.offsetTop,P=w+o.offsetHeight;c.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${w} L${_} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${P} L${_} ${j} V${P} Z" />
        `}else l||(l=window.setTimeout(K,r.config.hoverThreshold))},N=()=>{!l||(clearTimeout(l),l=null)},K=()=>{!c.value||(c.value.innerHTML="",N())};return{ns:a,panel:r,hoverZone:c,isEmpty:p,isLoading:u,menuId:h,t:n,handleExpand:d,handleMouseMove:y,clearHoverZone:K}}});function Qt(e,t,a,n,s,o){const l=H("el-cascader-node"),r=H("loading"),c=H("el-icon"),p=H("el-scrollbar");return E(),O(p,{key:e.menuId,tag:"ul",role:"menu",class:L(e.ns.b()),"wrap-class":e.ns.e("wrap"),"view-class":[e.ns.e("list"),e.ns.is("empty",e.isEmpty)],onMousemove:e.handleMouseMove,onMouseleave:e.clearHoverZone},{default:M(()=>{var u;return[(E(!0),U(ie,null,me(e.nodes,h=>(E(),O(l,{key:h.uid,node:h,"menu-id":e.menuId,onExpand:e.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),e.isLoading?(E(),U("div",{key:0,class:L(e.ns.e("empty-text"))},[F(c,{size:"14",class:L(e.ns.is("loading"))},{default:M(()=>[F(r)]),_:1},8,["class"]),ye(" "+ge(e.t("el.cascader.loading")),1)],2)):e.isEmpty?(E(),U("div",{key:1,class:L(e.ns.e("empty-text"))},ge(e.t("el.cascader.noData")),3)):(u=e.panel)!=null&&u.isHoverMenu?(E(),U("svg",{key:2,ref:"hoverZone",class:L(e.ns.e("hover-zone"))},null,2)):R("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var en=ae(Jt,[["render",Qt],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let tn=0;const nn=e=>{const t=[e];let{parent:a}=e;for(;a;)t.unshift(a),a=a.parent;return t};class re{constructor(t,a,n,s=!1){this.data=t,this.config=a,this.parent=n,this.root=s,this.uid=tn++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:l,children:r}=a,c=t[r],p=nn(this);this.level=s?0:n?n.level+1:1,this.value=t[o],this.label=t[l],this.pathNodes=p,this.pathValues=p.map(u=>u.value),this.pathLabels=p.map(u=>u.label),this.childrenData=c,this.children=(c||[]).map(u=>new re(u,a,this)),this.loaded=!a.lazy||this.isLeaf||!Ee(c)}get isDisabled(){const{data:t,parent:a,config:n}=this,{disabled:s,checkStrictly:o}=n;return(De(s)?s(t,this):!!t[s])||!o&&(a==null?void 0:a.isDisabled)}get isLeaf(){const{data:t,config:a,childrenData:n,loaded:s}=this,{lazy:o,leaf:l}=a,r=De(l)?l(t,this):t[l];return vt(r)?o&&!s?!1:!(Array.isArray(n)&&n.length):!!r}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(t){const{childrenData:a,children:n}=this,s=new re(t,this.config,this);return Array.isArray(a)?a.push(t):this.childrenData=[t],n.push(s),s}calcText(t,a){const n=t?this.pathLabels.join(a):this.label;return this.text=n,n}broadcast(t,...a){const n=`onParent${He(t)}`;this.children.forEach(s=>{s&&(s.broadcast(t,...a),s[n]&&s[n](...a))})}emit(t,...a){const{parent:n}=this,s=`onChild${He(t)}`;n&&(n[s]&&n[s](...a),n.emit(t,...a))}onParentCheck(t){this.isDisabled||this.setCheckState(t)}onChildCheck(){const{children:t}=this,a=t.filter(s=>!s.isDisabled),n=a.length?a.every(s=>s.checked):!1;this.setCheckState(n)}setCheckState(t){const a=this.children.length,n=this.children.reduce((s,o)=>{const l=o.checked?1:o.indeterminate?.5:0;return s+l},0);this.checked=this.loaded&&this.children.filter(s=>!s.isDisabled).every(s=>s.loaded&&s.checked)&&t,this.indeterminate=this.loaded&&n!==a&&n>0}doCheck(t){if(this.checked===t)return;const{checkStrictly:a,multiple:n}=this.config;a||!n?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check"))}}const Ae=(e,t)=>e.reduce((a,n)=>(n.isLeaf?a.push(n):(!t&&a.push(n),a=a.concat(Ae(n.children,t))),a),[]);class Ue{constructor(t,a){this.config=a;const n=(t||[]).map(s=>new re(s,this.config));this.nodes=n,this.allNodes=Ae(n,!1),this.leafNodes=Ae(n,!0)}getNodes(){return this.nodes}getFlattedNodes(t){return t?this.leafNodes:this.allNodes}appendNode(t,a){const n=a?a.appendChild(t):new re(t,this.config);a||this.nodes.push(n),this.allNodes.push(n),n.isLeaf&&this.leafNodes.push(n)}appendNodes(t,a){t.forEach(n=>this.appendNode(n,a))}getNodeByValue(t,a=!1){return!t&&t!==0?null:this.getFlattedNodes(a).find(s=>de(s.value,t)||de(s.pathValues,t))||null}getSameNode(t){return t&&this.getFlattedNodes(!1).find(({value:n,level:s})=>de(t.value,n)&&t.level===s)||null}}const an={modelValue:[Number,String,Array],options:{type:Array,default:()=>[]},props:{type:Object,default:()=>({})}},sn={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:gt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},on=e=>B(()=>({...sn,...e.props})),Re=e=>{if(!e)return 0;const t=e.id.split("-");return Number(t[t.length-2])},ln=e=>{if(!e)return;const t=e.querySelector("input");t?t.click():nt(e)&&e.click()},rn=(e,t)=>{const a=t.slice(0),n=a.map(o=>o.uid),s=e.reduce((o,l)=>{const r=n.indexOf(l.uid);return r>-1&&(o.push(l),a.splice(r,1),n.splice(r,1)),o},[]);return s.push(...a),s},dn=G({name:"ElCascaderPanel",components:{ElCascaderMenu:en},props:{...an,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Pe,Ie,"close","expand-change"],setup(e,{emit:t,slots:a}){let n=!1;const s=J("cascader"),o=on(e);let l=null;const r=A(!0),c=A([]),p=A(null),u=A([]),h=A(null),d=A([]),y=B(()=>o.value.expandTrigger==="hover"),N=B(()=>e.renderLabel||a.default),K=()=>{const{options:g}=e,f=o.value;n=!1,l=new Ue(g,f),u.value=[l.getNodes()],f.lazy&&Ee(e.options)?(r.value=!1,b(void 0,v=>{v&&(l=new Ue(v,f),u.value=[l.getNodes()]),r.value=!0,q(!1,!0)})):q(!1,!0)},b=(g,f)=>{const v=o.value;g=g||new re({},v,void 0,!0),g.loading=!0;const k=S=>{const i=g,C=i.root?null:i;S&&(l==null||l.appendNodes(S,C)),i.loading=!1,i.loaded=!0,i.childrenData=i.childrenData||[],f&&f(S)};v.lazyLoad(g,k)},x=(g,f)=>{var v;const{level:k}=g,S=u.value.slice(0,k);let i;g.isLeaf?i=g.pathNodes[k-2]:(i=g,S.push(g.children)),((v=h.value)==null?void 0:v.uid)!==(i==null?void 0:i.uid)&&(h.value=g,u.value=S,!f&&t("expand-change",(g==null?void 0:g.pathValues)||[]))},z=(g,f,v=!0)=>{const{checkStrictly:k,multiple:S}=o.value,i=d.value[0];n=!0,!S&&(i==null||i.doCheck(!1)),g.doCheck(f),P(),v&&!S&&!k&&t("close"),!v&&!S&&!k&&_(g)},_=g=>{!g||(g=g.parent,_(g),g&&x(g))},j=g=>l==null?void 0:l.getFlattedNodes(g),T=g=>{var f;return(f=j(g))==null?void 0:f.filter(v=>v.checked!==!1)},w=()=>{d.value.forEach(g=>g.doCheck(!1)),P()},P=()=>{var g;const{checkStrictly:f,multiple:v}=o.value,k=d.value,S=T(!f),i=rn(k,S),C=i.map(I=>I.valueByOption);d.value=i,p.value=v?C:(g=C[0])!=null?g:null},q=(g=!1,f=!1)=>{const{modelValue:v}=e,{lazy:k,multiple:S,checkStrictly:i}=o.value,C=!i;if(!(!r.value||n||!f&&de(v,p.value)))if(k&&!g){const X=ze(jt(je(v))).map(Q=>l==null?void 0:l.getNodeByValue(Q)).filter(Q=>!!Q&&!Q.loaded&&!Q.loading);X.length?X.forEach(Q=>{b(Q,()=>q(!1,f))}):q(!0,f)}else{const I=S?je(v):[v],X=ze(I.map(Q=>l==null?void 0:l.getNodeByValue(Q,C)));m(X,f),p.value=v}},m=(g,f=!0)=>{const{checkStrictly:v}=o.value,k=d.value,S=g.filter(I=>!!I&&(v||I.isLeaf)),i=l==null?void 0:l.getSameNode(h.value),C=f&&i||S[0];C?C.pathNodes.forEach(I=>x(I,!0)):h.value=null,k.forEach(I=>I.doCheck(!1)),S.forEach(I=>I.doCheck(!0)),d.value=S,le($)},$=()=>{!yt||c.value.forEach(g=>{const f=g==null?void 0:g.$el;if(f){const v=f.querySelector(`.${s.namespace.value}-scrollbar__wrap`),k=f.querySelector(`.${s.b("node")}.${s.is("active")}`)||f.querySelector(`.${s.b("node")}.in-active-path`);Mt(v,k)}})},V=g=>{const f=g.target,{code:v}=g;switch(v){case Z.up:case Z.down:{g.preventDefault();const k=v===Z.up?-1:1;Ce(Ut(f,k,`.${s.b("node")}[tabindex="-1"]`));break}case Z.left:{g.preventDefault();const k=c.value[Re(f)-1],S=k==null?void 0:k.$el.querySelector(`.${s.b("node")}[aria-expanded="true"]`);Ce(S);break}case Z.right:{g.preventDefault();const k=c.value[Re(f)+1],S=k==null?void 0:k.$el.querySelector(`.${s.b("node")}[tabindex="-1"]`);Ce(S);break}case Z.enter:ln(f);break}};return oe(Le,Qe({config:o,expandingNode:h,checkedNodes:d,isHoverMenu:y,initialLoaded:r,renderLabelFn:N,lazyLoad:b,expandNode:x,handleCheckChange:z})),W([o,()=>e.options],K,{deep:!0,immediate:!0}),W(()=>e.modelValue,()=>{n=!1,q()}),W(p,g=>{de(g,e.modelValue)||(t(Pe,g),t(Ie,g))}),mt(()=>c.value=[]),et(()=>!Ee(e.modelValue)&&q()),{ns:s,menuList:c,menus:u,checkedNodes:d,handleKeyDown:V,handleCheckChange:z,getFlattedNodes:j,getCheckedNodes:T,clearCheckedNodes:w,calculateCheckedValue:P,scrollToExpandingNode:$}}});function cn(e,t,a,n,s,o){const l=H("el-cascader-menu");return E(),U("div",{class:L([e.ns.b("panel"),e.ns.is("bordered",e.border)]),onKeydown:t[0]||(t[0]=(...r)=>e.handleKeyDown&&e.handleKeyDown(...r))},[(E(!0),U(ie,null,me(e.menus,(r,c)=>(E(),O(l,{key:c,ref_for:!0,ref:p=>e.menuList[c]=p,index:c,nodes:[...r]},null,8,["index","nodes"]))),128))],34)}var he=ae(dn,[["render",cn],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);he.install=e=>{e.component(he.name,he)};const un=he,hn=un,pn={name:"ElCollapseTransition"},fn=G({...pn,setup(e){const t=J("collapse-transition"),a={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){n.dataset.oldOverflow=n.style.overflow,n.scrollHeight!==0?(n.style.maxHeight=`${n.scrollHeight}px`,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom):(n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom),n.style.overflow="hidden"},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom}};return(n,s)=>(E(),O(Ct,tt({name:D(t).b()},Nt(a)),{default:M(()=>[kt(n.$slots,"default")]),_:3},16,["name"]))}});var pe=ae(fn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);pe.install=e=>{e.component(pe.name,pe)};const vn=pe,se="$treeNodeId",We=function(e,t){!t||t[se]||Object.defineProperty(t,se,{value:e.id,enumerable:!1,configurable:!1,writable:!1})},Ve=function(e,t){return e?t[e]:t[se]},Te=(e,t,a)=>{const n=e.value.currentNode;a();const s=e.value.currentNode;n!==s&&t("current-change",s||null,s)},xe=e=>{let t=!0,a=!0,n=!0;for(let s=0,o=e.length;s<o;s++){const l=e[s];(l.checked!==!0||l.indeterminate)&&(t=!1,l.disabled||(n=!1)),(l.checked!==!1||l.indeterminate)&&(a=!1)}return{all:t,none:a,allWithoutDisable:n,half:!t&&!a}},fe=function(e){if(e.childNodes.length===0||e.loading)return;const{all:t,none:a,half:n}=xe(e.childNodes);t?(e.checked=!0,e.indeterminate=!1):n?(e.checked=!1,e.indeterminate=!0):a&&(e.checked=!1,e.indeterminate=!1);const s=e.parent;!s||s.level===0||e.store.checkStrictly||fe(s)},ue=function(e,t){const a=e.store.props,n=e.data||{},s=a[t];if(typeof s=="function")return s(n,e);if(typeof s=="string")return n[s];if(typeof s>"u"){const o=n[t];return o===void 0?"":o}};let gn=0;class te{constructor(t){this.id=gn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const a in t)we(t,a)&&(this[a]=t[a]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const t=this.store;if(!t)throw new Error("[Node]store is required!");t.registerNode(this);const a=t.props;if(a&&typeof a.isLeaf<"u"){const o=ue(this,"isLeaf");typeof o=="boolean"&&(this.isLeafByUser=o)}if(t.lazy!==!0&&this.data?(this.setData(this.data),t.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&t.lazy&&t.defaultExpandAll&&this.expand(),Array.isArray(this.data)||We(this,this.data),!this.data)return;const n=t.defaultExpandedKeys,s=t.key;s&&n&&n.includes(this.key)&&this.expand(null,t.autoExpandParent),s&&t.currentNodeKey!==void 0&&this.key===t.currentNodeKey&&(t.currentNode=this,t.currentNode.isCurrent=!0),t.lazy&&t._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(t){Array.isArray(t)||We(this,t),this.data=t,this.childNodes=[];let a;this.level===0&&Array.isArray(this.data)?a=this.data:a=ue(this,"children")||[];for(let n=0,s=a.length;n<s;n++)this.insertChild({data:a[n]})}get label(){return ue(this,"label")}get key(){const t=this.store.key;return this.data?this.data[t]:null}get disabled(){return ue(this,"disabled")}get nextSibling(){const t=this.parent;if(t){const a=t.childNodes.indexOf(this);if(a>-1)return t.childNodes[a+1]}return null}get previousSibling(){const t=this.parent;if(t){const a=t.childNodes.indexOf(this);if(a>-1)return a>0?t.childNodes[a-1]:null}return null}contains(t,a=!0){return(this.childNodes||[]).some(n=>n===t||a&&n.contains(t))}remove(){const t=this.parent;t&&t.removeChild(this)}insertChild(t,a,n){if(!t)throw new Error("InsertChild error: child is required.");if(!(t instanceof te)){if(!n){const s=this.getChildren(!0);s.includes(t.data)||(typeof a>"u"||a<0?s.push(t.data):s.splice(a,0,t.data))}Object.assign(t,{parent:this,store:this.store}),t=Qe(new te(t)),t instanceof te&&t.initialize()}t.level=this.level+1,typeof a>"u"||a<0?this.childNodes.push(t):this.childNodes.splice(a,0,t),this.updateLeafState()}insertBefore(t,a){let n;a&&(n=this.childNodes.indexOf(a)),this.insertChild(t,n)}insertAfter(t,a){let n;a&&(n=this.childNodes.indexOf(a),n!==-1&&(n+=1)),this.insertChild(t,n)}removeChild(t){const a=this.getChildren()||[],n=a.indexOf(t.data);n>-1&&a.splice(n,1);const s=this.childNodes.indexOf(t);s>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(s,1)),this.updateLeafState()}removeChildByData(t){let a=null;for(let n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===t){a=this.childNodes[n];break}a&&this.removeChild(a)}expand(t,a){const n=()=>{if(a){let s=this.parent;for(;s.level>0;)s.expanded=!0,s=s.parent}this.expanded=!0,t&&t(),this.childNodes.forEach(s=>{s.canFocus=!0})};this.shouldLoadData()?this.loadData(s=>{Array.isArray(s)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||fe(this),n())}):n()}doCreateChildren(t,a={}){t.forEach(n=>{this.insertChild(Object.assign({data:n},a),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(t=>{t.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const t=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!t||t.length===0;return}this.isLeaf=!1}setChecked(t,a,n,s){if(this.indeterminate=t==="half",this.checked=t===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:r}=xe(this.childNodes);!this.isLeaf&&!l&&r&&(this.checked=!1,t=!1);const c=()=>{if(a){const p=this.childNodes;for(let d=0,y=p.length;d<y;d++){const N=p[d];s=s||t!==!1;const K=N.disabled?N.checked:s;N.setChecked(K,a,!0,s)}const{half:u,all:h}=xe(p);h||(this.checked=h,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{c(),fe(this)},{checked:t!==!1});return}else c()}const o=this.parent;!o||o.level===0||n||fe(o)}getChildren(t=!1){if(this.level===0)return this.data;const a=this.data;if(!a)return null;const n=this.store.props;let s="children";return n&&(s=n.children||"children"),a[s]===void 0&&(a[s]=null),t&&!a[s]&&(a[s]=[]),a[s]}updateChildren(){const t=this.getChildren()||[],a=this.childNodes.map(o=>o.data),n={},s=[];t.forEach((o,l)=>{const r=o[se];!!r&&a.findIndex(p=>p[se]===r)>=0?n[r]={index:l,data:o}:s.push({index:l,data:o})}),this.store.lazy||a.forEach(o=>{n[o[se]]||this.removeChildByData(o)}),s.forEach(({index:o,data:l})=>{this.insertChild({data:l},o)}),this.updateLeafState()}loadData(t,a={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(a).length)){this.loading=!0;const n=s=>{this.childNodes=[],this.doCreateChildren(s,a),this.loaded=!0,this.loading=!1,this.updateLeafState(),t&&t.call(this,s)};this.store.load(this,n)}else t&&t.call(this)}}class mn{constructor(t){this.currentNode=null,this.currentNodeKey=null;for(const a in t)we(t,a)&&(this[a]=t[a]);this.nodesMap={}}initialize(){if(this.root=new te({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const t=this.load;t(this.root,a=>{this.root.doCreateChildren(a),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(t){const a=this.filterNodeMethod,n=this.lazy,s=function(o){const l=o.root?o.root.childNodes:o.childNodes;if(l.forEach(r=>{r.visible=a.call(r,t,r.data,r),s(r)}),!o.visible&&l.length){let r=!0;r=!l.some(c=>c.visible),o.root?o.root.visible=r===!1:o.visible=r===!1}!t||o.visible&&!o.isLeaf&&!n&&o.expand()};s(this)}setData(t){t!==this.root.data?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(t){if(t instanceof te)return t;const a=bt(t)?Ve(this.key,t):t;return this.nodesMap[a]||null}insertBefore(t,a){const n=this.getNode(a);n.parent.insertBefore({data:t},n)}insertAfter(t,a){const n=this.getNode(a);n.parent.insertAfter({data:t},n)}remove(t){const a=this.getNode(t);a&&a.parent&&(a===this.currentNode&&(this.currentNode=null),a.parent.removeChild(a))}append(t,a){const n=a?this.getNode(a):this.root;n&&n.insertChild({data:t})}_initDefaultCheckedNodes(){const t=this.defaultCheckedKeys||[],a=this.nodesMap;t.forEach(n=>{const s=a[n];s&&s.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(t){(this.defaultCheckedKeys||[]).includes(t.key)&&t.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())}registerNode(t){const a=this.key;!t||!t.data||(a?t.key!==void 0&&(this.nodesMap[t.key]=t):this.nodesMap[t.id]=t)}deregisterNode(t){!this.key||!t||!t.data||(t.childNodes.forEach(n=>{this.deregisterNode(n)}),delete this.nodesMap[t.key])}getCheckedNodes(t=!1,a=!1){const n=[],s=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(r=>{(r.checked||a&&r.indeterminate)&&(!t||t&&r.isLeaf)&&n.push(r.data),s(r)})};return s(this),n}getCheckedKeys(t=!1){return this.getCheckedNodes(t).map(a=>(a||{})[this.key])}getHalfCheckedNodes(){const t=[],a=function(n){(n.root?n.root.childNodes:n.childNodes).forEach(o=>{o.indeterminate&&t.push(o.data),a(o)})};return a(this),t}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(t=>(t||{})[this.key])}_getAllNodes(){const t=[],a=this.nodesMap;for(const n in a)we(a,n)&&t.push(a[n]);return t}updateChildren(t,a){const n=this.nodesMap[t];if(!n)return;const s=n.childNodes;for(let o=s.length-1;o>=0;o--){const l=s[o];this.remove(l.data)}for(let o=0,l=a.length;o<l;o++){const r=a[o];this.append(r,n.data)}}_setCheckedKeys(t,a=!1,n){const s=this._getAllNodes().sort((r,c)=>c.level-r.level),o=Object.create(null),l=Object.keys(n);s.forEach(r=>r.setChecked(!1,!1));for(let r=0,c=s.length;r<c;r++){const p=s[r],u=p.data[t].toString();if(!l.includes(u)){p.checked&&!o[u]&&p.setChecked(!1,!1);continue}let d=p.parent;for(;d&&d.level>0;)o[d.data[t]]=!0,d=d.parent;if(p.isLeaf||this.checkStrictly){p.setChecked(!0,!1);continue}if(p.setChecked(!0,!0),a){p.setChecked(!1,!1);const y=function(N){N.childNodes.forEach(b=>{b.isLeaf||b.setChecked(!1,!1),y(b)})};y(p)}}}setCheckedNodes(t,a=!1){const n=this.key,s={};t.forEach(o=>{s[(o||{})[n]]=!0}),this._setCheckedKeys(n,a,s)}setCheckedKeys(t,a=!1){this.defaultCheckedKeys=t;const n=this.key,s={};t.forEach(o=>{s[o]=!0}),this._setCheckedKeys(n,a,s)}setDefaultExpandedKeys(t){t=t||[],this.defaultExpandedKeys=t,t.forEach(a=>{const n=this.getNode(a);n&&n.expand(null,this.autoExpandParent)})}setChecked(t,a,n){const s=this.getNode(t);s&&s.setChecked(!!a,n)}getCurrentNode(){return this.currentNode}setCurrentNode(t){const a=this.currentNode;a&&(a.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0}setUserCurrentNode(t,a=!0){const n=t[this.key],s=this.nodesMap[n];this.setCurrentNode(s),a&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(t,a=!0){if(t==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const n=this.getNode(t);n&&(this.setCurrentNode(n),a&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const yn=G({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(e){const t=J("tree"),a=ne("NodeInstance"),n=ne("RootTree");return()=>{const s=e.node,{data:o,store:l}=s;return e.renderContent?e.renderContent(be,{_self:a,node:s,data:o,store:l}):be("span",{class:t.be("node","label")},[n.ctx.slots.default?n.ctx.slots.default({node:s,data:o}):s.label])}}});var kn=ae(yn,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function at(e){const t=ne("TreeNodeMap",null),a={treeNodeExpand:n=>{e.node!==n&&e.node.collapse()},children:[]};return t&&t.children.push(a),oe("TreeNodeMap",a),{broadcastExpanded:n=>{if(!!e.accordion)for(const s of a.children)s.treeNodeExpand(n)}}}const st=Symbol("dragEvents");function Nn({props:e,ctx:t,el$:a,dropIndicator$:n,store:s}){const o=J("tree"),l=A({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return oe(st,{treeNodeDragStart:({event:u,treeNode:h})=>{if(typeof e.allowDrag=="function"&&!e.allowDrag(h.node))return u.preventDefault(),!1;u.dataTransfer.effectAllowed="move";try{u.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=h,t.emit("node-drag-start",h.node,u)},treeNodeDragOver:({event:u,treeNode:h})=>{const d=h,y=l.value.dropNode;y&&y!==d&&Ne(y.$el,o.is("drop-inner"));const N=l.value.draggingNode;if(!N||!d)return;let K=!0,b=!0,x=!0,z=!0;typeof e.allowDrop=="function"&&(K=e.allowDrop(N.node,d.node,"prev"),z=b=e.allowDrop(N.node,d.node,"inner"),x=e.allowDrop(N.node,d.node,"next")),u.dataTransfer.dropEffect=b||K||x?"move":"none",(K||b||x)&&y!==d&&(y&&t.emit("node-drag-leave",N.node,y.node,u),t.emit("node-drag-enter",N.node,d.node,u)),(K||b||x)&&(l.value.dropNode=d),d.node.nextSibling===N.node&&(x=!1),d.node.previousSibling===N.node&&(K=!1),d.node.contains(N.node,!1)&&(b=!1),(N.node===d.node||N.node.contains(d.node))&&(K=!1,b=!1,x=!1);const _=d.$el.getBoundingClientRect(),j=a.value.getBoundingClientRect();let T;const w=K?b?.25:x?.45:1:-1,P=x?b?.75:K?.55:0:1;let q=-9999;const m=u.clientY-_.top;m<_.height*w?T="before":m>_.height*P?T="after":b?T="inner":T="none";const $=d.$el.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),V=n.value;T==="before"?q=$.top-j.top:T==="after"&&(q=$.bottom-j.top),V.style.top=`${q}px`,V.style.left=`${$.right-j.left}px`,T==="inner"?dt(d.$el,o.is("drop-inner")):Ne(d.$el,o.is("drop-inner")),l.value.showDropIndicator=T==="before"||T==="after",l.value.allowDrop=l.value.showDropIndicator||z,l.value.dropType=T,t.emit("node-drag-over",N.node,d.node,u)},treeNodeDragEnd:u=>{const{draggingNode:h,dropType:d,dropNode:y}=l.value;if(u.preventDefault(),u.dataTransfer.dropEffect="move",h&&y){const N={data:h.node.data};d!=="none"&&h.node.remove(),d==="before"?y.node.parent.insertBefore(N,y.node):d==="after"?y.node.parent.insertAfter(N,y.node):d==="inner"&&y.node.insertChild(N),d!=="none"&&s.value.registerNode(N),Ne(y.$el,o.is("drop-inner")),t.emit("node-drag-end",h.node,y.node,d,u),d!=="none"&&t.emit("node-drop",h.node,y.node,d,u)}h&&!y&&t.emit("node-drag-end",h.node,null,d,u),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const Cn=G({name:"ElTreeNode",components:{ElCollapseTransition:vn,ElCheckbox:Ge,NodeContent:kn,ElIcon:$e,Loading:Be},props:{node:{type:te,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(e,t){const a=J("tree"),{broadcastExpanded:n}=at(e),s=ne("RootTree"),o=A(!1),l=A(!1),r=A(null),c=A(null),p=A(null),u=ne(st),h=Fe();oe("NodeInstance",h),e.node.expanded&&(o.value=!0,l.value=!0);const d=s.props.children||"children";W(()=>{const m=e.node.data[d];return m&&[...m]},()=>{e.node.updateChildren()}),W(()=>e.node.indeterminate,m=>{K(e.node.checked,m)}),W(()=>e.node.checked,m=>{K(m,e.node.indeterminate)}),W(()=>e.node.expanded,m=>{le(()=>o.value=m),m&&(l.value=!0)});const y=m=>Ve(s.props.nodeKey,m.data),N=m=>{const $=e.props.class;if(!$)return{};let V;if(De($)){const{data:g}=m;V=$(g,m)}else V=$;return Et(V)?{[V]:!0}:V},K=(m,$)=>{(r.value!==m||c.value!==$)&&s.ctx.emit("check-change",e.node.data,m,$),r.value=m,c.value=$},b=m=>{Te(s.store,s.ctx.emit,()=>s.store.value.setCurrentNode(e.node)),s.currentNode.value=e.node,s.props.expandOnClickNode&&z(),s.props.checkOnClickNode&&!e.node.disabled&&_(null,{target:{checked:!e.node.checked}}),s.ctx.emit("node-click",e.node.data,e.node,h,m)},x=m=>{s.instance.vnode.props.onNodeContextmenu&&(m.stopPropagation(),m.preventDefault()),s.ctx.emit("node-contextmenu",m,e.node.data,e.node,h)},z=()=>{e.node.isLeaf||(o.value?(s.ctx.emit("node-collapse",e.node.data,e.node,h),e.node.collapse()):(e.node.expand(),t.emit("node-expand",e.node.data,e.node,h)))},_=(m,$)=>{e.node.setChecked($.target.checked,!s.props.checkStrictly),le(()=>{const V=s.store.value;s.ctx.emit("check",e.node.data,{checkedNodes:V.getCheckedNodes(),checkedKeys:V.getCheckedKeys(),halfCheckedNodes:V.getHalfCheckedNodes(),halfCheckedKeys:V.getHalfCheckedKeys()})})};return{ns:a,node$:p,tree:s,expanded:o,childNodeRendered:l,oldChecked:r,oldIndeterminate:c,getNodeKey:y,getNodeClass:N,handleSelectChange:K,handleClick:b,handleContextMenu:x,handleExpandIconClick:z,handleCheckChange:_,handleChildNodeExpand:(m,$,V)=>{n($),s.ctx.emit("node-expand",m,$,V)},handleDragStart:m=>{!s.props.draggable||u.treeNodeDragStart({event:m,treeNode:e})},handleDragOver:m=>{m.preventDefault(),s.props.draggable&&u.treeNodeDragOver({event:m,treeNode:{$el:p.value,node:e.node}})},handleDrop:m=>{m.preventDefault()},handleDragEnd:m=>{!s.props.draggable||u.treeNodeDragEnd(m)},CaretRight:it}}}),bn=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],En=["aria-expanded"];function Dn(e,t,a,n,s,o){const l=H("el-icon"),r=H("el-checkbox"),c=H("loading"),p=H("node-content"),u=H("el-tree-node"),h=H("el-collapse-transition");return Se((E(),U("div",{ref:"node$",class:L([e.ns.b("node"),e.ns.is("expanded",e.expanded),e.ns.is("current",e.node.isCurrent),e.ns.is("hidden",!e.node.visible),e.ns.is("focusable",!e.node.disabled),e.ns.is("checked",!e.node.disabled&&e.node.checked),e.getNodeClass(e.node)]),role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.props.draggable,"data-key":e.getNodeKey(e.node),onClick:t[1]||(t[1]=ee((...d)=>e.handleClick&&e.handleClick(...d),["stop"])),onContextmenu:t[2]||(t[2]=(...d)=>e.handleContextMenu&&e.handleContextMenu(...d)),onDragstart:t[3]||(t[3]=ee((...d)=>e.handleDragStart&&e.handleDragStart(...d),["stop"])),onDragover:t[4]||(t[4]=ee((...d)=>e.handleDragOver&&e.handleDragOver(...d),["stop"])),onDragend:t[5]||(t[5]=ee((...d)=>e.handleDragEnd&&e.handleDragEnd(...d),["stop"])),onDrop:t[6]||(t[6]=ee((...d)=>e.handleDrop&&e.handleDrop(...d),["stop"]))},[Y("div",{class:L(e.ns.be("node","content")),style:wt({paddingLeft:(e.node.level-1)*e.tree.props.indent+"px"})},[e.tree.props.icon||e.CaretRight?(E(),O(l,{key:0,class:L([e.ns.be("node","expand-icon"),e.ns.is("leaf",e.node.isLeaf),{expanded:!e.node.isLeaf&&e.expanded}]),onClick:ee(e.handleExpandIconClick,["stop"])},{default:M(()=>[(E(),O(Dt(e.tree.props.icon||e.CaretRight)))]),_:1},8,["class","onClick"])):R("v-if",!0),e.showCheckbox?(E(),O(r,{key:1,"model-value":e.node.checked,indeterminate:e.node.indeterminate,disabled:!!e.node.disabled,onClick:t[0]||(t[0]=ee(()=>{},["stop"])),onChange:e.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):R("v-if",!0),e.node.loading?(E(),O(l,{key:2,class:L([e.ns.be("node","loading-icon"),e.ns.is("loading")])},{default:M(()=>[F(c)]),_:1},8,["class"])):R("v-if",!0),F(p,{node:e.node,"render-content":e.renderContent},null,8,["node","render-content"])],6),F(h,null,{default:M(()=>[!e.renderAfterExpand||e.childNodeRendered?Se((E(),U("div",{key:0,class:L(e.ns.be("node","children")),role:"group","aria-expanded":e.expanded},[(E(!0),U(ie,null,me(e.node.childNodes,d=>(E(),O(u,{key:e.getNodeKey(d),"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:d,accordion:e.accordion,props:e.props,onNodeExpand:e.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,En)),[[Ke,e.expanded]]):R("v-if",!0)]),_:1})],42,bn)),[[Ke,e.node.visible]])}var wn=ae(Cn,[["render",Dn],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function Sn({el$:e},t){const a=J("tree"),n=Me([]),s=Me([]);et(()=>{l()}),St(()=>{n.value=Array.from(e.value.querySelectorAll("[role=treeitem]")),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"))}),W(s,r=>{r.forEach(c=>{c.setAttribute("tabindex","-1")})}),Kt(e,"keydown",r=>{const c=r.target;if(!c.className.includes(a.b("node")))return;const p=r.code;n.value=Array.from(e.value.querySelectorAll(`.${a.is("focusable")}[role=treeitem]`));const u=n.value.indexOf(c);let h;if([Z.up,Z.down].includes(p)){if(r.preventDefault(),p===Z.up){h=u===-1?0:u!==0?u-1:n.value.length-1;const y=h;for(;!t.value.getNode(n.value[h].dataset.key).canFocus;){if(h--,h===y){h=-1;break}h<0&&(h=n.value.length-1)}}else{h=u===-1?0:u<n.value.length-1?u+1:0;const y=h;for(;!t.value.getNode(n.value[h].dataset.key).canFocus;){if(h++,h===y){h=-1;break}h>=n.value.length&&(h=0)}}h!==-1&&n.value[h].focus()}[Z.left,Z.right].includes(p)&&(r.preventDefault(),c.click());const d=c.querySelector('[type="checkbox"]');[Z.enter,Z.space].includes(p)&&d&&(r.preventDefault(),d.click())});const l=()=>{var r;n.value=Array.from(e.value.querySelectorAll(`.${a.is("focusable")}[role=treeitem]`)),s.value=Array.from(e.value.querySelectorAll("input[type=checkbox]"));const c=e.value.querySelectorAll(`.${a.is("checked")}[role=treeitem]`);if(c.length){c[0].setAttribute("tabindex","0");return}(r=n.value[0])==null||r.setAttribute("tabindex","0")}}const Kn=G({name:"ElTree",components:{ElTreeNode:wn},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:ct}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(e,t){const{t:a}=Je(),n=J("tree"),s=A(new mn({key:e.nodeKey,data:e.data,lazy:e.lazy,props:e.props,load:e.load,currentNodeKey:e.currentNodeKey,checkStrictly:e.checkStrictly,checkDescendants:e.checkDescendants,defaultCheckedKeys:e.defaultCheckedKeys,defaultExpandedKeys:e.defaultExpandedKeys,autoExpandParent:e.autoExpandParent,defaultExpandAll:e.defaultExpandAll,filterNodeMethod:e.filterNodeMethod}));s.value.initialize();const o=A(s.value.root),l=A(null),r=A(null),c=A(null),{broadcastExpanded:p}=at(e),{dragState:u}=Nn({props:e,ctx:t,el$:r,dropIndicator$:c,store:s});Sn({el$:r},s);const h=B(()=>{const{childNodes:i}=o.value;return!i||i.length===0||i.every(({visible:C})=>!C)});W(()=>e.currentNodeKey,i=>{s.value.setCurrentNodeKey(i)}),W(()=>e.defaultCheckedKeys,i=>{s.value.setDefaultCheckedKey(i)}),W(()=>e.defaultExpandedKeys,i=>{s.value.setDefaultExpandedKeys(i)}),W(()=>e.data,i=>{s.value.setData(i)},{deep:!0}),W(()=>e.checkStrictly,i=>{s.value.checkStrictly=i});const d=i=>{if(!e.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");s.value.filter(i)},y=i=>Ve(e.nodeKey,i.data),N=i=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const C=s.value.getNode(i);if(!C)return[];const I=[C.data];let X=C.parent;for(;X&&X!==o.value;)I.push(X.data),X=X.parent;return I.reverse()},K=(i,C)=>s.value.getCheckedNodes(i,C),b=i=>s.value.getCheckedKeys(i),x=()=>{const i=s.value.getCurrentNode();return i?i.data:null},z=()=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const i=x();return i?i[e.nodeKey]:null},_=(i,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");s.value.setCheckedNodes(i,C)},j=(i,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");s.value.setCheckedKeys(i,C)},T=(i,C,I)=>{s.value.setChecked(i,C,I)},w=()=>s.value.getHalfCheckedNodes(),P=()=>s.value.getHalfCheckedKeys(),q=(i,C=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");Te(s,t.emit,()=>s.value.setUserCurrentNode(i,C))},m=(i,C=!0)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");Te(s,t.emit,()=>s.value.setCurrentNodeKey(i,C))},$=i=>s.value.getNode(i),V=i=>{s.value.remove(i)},g=(i,C)=>{s.value.append(i,C)},f=(i,C)=>{s.value.insertBefore(i,C)},v=(i,C)=>{s.value.insertAfter(i,C)},k=(i,C,I)=>{p(C),t.emit("node-expand",i,C,I)},S=(i,C)=>{if(!e.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");s.value.updateChildren(i,C)};return oe("RootTree",{ctx:t,props:e,store:s,root:o,currentNode:l,instance:Fe()}),oe(ut,void 0),{ns:n,store:s,root:o,currentNode:l,dragState:u,el$:r,dropIndicator$:c,isEmpty:h,filter:d,getNodeKey:y,getNodePath:N,getCheckedNodes:K,getCheckedKeys:b,getCurrentNode:x,getCurrentKey:z,setCheckedNodes:_,setCheckedKeys:j,setChecked:T,getHalfCheckedNodes:w,getHalfCheckedKeys:P,setCurrentNode:q,setCurrentKey:m,t:a,getNode:$,remove:V,append:g,insertBefore:f,insertAfter:v,handleNodeExpand:k,updateKeyChildren:S}}});function An(e,t,a,n,s,o){var l;const r=H("el-tree-node");return E(),U("div",{ref:"el$",class:L([e.ns.b(),e.ns.is("dragging",!!e.dragState.draggingNode),e.ns.is("drop-not-allow",!e.dragState.allowDrop),e.ns.is("drop-inner",e.dragState.dropType==="inner"),{[e.ns.m("highlight-current")]:e.highlightCurrent}]),role:"tree"},[(E(!0),U(ie,null,me(e.root.childNodes,c=>(E(),O(r,{key:e.getNodeKey(c),node:c,props:e.props,accordion:e.accordion,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,"render-content":e.renderContent,onNodeExpand:e.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),e.isEmpty?(E(),U("div",{key:0,class:L(e.ns.e("empty-block"))},[Y("span",{class:L(e.ns.e("empty-text"))},ge((l=e.emptyText)!=null?l:e.t("el.tree.emptyText")),3)],2)):R("v-if",!0),Se(Y("div",{ref:"dropIndicator$",class:L(e.ns.e("drop-indicator"))},null,2),[[Ke,e.dragState.showDropIndicator]])],2)}var ve=ae(Kn,[["render",An],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);ve.install=e=>{e.component(ve.name,ve)};const Tn=ve,xn=Tn,Ze=[{value:"guide",label:"Guide",children:[{value:"disciplines",label:"Disciplines",children:[{value:"consistency",label:"Consistency"},{value:"feedback",label:"Feedback"},{value:"efficiency",label:"Efficiency"},{value:"controllability",label:"Controllability"}]},{value:"navigation",label:"Navigation",children:[{value:"side nav",label:"Side Navigation"},{value:"top nav",label:"Top Navigation"}]}]},{value:"component",label:"Component",children:[{value:"basic",label:"Basic",children:[{value:"layout",label:"Layout"},{value:"color",label:"Color"},{value:"typography",label:"Typography"},{value:"icon",label:"Icon"},{value:"button",label:"Button"}]},{value:"notice",label:"Notice",children:[{value:"alert",label:"Alert"},{value:"loading",label:"Loading"},{value:"message",label:"Message"},{value:"message-box",label:"MessageBox"},{value:"notification",label:"Notification"}]}]}],$n=G({__name:"index",props:{name:{type:String,default:""},width:{type:String,default:"202px"},placeholder:{type:String,default:"\u8BF7\u9009\u62E9"},loadingText:{type:String,default:"\u52A0\u8F7D\u4E2D"},emptyText:{type:String,default:"\u5C1A\u672A\u9009\u62E9"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:{type:[String,Number,Array],required:!0},options:{type:[Array,Function],default:()=>[]},props:{type:Object,default:()=>{}},expires:{type:[Date,Number],default:60*60*2}},emits:["update:modelValue","change","init"],setup(e,{emit:t}){const a=e;xt(f=>({aac69d58:e.width}));const[n,s]=Oe(),[o,l]=Oe(),r=A(!1),c=A(),p=$t(()=>!r.value&&!a.disabled&&s(),300),u=B(()=>({label:"label",value:"value",children:"children",multiple:a.multiple,emitPath:!1,...a.props})),h=B(()=>({label:u.value.label,value:u.value.value,children:u.value.children,disabled:""})),d=B({get:()=>a.modelValue,set:f=>t("update:modelValue",f)}),y=B(()=>Array.isArray(a.options)?a.options:c.value||[]),N=B(()=>r.value?a.loadingText:a.placeholder),K=B({get(){let f=a.modelValue;a.multiple&&(f=ht(a,"modelValue[0]")||[]);const k=Bt.getPath(y.value,S=>S[u.value.value]===f).map(S=>S[u.value.label]);if(a.multiple){if(!k||k.length===0||!Array.isArray(a.modelValue))return;const S=[...a.modelValue];return S[0]=k.join(" / "),S}return k.join(" / ")},set(){}}),b=Ft(),x=B(()=>({[b["is-active"]]:n.value})),z=A(),_=A();At(_,f=>{let v=f.target,k=!1;do k=v.classList.contains(b.select),v=v.parentNode;while(k===!1&&v.nodeName!=="BODY");!k&&s(!1)});const j=A(),T=()=>le(()=>{var f,v;(v=(f=j.value)==null?void 0:f.popperRef)==null||v.popperInstanceRef.update()}),w=(f,v)=>f?f.includes(v[u.value.value]):!0,P=A(),q=f=>{le(()=>{var v;return(v=P.value)==null?void 0:v.filter(f)}),T()},m=A(),$=f=>{var k;const v=(k=m.value)==null?void 0:k.getCheckedNodes(!0);t("change",f,v),a.multiple?q(f):s()},V=()=>{t("update:modelValue",a.multiple?[]:""),a.multiple&&q([])};W(n,f=>{f&&a.multiple&&q(a.modelValue||"")});const g=async()=>{if(Array.isArray(a.options))return;const f=`tree-picker-${a.name}`;if(a.name){const v=qe.get(f);if(v){c.value=v,t("init",v);return}}r.value=!0;try{c.value=await a.options(),a.name&&qe.set(f,c.value,{expires:a.expires}),t("init",c.value)}finally{r.value=!1}};return Tt(()=>g()),(f,v)=>(E(),O(D(Ot),{ref_key:"myPopover",ref:j,visible:D(n),placement:"bottom","popper-class":D(b).popover,onBeforeEnter:v[2]||(v[2]=()=>D(l)()),onAfterLeave:v[3]||(v[3]=()=>D(l)())},{reference:M(()=>[F(D(Vt),{ref_key:"mySelect",ref:z,modelValue:D(K),"onUpdate:modelValue":v[1]||(v[1]=k=>_e(K)?K.value=k:null),placeholder:D(N),"collapse-tags":"",clearable:"",disabled:r.value||e.disabled,multiple:e.multiple,class:L([D(x),D(b).select]),"popper-class":D(b)["popover-select"],onClick:D(p),onClear:V},null,8,["modelValue","placeholder","disabled","multiple","class","popper-class","onClick"])]),default:M(()=>[Y("div",{ref_key:"myWrapper",ref:_,class:L(D(b).wrapper)},[e.multiple?(E(),U("div",{key:0,class:L(D(b).selected)},[F(D(Xe),null,{default:M(()=>[F(D(xn),{ref_key:"myTree",ref:P,"default-expand-all":"",data:D(y),"node-key":D(u).value,props:D(h),"filter-node-method":w,"empty-text":e.emptyText},null,8,["data","node-key","props","empty-text"])]),_:1})],2)):R("v-if",!0),D(o)?(E(),O(D(hn),tt({key:1,ref_key:"myCascader",ref:m,modelValue:D(d),"onUpdate:modelValue":v[0]||(v[0]=k=>_e(d)?d.value=k:null),props:D(u),options:D(y)},f.$attrs,{onExpandChange:T,onChange:$}),null,16,["modelValue","props","options"])):R("v-if",!0)],2)]),_:1},8,["visible","popper-class"]))}}),Bn="_popover_1b2o8_1",Fn="_wrapper_1b2o8_6",Ln="_select_1b2o8_13",Vn="_selected_1b2o8_27",Pn={popover:Bn,wrapper:Fn,select:Ln,"is-active":"_is-active_1b2o8_20",selected:Vn,"popover-select":"_popover-select_1b2o8_50"},In={$style:Pn},Ye=ke($n,[["__cssModules",In],["__file","index.vue"]]),Mn=G({__name:"example",setup(e){const t=A(""),a=A(!1),n=A(!0),s=r=>{t.value=r?[]:""},o=()=>new Promise(r=>{setTimeout(()=>r(Ze),3e3)}),l=()=>{n.value=!1,le(()=>{n.value=!0})};return(r,c)=>(E(),O(pt,null,{default:M(()=>[F(D(ce),{label:"\u5C55\u793A\u533A\uFF1A\u540C\u6B65"},{default:M(()=>[F(Ye,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=p=>t.value=p),options:D(Ze),multiple:a.value,width:"300px"},null,8,["modelValue","options","multiple"])]),_:1}),F(D(ce),{label:"\u5C55\u793A\u533A\uFF1A\u5F02\u6B65"},{default:M(()=>[F(D(_t),null,{default:M(()=>[n.value?(E(),O(Ye,{key:0,modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=p=>t.value=p),options:o,multiple:a.value,width:"300px"},null,8,["modelValue","multiple"])):R("v-if",!0),F(D(qt),{onClick:l},{default:M(()=>[ye("\u91CD\u65B0\u52A0\u8F7D")]),_:1})]),_:1})]),_:1}),F(D(ce),{label:"\u53C2\u6570\uFF1A\u5355/\u591A\u9009"},{default:M(()=>[F(D(Ht),{modelValue:a.value,"onUpdate:modelValue":c[2]||(c[2]=p=>a.value=p),"active-text":"\u591A\u9009","inactive-text":"\u5355\u9009","active-value":!0,"inactive-value":!1,onChange:s},null,8,["modelValue"])]),_:1}),F(D(ce),{label:"\u7ED3\u679C"},{default:M(()=>[Y("span",null,ge(t.value),1)]),_:1})]),_:1}))}}),On=ke(Mn,[["__file","example.vue"]]),_n=G({__name:"usage",setup(e){const t={params:[{param:"*v-model",description:"\u7ED1\u5B9A\u503C",type:"Value | Value[]",defaultValue:"-"},{param:"*multiple",description:"\u662F\u5426\u591A\u9009",type:"boolean",defaultValue:"false"},{param:"*options",description:"\u6811\u5F62\u7ED3\u6784\u6570\u636E\uFF0C\u53C2\u8003 el-cascader \uFF0C\u53EF\u4EE5\u662F Promise \u6570\u636E",type:"ITreeOption | (() => Promise<ITreeOption>)",defaultValue:"[]"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascader-%E5%B1%9E%E6%80%A7",defaultValue:"-"},{param:"placeholder",description:"placeholder",type:"string",defaultValue:"\u8BF7\u9009\u62E9"},{param:"loadingText",description:"\u52A0\u8F7D\u5F02\u6B65\u6570\u636E\u65F6\u7684\u6587\u672C",type:"string",defaultValue:"\u52A0\u8F7D\u4E2D"},{param:"emptyText",description:"\u590D\u9009\u672A\u9009\u62E9\u65F6\uFF0C\u5DF2\u9009\u6570\u636E\u9762\u677F\u5C55\u793A\u7684\u6587\u6848",type:"string",defaultValue:"\u5C1A\u672A\u9009\u62E9"},{param:"name",description:"\u4F7F\u7528 localStorage \u7F13\u5B58\u65F6\u7684 key\uFF0C\u7A7A\u4E0D\u7F13\u5B58",type:"string",defaultValue:""},{param:"expires",description:"\u5BF9\u6570\u636E\u8FDB\u884C localStorage \u7F13\u5B58\uFF0C\u6307\u5B9A\u65E5\u671F\u5230\u671F\u6216\u8005 X \u79D2\u540E\u5931\u6548\u3002\u4E0D\u7F13\u5B58\u8BBE\u7F6E\u4E3A 0",type:"Date | number",defaultValue:"7200"},{param:"\u5176\u4ED6",description:"el-cascader \u7684\u5C5E\u6027\u3001\u4E8B\u4EF6",type:"-",defaultValue:"-"}],types:[{param:"Value",description:"string | number | boolean"},{param:"ITreeOption",description:"{label: string, value: Value, children: ITreeOption[], ...\u5176\u4ED6}"}],events:[{name:"init",description:"options \u4E3A\u5F02\u6B65\u65F6\uFF0C\u52A0\u8F7D\u5B8C\u6210\u7684\u56DE\u8C03",param:"options"},{name:"change",description:"\u9009\u62E9\u53D8\u5316\u65F6\u7684\u89E6\u53D1",param:"value, node"}]};return(a,n)=>(E(),O(ft,{data:t}))}}),qn=ke(_n,[["__file","usage.vue"]]),Hn=Y("h2",{id:"\u529F\u80FD",tabindex:"-1"},[Y("a",{class:"header-anchor",href:"#\u529F\u80FD","aria-hidden":"true"},"#"),ye(" \u529F\u80FD")],-1),zn=Y("p",null,"\u7528\u4E8E\u6811\u5F62\u6570\u636E\u7684\u9009\u62E9\uFF0C\u5229\u7528Select\u3001Cascader\u3001Popover\u8FDB\u884C\u6269\u5C55\uFF0C\u589E\u5F3A\u591A\u9009\u529F\u80FD\u3002",-1),jn=Y("p",null,"\u4E0D\u540C\u4E8E\u5B98\u65B9\u7684 Cascader\uFF0C\u5728\u591A\u9009\u7ED3\u679C\u5C55\u793A\u65F6\u4F7F\u7528\u5355\u72EC\u7684\u9762\u677F\u5C55\u793A\u6811\u5F62\u9009\u62E9\u7ED3\u679C\u3002",-1),Un=Y("h2",{id:"\u529F\u80FD\u793A\u4F8B",tabindex:"-1"},[Y("a",{class:"header-anchor",href:"#\u529F\u80FD\u793A\u4F8B","aria-hidden":"true"},"#"),ye(" \u529F\u80FD\u793A\u4F8B")],-1),Rn=Lt(`<h2 id="\u6700\u5C0F\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u6700\u5C0F\u793A\u4F8B" aria-hidden="true">#</a> \u6700\u5C0F\u793A\u4F8B</h2><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTreePicker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Wrapper <span class="token keyword">from</span> <span class="token string">&#39;@/components/simple-wrapper.vue&#39;</span>
<span class="token keyword">import</span> treeData <span class="token keyword">from</span> <span class="token string">&#39;./data&#39;</span>
<span class="token keyword">import</span> HTreePicker <span class="token keyword">from</span> <span class="token string">&#39;../index.vue&#39;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2>`,3),Wn={__name:"tree-picker.html",setup(e){return(t,a)=>(E(),U("div",null,[Hn,zn,jn,Un,F(On),Rn,F(qn)]))}},ua=ke(Wn,[["__file","tree-picker.html.vue"]]);export{ua as default};
