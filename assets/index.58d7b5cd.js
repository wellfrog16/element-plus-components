import{I as Be,ak as He,K as ke,D as Ve,aG as De,s as Te,H as se,aH as Re,N as _,a0 as Y,f as le,d as M,P as J,ah as Fe,B as $,g as H,a1 as Ne,ag as Ye,r as V,o as v,h as b,w as y,V as ee,W as ne,a as w,X as d,Y as ue,af as W,c as Z,a3 as q,a4 as B,t as N,aq as G,b as oe,Z as je,q as Se,z as Ie,aI as $e,x as ce,p as Ke,G as de,O as fe,A as me,aJ as pe,u as p,Q as Ue,_ as Xe}from"./app.a3d32ab8.js";import{H as ve}from"./index.f2789887.js";import{E as Oe}from"./index.7c411af2.js";import{E as We}from"./index.42a1bc38.js";import{E as qe}from"./index.b7a0dde8.js";import{F as ge,J as Ge,j as Le,ag as ye,g as Ze,c as Je,r as Qe,Z as xe,d as _e,B as be,P as te,as as en,G as nn,av as on,aw as he,k as Ce,_ as tn,X as sn,ax as Ee}from"./document.e6cb366c.js";import{o as we}from"./aria.ff564609.js";import{i as an}from"./validator.76855ab4.js";import{u as ln}from"./use-global-config.ba6948b7.js";import{g as rn}from"./scroll.8f620859.js";const un=(e,n,t)=>{let s={offsetX:0,offsetY:0};const l=u=>{const f=u.clientX,o=u.clientY,{offsetX:g,offsetY:h}=s,i=e.value.getBoundingClientRect(),L=i.left,A=i.top,C=i.width,m=i.height,E=document.documentElement.clientWidth,P=document.documentElement.clientHeight,K=-L+g,Q=-A+h,x=E-L-C+g,S=P-A-m+h,R=X=>{const I=Math.min(Math.max(g+X.clientX-f,K),x),F=Math.min(Math.max(h+X.clientY-o,Q),S);s={offsetX:I,offsetY:F},e.value&&(e.value.style.transform=`translate(${ge(I)}, ${ge(F)})`)},U=()=>{document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",R),document.addEventListener("mouseup",U)},a=()=>{n.value&&e.value&&n.value.addEventListener("mousedown",l)},r=()=>{n.value&&e.value&&n.value.removeEventListener("mousedown",l)};Be(()=>{He(()=>{t.value?a():r()})}),ke(()=>{r()})},cn=(e,n={})=>{Ve(e)||Ge("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||Le("popup"),s=De(()=>t.bm("parent","hidden"));if(!Te||ye(document.body,s.value))return;let l=0,a=!1,r="0";const u=()=>{setTimeout(()=>{Qe(document==null?void 0:document.body,s.value),a&&document&&(document.body.style.width=r)},200)};se(e,f=>{if(!f){u();return}a=!ye(document.body,s.value),a&&(r=document.body.style.width),l=rn(t.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,g=Ze(document.body,"overflowY");l>0&&(o||g==="scroll")&&a&&(document.body.style.width=`calc(100% - ${l}px)`),Je(document.body,s.value)}),Re(()=>u())},Ae=e=>{if(!e)return{onClick:_,onMousedown:_,onMouseup:_};let n=!1,t=!1;return{onClick:r=>{n&&t&&e(r),n=t=!1},onMousedown:r=>{n=r.target===r.currentTarget},onMouseup:r=>{t=r.target===r.currentTarget}}},ae="_trap-focus-children",O=[],Me=e=>{if(O.length===0)return;const n=O[O.length-1][ae];if(n.length>0&&e.code===xe.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const t=e.shiftKey,s=e.target===n[0],l=e.target===n[n.length-1];s&&t&&(e.preventDefault(),n[n.length-1].focus()),l&&!t&&(e.preventDefault(),n[0].focus())}},dn={beforeMount(e){e[ae]=we(e),O.push(e),O.length<=1&&document.addEventListener("keydown",Me)},updated(e){Y(()=>{e[ae]=we(e)})},unmounted(){O.shift(),O.length===0&&document.removeEventListener("keydown",Me)}},fn=_e({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:be([String,Array,Object])},zIndex:{type:be([String,Number])}}),mn={click:e=>e instanceof MouseEvent},pn="overlay";var vn=le({name:"ElOverlay",props:fn,emits:mn,setup(e,{slots:n,emit:t}){const s=Le(pn),l=f=>{t("click",f)},{onClick:a,onMousedown:r,onMouseup:u}=Ae(e.customMaskEvent?void 0:l);return()=>e.mask?M("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:a,onMousedown:r,onMouseup:u},[J(n,"default")],te.STYLE|te.CLASS|te.PROPS,["onClick","onMouseup","onMousedown"]):Fe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[J(n,"default")])}});const gn=vn,yn=le({name:"ElMessageBox",directives:{TrapFocus:dn},components:{ElButton:Oe,ElFocusTrap:en,ElInput:qe,ElOverlay:gn,ElIcon:nn,...on},inheritAttrs:!1,props:{buttonSize:{type:String,validator:an},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:t,zIndex:s,ns:l,size:a}=ln("message-box",$(()=>e.buttonSize)),{t:r}=t,{nextZIndex:u}=s,f=H(!1),o=Ne({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:u()}),g=$(()=>{const c=o.type;return{[l.bm("icon",c)]:c&&he[c]}}),h=Ce(),i=Ce(),L=$(()=>o.icon||he[o.type]||""),A=$(()=>!!o.message),C=H(),m=H(),E=H(),P=H(),K=H(),Q=$(()=>o.confirmButtonClass);se(()=>o.inputValue,async c=>{await Y(),e.boxType==="prompt"&&c!==null&&F()},{immediate:!0}),se(()=>f.value,c=>{var k,z;c&&(e.boxType!=="prompt"&&(o.autofocus?E.value=(z=(k=K.value)==null?void 0:k.$el)!=null?z:C.value:E.value=C.value),o.zIndex=u()),e.boxType==="prompt"&&(c?Y().then(()=>{var ie;P.value&&P.value.$el&&(o.autofocus?E.value=(ie=Pe())!=null?ie:C.value:E.value=C.value)}):(o.editorErrorMessage="",o.validateError=!1))});const x=$(()=>e.draggable);un(C,m,x),Be(async()=>{await Y(),e.closeOnHashChange&&window.addEventListener("hashchange",S)}),ke(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",S)});function S(){!f.value||(f.value=!1,Y(()=>{o.action&&n("action",o.action)}))}const R=()=>{e.closeOnClickModal&&I(o.distinguishCancelAndClose?"close":"cancel")},U=Ae(R),X=c=>{if(o.inputType!=="textarea")return c.preventDefault(),I("confirm")},I=c=>{var k;e.boxType==="prompt"&&c==="confirm"&&!F()||(o.action=c,o.beforeClose?(k=o.beforeClose)==null||k.call(o,c,o,S):S())},F=()=>{if(e.boxType==="prompt"){const c=o.inputPattern;if(c&&!c.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||r("el.messagebox.error"),o.validateError=!0,!1;const k=o.inputValidator;if(typeof k=="function"){const z=k(o.inputValue);if(z===!1)return o.editorErrorMessage=o.inputErrorMessage||r("el.messagebox.error"),o.validateError=!0,!1;if(typeof z=="string")return o.editorErrorMessage=z,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},Pe=()=>{const c=P.value.$refs;return c.input||c.textarea},re=()=>{I("close")},ze=()=>{e.closeOnPressEscape&&re()};return e.lockScroll&&cn(f),{...Ye(o),ns:l,overlayEvent:U,visible:f,hasMessage:A,typeClass:g,contentId:h,inputId:i,btnSize:a,iconComponent:L,confirmButtonClasses:Q,rootRef:C,focusStartRef:E,headerRef:m,inputRef:P,confirmRef:K,doClose:S,handleClose:re,onCloseRequested:ze,handleWrapperClick:R,handleInputEnter:X,handleAction:I,t:r}}}),bn=["aria-label","aria-describedby"],hn=["aria-label"],Cn=["id"];function En(e,n,t,s,l,a){const r=V("el-icon"),u=V("close"),f=V("el-input"),o=V("el-button"),g=V("el-focus-trap"),h=V("el-overlay");return v(),b(je,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=i=>e.$emit("vanish")),persisted:""},{default:y(()=>[ee(M(h,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:y(()=>[w("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:d(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...i)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...i)),onMousedown:n[9]||(n[9]=(...i)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...i)),onMouseup:n[10]||(n[10]=(...i)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...i))},[M(g,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:y(()=>[w("div",{ref:"rootRef",class:d([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:ue(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=W(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(v(),Z("div",{key:0,ref:"headerRef",class:d(e.ns.e("header"))},[w("div",{class:d(e.ns.e("title"))},[e.iconComponent&&e.center?(v(),b(r,{key:0,class:d([e.ns.e("status"),e.typeClass])},{default:y(()=>[(v(),b(q(e.iconComponent)))]),_:1},8,["class"])):B("v-if",!0),w("span",null,N(e.title),1)],2),e.showClose?(v(),Z("button",{key:0,type:"button",class:d(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=G(W(i=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[M(r,{class:d(e.ns.e("close"))},{default:y(()=>[M(u)]),_:1},8,["class"])],42,hn)):B("v-if",!0)],2)):B("v-if",!0),w("div",{id:e.contentId,class:d(e.ns.e("content"))},[w("div",{class:d(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(v(),b(r,{key:0,class:d([e.ns.e("status"),e.typeClass])},{default:y(()=>[(v(),b(q(e.iconComponent)))]),_:1},8,["class"])):B("v-if",!0),e.hasMessage?(v(),Z("div",{key:1,class:d(e.ns.e("message"))},[J(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(v(),b(q(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(v(),b(q(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:y(()=>[oe(N(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):B("v-if",!0)],2),ee(w("div",{class:d(e.ns.e("input"))},[M(f,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=i=>e.inputValue=i),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:d({invalid:e.validateError}),onKeydown:G(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),w("div",{class:d(e.ns.e("errormsg")),style:ue({visibility:e.editorErrorMessage?"visible":"hidden"})},N(e.editorErrorMessage),7)],2),[[ne,e.showInput]])],10,Cn),w("div",{class:d(e.ns.e("btns"))},[e.showCancelButton?(v(),b(o,{key:0,loading:e.cancelButtonLoading,class:d([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=i=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=G(W(i=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:y(()=>[oe(N(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):B("v-if",!0),ee(M(o,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:d([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=i=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=G(W(i=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:y(()=>[oe(N(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[ne,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,bn)]),_:3},8,["z-index","overlay-class","mask"]),[[ne,e.visible]])]),_:3})}var wn=tn(yn,[["render",En],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const j=new Map,Mn=e=>{let n=document.body;return e.appendTo&&(Se(e.appendTo)&&(n=document.querySelector(e.appendTo)),Ee(e.appendTo)&&(n=e.appendTo),Ee(n)||(n=document.body)),n},Bn=(e,n,t=null)=>{const s=M(wn,e,de(e.message)||Ie(e.message)?{default:de(e.message)?e.message:()=>e.message}:null);return s.appContext=t,$e(s,n),Mn(e).appendChild(n.firstElementChild),s.component},kn=()=>document.createElement("div"),Tn=(e,n)=>{const t=kn();e.onVanish=()=>{$e(null,t),j.delete(l)},e.onAction=a=>{const r=j.get(l);let u;e.showInput?u={value:l.inputValue,action:a}:u=a,e.callback?e.callback(u,s.proxy):a==="cancel"||a==="close"?e.distinguishCancelAndClose&&a!=="cancel"?r.reject("close"):r.reject("cancel"):r.resolve(u)};const s=Bn(e,t,n),l=s.proxy;for(const a in e)ce(e,a)&&!ce(l.$props,a)&&(l[a]=e[a]);return l.visible=!0,l};function D(e,n=null){if(!Te)return Promise.reject();let t;return Se(e)||Ie(e)?e={message:e}:t=e.callback,new Promise((s,l)=>{const a=Tn(e,n!=null?n:D._context);j.set(a,{options:e,callback:t,resolve:s,reject:l})})}const Sn=["alert","confirm","prompt"],In={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Sn.forEach(e=>{D[e]=$n(e)});function $n(e){return(n,t,s,l)=>{let a="";return Ke(t)?(s=t,a=""):sn(t)?a="":a=t,D(Object.assign({title:a,message:n,type:"",...In[e]},s,{boxType:e}),l)}}D.close=()=>{j.forEach((e,n)=>{n.doClose()}),j.clear()};D._context=null;const T=D;T.install=e=>{T._context=e._context,e.config.globalProperties.$msgbox=T,e.config.globalProperties.$messageBox=T,e.config.globalProperties.$alert=T.alert,e.config.globalProperties.$confirm=T.confirm,e.config.globalProperties.$prompt=T.prompt};const On=T;function Jn(e,n){const t={};return Object.keys(n).forEach(s=>{const l=Symbol(s);t[s]=l,fe(l,n[s])}),fe(e,t),t}function Ln(e){const n=me(e,{}),t={};return Object.keys(n).forEach(s=>{t[s]=me(n[s])}),t}const Qn={button:{type:Object}},An=Symbol("VCConfig"),Pn=()=>Ln(An),zn={key:1},Hn=le({__name:"index",props:{icon:null,time:{default:800},type:{default:""},confirm:{default:void 0},confirmInfo:null},emits:["click"],setup(e,{emit:n}){const t=e,{button:s}=Pn(),l={title:"\u63D0\u793A",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",msg:"\u786E\u8BA4\u8981\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417\uFF1F"},a=$(()=>(s==null?void 0:s.confirm)!==void 0?s==null?void 0:s.confirm:t.confirm!==void 0?t.confirm:["danger","warning"].includes(t.type)?"messagebox":void 0),{name:r,type:u="el",position:f="left"}=t.icon||{},{msg:o,title:g,confirmButtonText:h,cancelButtonText:i}={...l,...s==null?void 0:s.confirmInfo,...t.confirmInfo},L=async()=>{try{return await On.confirm(o,g,{confirmButtonText:h,cancelButtonText:i,type:"warning",dangerouslyUseHTMLString:!0})}catch{return!1}},A=pe(async m=>{if(console.log(a.value),a.value==="messagebox"){await L()&&n("click",m);return}a.value!=="popconfirm"&&n("click",m)},t.time),C=pe(async m=>{n("click",m)},t.time);return(m,E)=>(v(),b(p(We),{title:p(o),"confirm-button-text":p(h),"cancel-button-text":p(i),disabled:p(a)!=="popconfirm","popper-class":`${m.$style.popper} el-popover`,onConfirm:p(C)},{reference:y(()=>[M(p(Oe),Ue(m.$attrs,{type:e.type,class:m.$style.button,onClick:p(A)}),{default:y(()=>[p(f)==="left"&&p(r)?(v(),b(ve,{key:0,type:p(u),name:p(r)},null,8,["type","name"])):B("v-if",!0),m.$slots.default?(v(),Z("span",zn,[J(m.$slots,"default")])):B("v-if",!0),p(f)==="right"&&p(r)?(v(),b(ve,{key:2,type:p(u),name:p(r)},null,8,["type","name"])):B("v-if",!0)]),_:3},16,["type","class","onClick"])]),_:3},8,["title","confirm-button-text","cancel-button-text","disabled","popper-class","onConfirm"]))}}),Vn="_button_1dzv7_1",Dn="_popper_1dzv7_5",Rn={button:Vn,popper:Dn},Fn={$style:Rn},xn=Xe(Hn,[["__cssModules",Fn],["__file","index.vue"]]);export{gn as E,xn as H,An as K,Ae as a,cn as b,Jn as c,Qn as p,un as u};
