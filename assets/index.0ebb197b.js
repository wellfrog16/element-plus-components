import{q as E,v as W,u as L,aa as C,g as z,d as I,r as N,e as D,p as x,P as f}from"./document.119ae42e.js";import{E as $,am as A,O as U,J as j,aL as q,l as F,G,aM as J,N as v,f as V,d as K,R as k,ai as Q}from"./app.8c8a4a35.js";import{g as Z}from"./scroll.16fc5126.js";const ae=(e,o,n)=>{let a={offsetX:0,offsetY:0};const s=l=>{const u=l.clientX,i=l.clientY,{offsetX:r,offsetY:m}=a,d=e.value.getBoundingClientRect(),p=d.left,y=d.top,S=d.width,T=d.height,Y=document.documentElement.clientWidth,O=document.documentElement.clientHeight,P=-p+r,H=-y+m,X=Y-p-S+r,B=O-y-T+m,h=M=>{const b=Math.min(Math.max(r+M.clientX-u,P),X),w=Math.min(Math.max(m+M.clientY-i,H),B);a={offsetX:b,offsetY:w},e.value.style.transform=`translate(${E(b)}, ${E(w)})`},g=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)},c=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",s)},t=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",s)};$(()=>{A(()=>{n.value?c():t()})}),U(()=>{t()})},ce=e=>{j(e)||W("[useLockscreen]","You need to pass a ref param to this function");const o=L("popup"),n=q(()=>o.bm("parent","hidden"));if(!F||C(document.body,n.value))return;let a=0,s=!1,c="0";const t=()=>{setTimeout(()=>{N(document.body,n.value),s&&(document.body.style.width=c)},200)};G(e,l=>{if(!l){t();return}s=!C(document.body,n.value),s&&(c=document.body.style.width),a=Z(o.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,i=z(document.body,"overflowY");a>0&&(u||i==="scroll")&&s&&(document.body.style.width=`calc(100% - ${a}px)`),I(document.body,n.value)}),J(()=>t())},_=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},R=D({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),ee={click:e=>e instanceof MouseEvent};var te=V({name:"ElOverlay",props:R,emits:ee,setup(e,{slots:o,emit:n}){const a=L("overlay"),s=u=>{n("click",u)},{onClick:c,onMousedown:t,onMouseup:l}=_(e.customMaskEvent?void 0:s);return()=>e.mask?K("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:t,onMouseup:l},[k(o,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const le=te;export{le as E,_ as a,ce as b,ae as u};
