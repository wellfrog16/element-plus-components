import{b5 as lt,j as J,al as et,G as Le,aD as dt,H as Ve,aj as rt,_ as ae,a2 as tt,q as nt,k as it,aa as Ee,T as ut,N as re,d as ct,B as Ne,U as He,C as _e,Y,r as Ce,c as ht,b6 as pt,A as ft,b3 as vt,R as gt,E as ue,W as mt,D as yt}from"./document.d036075a.js";import{f as G,ah as De,A as ne,B as $,r as q,o as E,c as U,a4 as R,h as O,af as ee,w as M,d as L,X as P,F as ie,a as Z,g as S,ai as me,b as ye,t as ge,E as Pe,G as we,N as kt,O as oe,a1 as Ae,H as W,bo as Nt,I as at,a0 as le,s as Ct,P as Ie,Q as Ke,bE as bt,u as w,Z as Et,x as Se,p as Dt,q as wt,V as Te,W as Fe,a3 as At,Y as Kt,J as qe,a2 as St,U as Tt,aG as ze,a9 as Ft,M as xt,D as je,aJ as $t,c3 as Bt,aB as Lt,an as Ue,_ as ke,e as Vt}from"./app.102c0a36.js";import{H as Pt}from"./index.f9b387cb.js";import{b as It}from"./index.836239a1.js";import{c as Re}from"./index.b5ae739a.js";import{i as Mt,f as be,g as Ot}from"./aria.ff564609.js";import{u as We,c as Ye}from"./arrays.6dddb988.js";import{s as Ht}from"./scroll.f90ea8e5.js";import{c as _t}from"./cloneDeep.22d6723e.js";import{E as qt}from"./index.55a89a28.js";import{E as zt}from"./index.e3572f1a.js";import{E as jt}from"./index.fc2d6e7a.js";import{E as Ut}from"./index.3a083011.js";import"./useChoice.ca9a39c6.js";import"./index.d406c765.js";import"./index.44497a28.js";import"./index.72cd2e75.js";import"./index.03f8fb2b.js";import"./_baseClone.f04ed4c8.js";import"./use-global-config.e2ea1b91.js";import"./validator.8b0da09f.js";var Rt=1/0;function Wt(t){var e=t==null?0:t.length;return e?lt(t,Rt):[]}var Yt=G({name:"NodeContent",setup(){return{ns:J("cascader-node")}},render(){const{ns:t}=this,{node:e,panel:a}=this.$parent,{data:s,label:n}=e,{renderLabelFn:o}=a;return De("span",{class:t.e("label")},o?o({node:e,data:s}):n)}});const Me=Symbol(),Zt=G({name:"ElCascaderNode",components:{ElCheckbox:et,ElRadio:It,NodeContent:Yt,ElIcon:Le,Check:dt,Loading:Ve,ArrowRight:rt},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(t,{emit:e}){const a=ne(Me),s=J("cascader-node"),n=$(()=>a.isHoverMenu),o=$(()=>a.config.multiple),l=$(()=>a.config.checkStrictly),d=$(()=>{var A;return(A=a.checkedNodes[0])==null?void 0:A.uid}),i=$(()=>t.node.isDisabled),f=$(()=>t.node.isLeaf),r=$(()=>l.value&&!f.value||!i.value),h=$(()=>m(a.expandingNode)),u=$(()=>l.value&&a.checkedNodes.some(m)),m=A=>{var I;const{level:_,uid:y}=t.node;return((I=A==null?void 0:A.pathNodes[_-1])==null?void 0:I.uid)===y},N=()=>{h.value||a.expandNode(t.node)},K=A=>{const{node:I}=t;A!==I.checked&&a.handleCheckChange(I,A)},b=()=>{a.lazyLoad(t.node,()=>{f.value||N()})},F=A=>{!n.value||(z(),!f.value&&e("expand",A))},z=()=>{const{node:A}=t;!r.value||A.loading||(A.loaded?N():b())},H=()=>{n.value&&!f.value||(f.value&&!i.value&&!l.value&&!o.value?T(!0):z())},j=A=>{l.value?(K(A),t.node.loaded&&N()):T(A)},T=A=>{t.node.loaded?(K(A),!l.value&&N()):b()};return{panel:a,isHoverMenu:n,multiple:o,checkStrictly:l,checkedNodeId:d,isDisabled:i,isLeaf:f,expandable:r,inExpandingPath:h,inCheckedPath:u,ns:s,handleHoverExpand:F,handleExpand:z,handleClick:H,handleCheck:T,handleSelectCheck:j}}}),Gt=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Xt=Z("span",null,null,-1);function Jt(t,e,a,s,n,o){const l=q("el-checkbox"),d=q("el-radio"),i=q("check"),f=q("el-icon"),r=q("node-content"),h=q("loading"),u=q("arrow-right");return E(),U("li",{id:`${t.menuId}-${t.node.uid}`,role:"menuitem","aria-haspopup":!t.isLeaf,"aria-owns":t.isLeaf?null:t.menuId,"aria-expanded":t.inExpandingPath,tabindex:t.expandable?-1:void 0,class:P([t.ns.b(),t.ns.is("selectable",t.checkStrictly),t.ns.is("active",t.node.checked),t.ns.is("disabled",!t.expandable),t.inExpandingPath&&"in-active-path",t.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...m)=>t.handleHoverExpand&&t.handleHoverExpand(...m)),onFocus:e[3]||(e[3]=(...m)=>t.handleHoverExpand&&t.handleHoverExpand(...m)),onClick:e[4]||(e[4]=(...m)=>t.handleClick&&t.handleClick(...m))},[R(" prefix "),t.multiple?(E(),O(l,{key:0,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:t.isDisabled,onClick:e[0]||(e[0]=ee(()=>{},["stop"])),"onUpdate:modelValue":t.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):t.checkStrictly?(E(),O(d,{key:1,"model-value":t.checkedNodeId,label:t.node.uid,disabled:t.isDisabled,"onUpdate:modelValue":t.handleSelectCheck,onClick:e[1]||(e[1]=ee(()=>{},["stop"]))},{default:M(()=>[R(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Xt]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):t.isLeaf&&t.node.checked?(E(),O(f,{key:2,class:P(t.ns.e("prefix"))},{default:M(()=>[L(i)]),_:1},8,["class"])):R("v-if",!0),R(" content "),L(r),R(" postfix "),t.isLeaf?R("v-if",!0):(E(),U(ie,{key:3},[t.node.loading?(E(),O(f,{key:0,class:P([t.ns.is("loading"),t.ns.e("postfix")])},{default:M(()=>[L(h)]),_:1},8,["class"])):(E(),O(f,{key:1,class:P(["arrow-right",t.ns.e("postfix")])},{default:M(()=>[L(u)]),_:1},8,["class"]))],64))],42,Gt)}var Qt=ae(Zt,[["render",Jt],["__file","node.vue"]]);const en=G({name:"ElCascaderMenu",components:{Loading:Ve,ElIcon:Le,ElScrollbar:tt,ElCascaderNode:Qt},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(t){const e=Pe(),a=J("cascader-menu"),{t:s}=nt(),n=it();let o=null,l=null;const d=ne(Me),i=S(null),f=$(()=>!t.nodes.length),r=$(()=>!d.initialLoaded),h=$(()=>`${n.value}-${t.index}`),u=b=>{o=b.target},m=b=>{if(!(!d.isHoverMenu||!o||!i.value))if(o.contains(b.target)){N();const F=e.vnode.el,{left:z}=F.getBoundingClientRect(),{offsetWidth:H,offsetHeight:j}=F,T=b.clientX-z,A=o.offsetTop,I=A+o.offsetHeight;i.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${A} L${H} 0 V${A} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${T} ${I} L${H} ${j} V${I} Z" />
        `}else l||(l=window.setTimeout(K,d.config.hoverThreshold))},N=()=>{!l||(clearTimeout(l),l=null)},K=()=>{!i.value||(i.value.innerHTML="",N())};return{ns:a,panel:d,hoverZone:i,isEmpty:f,isLoading:r,menuId:h,t:s,handleExpand:u,handleMouseMove:m,clearHoverZone:K}}});function tn(t,e,a,s,n,o){const l=q("el-cascader-node"),d=q("loading"),i=q("el-icon"),f=q("el-scrollbar");return E(),O(f,{key:t.menuId,tag:"ul",role:"menu",class:P(t.ns.b()),"wrap-class":t.ns.e("wrap"),"view-class":[t.ns.e("list"),t.ns.is("empty",t.isEmpty)],onMousemove:t.handleMouseMove,onMouseleave:t.clearHoverZone},{default:M(()=>{var r;return[(E(!0),U(ie,null,me(t.nodes,h=>(E(),O(l,{key:h.uid,node:h,"menu-id":t.menuId,onExpand:t.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),t.isLoading?(E(),U("div",{key:0,class:P(t.ns.e("empty-text"))},[L(i,{size:"14",class:P(t.ns.is("loading"))},{default:M(()=>[L(d)]),_:1},8,["class"]),ye(" "+ge(t.t("el.cascader.loading")),1)],2)):t.isEmpty?(E(),U("div",{key:1,class:P(t.ns.e("empty-text"))},ge(t.t("el.cascader.noData")),3)):(r=t.panel)!=null&&r.isHoverMenu?(E(),U("svg",{key:2,ref:"hoverZone",class:P(t.ns.e("hover-zone"))},null,2)):R("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var nn=ae(en,[["render",tn],["__file","menu.vue"]]);let an=0;const sn=t=>{const e=[t];let{parent:a}=t;for(;a;)e.unshift(a),a=a.parent;return e};class de{constructor(e,a,s,n=!1){this.data=e,this.config=a,this.parent=s,this.root=n,this.uid=an++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:o,label:l,children:d}=a,i=e[d],f=sn(this);this.level=n?0:s?s.level+1:1,this.value=e[o],this.label=e[l],this.pathNodes=f,this.pathValues=f.map(r=>r.value),this.pathLabels=f.map(r=>r.label),this.childrenData=i,this.children=(i||[]).map(r=>new de(r,a,this)),this.loaded=!a.lazy||this.isLeaf||!Ee(i)}get isDisabled(){const{data:e,parent:a,config:s}=this,{disabled:n,checkStrictly:o}=s;return(we(n)?n(e,this):!!e[n])||!o&&(a==null?void 0:a.isDisabled)}get isLeaf(){const{data:e,config:a,childrenData:s,loaded:n}=this,{lazy:o,leaf:l}=a,d=we(l)?l(e,this):e[l];return ut(d)?o&&!n?!1:!(Array.isArray(s)&&s.length):!!d}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:a,children:s}=this,n=new de(e,this.config,this);return Array.isArray(a)?a.push(e):this.childrenData=[e],s.push(n),n}calcText(e,a){const s=e?this.pathLabels.join(a):this.label;return this.text=s,s}broadcast(e,...a){const s=`onParent${Re(e)}`;this.children.forEach(n=>{n&&(n.broadcast(e,...a),n[s]&&n[s](...a))})}emit(e,...a){const{parent:s}=this,n=`onChild${Re(e)}`;s&&(s[n]&&s[n](...a),s.emit(e,...a))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,a=e.filter(n=>!n.isDisabled),s=a.length?a.every(n=>n.checked):!1;this.setCheckState(s)}setCheckState(e){const a=this.children.length,s=this.children.reduce((n,o)=>{const l=o.checked?1:o.indeterminate?.5:0;return n+l},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&e,this.indeterminate=this.loaded&&s!==a&&s>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:a,multiple:s}=this.config;a||!s?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}}const xe=(t,e)=>t.reduce((a,s)=>(s.isLeaf?a.push(s):(!e&&a.push(s),a=a.concat(xe(s.children,e))),a),[]);class Ze{constructor(e,a){this.config=a;const s=(e||[]).map(n=>new de(n,this.config));this.nodes=s,this.allNodes=xe(s,!1),this.leafNodes=xe(s,!0)}getNodes(){return this.nodes}getFlattedNodes(e){return e?this.leafNodes:this.allNodes}appendNode(e,a){const s=a?a.appendChild(e):new de(e,this.config);a||this.nodes.push(s),this.allNodes.push(s),s.isLeaf&&this.leafNodes.push(s)}appendNodes(e,a){e.forEach(s=>this.appendNode(s,a))}getNodeByValue(e,a=!1){return!e&&e!==0?null:this.getFlattedNodes(a).find(n=>re(n.value,e)||re(n.pathValues,e))||null}getSameNode(e){return e&&this.getFlattedNodes(!1).find(({value:s,level:n})=>re(e.value,s)&&e.level===n)||null}}const on=ct({modelValue:{type:Ne([Number,String,Array])},options:{type:Ne(Array),default:()=>[]},props:{type:Ne(Object),default:()=>({})}}),ln={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:kt,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},dn=t=>$(()=>({...ln,...t.props})),Ge=t=>{if(!t)return 0;const e=t.id.split("-");return Number(e[e.length-2])},rn=t=>{if(!t)return;const e=t.querySelector("input");e?e.click():Mt(t)&&t.click()},un=(t,e)=>{const a=e.slice(0),s=a.map(o=>o.uid),n=t.reduce((o,l)=>{const d=s.indexOf(l.uid);return d>-1&&(o.push(l),a.splice(d,1),s.splice(d,1)),o},[]);return n.push(...a),n},cn=G({name:"ElCascaderPanel",components:{ElCascaderMenu:nn},props:{...on,border:{type:Boolean,default:!0},renderLabel:Function},emits:[He,_e,"close","expand-change"],setup(t,{emit:e,slots:a}){let s=!1;const n=J("cascader"),o=dn(t);let l=null;const d=S(!0),i=S([]),f=S(null),r=S([]),h=S(null),u=S([]),m=$(()=>o.value.expandTrigger==="hover"),N=$(()=>t.renderLabel||a.default),K=()=>{const{options:g}=t,v=o.value;s=!1,l=new Ze(g,v),r.value=[l.getNodes()],v.lazy&&Ee(t.options)?(d.value=!1,b(void 0,p=>{p&&(l=new Ze(p,v),r.value=[l.getNodes()]),d.value=!0,_(!1,!0)})):_(!1,!0)},b=(g,v)=>{const p=o.value;g=g||new de({},p,void 0,!0),g.loading=!0;const k=D=>{const c=g,C=c.root?null:c;D&&(l==null||l.appendNodes(D,C)),c.loading=!1,c.loaded=!0,c.childrenData=c.childrenData||[],v&&v(D)};p.lazyLoad(g,k)},F=(g,v)=>{var p;const{level:k}=g,D=r.value.slice(0,k);let c;g.isLeaf?c=g.pathNodes[k-2]:(c=g,D.push(g.children)),((p=h.value)==null?void 0:p.uid)!==(c==null?void 0:c.uid)&&(h.value=g,r.value=D,!v&&e("expand-change",(g==null?void 0:g.pathValues)||[]))},z=(g,v,p=!0)=>{const{checkStrictly:k,multiple:D}=o.value,c=u.value[0];s=!0,!D&&(c==null||c.doCheck(!1)),g.doCheck(v),I(),p&&!D&&!k&&e("close"),!p&&!D&&!k&&H(g)},H=g=>{!g||(g=g.parent,H(g),g&&F(g))},j=g=>l==null?void 0:l.getFlattedNodes(g),T=g=>{var v;return(v=j(g))==null?void 0:v.filter(p=>p.checked!==!1)},A=()=>{u.value.forEach(g=>g.doCheck(!1)),I(),r.value=r.value.slice(0,1),h.value=null,e("expand-change",[])},I=()=>{var g;const{checkStrictly:v,multiple:p}=o.value,k=u.value,D=T(!v),c=un(k,D),C=c.map(B=>B.valueByOption);u.value=c,f.value=p?C:(g=C[0])!=null?g:null},_=(g=!1,v=!1)=>{const{modelValue:p}=t,{lazy:k,multiple:D,checkStrictly:c}=o.value,C=!c;if(!(!d.value||s||!v&&re(p,f.value)))if(k&&!g){const X=We(Wt(Ye(p))).map(Q=>l==null?void 0:l.getNodeByValue(Q)).filter(Q=>!!Q&&!Q.loaded&&!Q.loading);X.length?X.forEach(Q=>{b(Q,()=>_(!1,v))}):_(!0,v)}else{const B=D?Ye(p):[p],X=We(B.map(Q=>l==null?void 0:l.getNodeByValue(Q,C)));y(X,v),f.value=_t(p)}},y=(g,v=!0)=>{const{checkStrictly:p}=o.value,k=u.value,D=g.filter(B=>!!B&&(p||B.isLeaf)),c=l==null?void 0:l.getSameNode(h.value),C=v&&c||D[0];C?C.pathNodes.forEach(B=>F(B,!0)):h.value=null,k.forEach(B=>B.doCheck(!1)),t.props.multiple?Ae(D).forEach(B=>B.doCheck(!0)):D.forEach(B=>B.doCheck(!0)),u.value=D,le(x)},x=()=>{!Ct||i.value.forEach(g=>{const v=g==null?void 0:g.$el;if(v){const p=v.querySelector(`.${n.namespace.value}-scrollbar__wrap`),k=v.querySelector(`.${n.b("node")}.${n.is("active")}`)||v.querySelector(`.${n.b("node")}.in-active-path`);Ht(p,k)}})},V=g=>{const v=g.target,{code:p}=g;switch(p){case Y.up:case Y.down:{g.preventDefault();const k=p===Y.up?-1:1;be(Ot(v,k,`.${n.b("node")}[tabindex="-1"]`));break}case Y.left:{g.preventDefault();const k=i.value[Ge(v)-1],D=k==null?void 0:k.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);be(D);break}case Y.right:{g.preventDefault();const k=i.value[Ge(v)+1],D=k==null?void 0:k.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);be(D);break}case Y.enter:rn(v);break}};return oe(Me,Ae({config:o,expandingNode:h,checkedNodes:u,isHoverMenu:m,initialLoaded:d,renderLabelFn:N,lazyLoad:b,expandNode:F,handleCheckChange:z})),W([o,()=>t.options],K,{deep:!0,immediate:!0}),W(()=>t.modelValue,()=>{s=!1,_()},{deep:!0}),W(()=>f.value,g=>{re(g,t.modelValue)||(e(He,g),e(_e,g))}),Nt(()=>i.value=[]),at(()=>!Ee(t.modelValue)&&_()),{ns:n,menuList:i,menus:r,checkedNodes:u,handleKeyDown:V,handleCheckChange:z,getFlattedNodes:j,getCheckedNodes:T,clearCheckedNodes:A,calculateCheckedValue:I,scrollToExpandingNode:x}}});function hn(t,e,a,s,n,o){const l=q("el-cascader-menu");return E(),U("div",{class:P([t.ns.b("panel"),t.ns.is("bordered",t.border)]),onKeydown:e[0]||(e[0]=(...d)=>t.handleKeyDown&&t.handleKeyDown(...d))},[(E(!0),U(ie,null,me(t.menus,(d,i)=>(E(),O(l,{key:i,ref_for:!0,ref:f=>t.menuList[i]=f,index:i,nodes:[...d]},null,8,["index","nodes"]))),128))],34)}var he=ae(cn,[["render",hn],["__file","index.vue"]]);he.install=t=>{t.component(he.name,he)};const pn=he,fn=pn,vn=G({name:"ElCollapseTransition"}),gn=G({...vn,setup(t){const e=J("collapse-transition"),a=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},s={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.height&&(n.dataset.elExistsHeight=n.style.height),n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){requestAnimationFrame(()=>{n.dataset.oldOverflow=n.style.overflow,n.dataset.elExistsHeight?n.style.maxHeight=n.dataset.elExistsHeight:n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"})},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){a(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){a(n)},leaveCancelled(n){a(n)}};return(n,o)=>(E(),O(Et,Ke({name:w(e).b()},bt(s)),{default:M(()=>[Ie(n.$slots,"default")]),_:3},16,["name"]))}});var pe=ae(gn,[["__file","collapse-transition.vue"]]);pe.install=t=>{t.component(pe.name,pe)};const mn=pe,se="$treeNodeId",Xe=function(t,e){!e||e[se]||Object.defineProperty(e,se,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},Oe=function(t,e){return t?e[t]:e[se]},$e=(t,e,a)=>{const s=t.value.currentNode;a();const n=t.value.currentNode;s!==n&&e("current-change",n?n.data:null,n)},Be=t=>{let e=!0,a=!0,s=!0;for(let n=0,o=t.length;n<o;n++){const l=t[n];(l.checked!==!0||l.indeterminate)&&(e=!1,l.disabled||(s=!1)),(l.checked!==!1||l.indeterminate)&&(a=!1)}return{all:e,none:a,allWithoutDisable:s,half:!e&&!a}},fe=function(t){if(t.childNodes.length===0||t.loading)return;const{all:e,none:a,half:s}=Be(t.childNodes);e?(t.checked=!0,t.indeterminate=!1):s?(t.checked=!1,t.indeterminate=!0):a&&(t.checked=!1,t.indeterminate=!1);const n=t.parent;!n||n.level===0||t.store.checkStrictly||fe(n)},ce=function(t,e){const a=t.store.props,s=t.data||{},n=a[e];if(typeof n=="function")return n(s,t);if(typeof n=="string")return s[n];if(typeof n>"u"){const o=s[e];return o===void 0?"":o}};let yn=0;class te{constructor(e){this.id=yn++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const a in e)Se(e,a)&&(this[a]=e[a]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const a=e.props;if(a&&typeof a.isLeaf<"u"){const o=ce(this,"isLeaf");typeof o=="boolean"&&(this.isLeafByUser=o)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Xe(this,this.data),!this.data)return;const s=e.defaultExpandedKeys,n=e.key;n&&s&&s.includes(this.key)&&this.expand(null,e.autoExpandParent),n&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||Xe(this,e),this.data=e,this.childNodes=[];let a;this.level===0&&Array.isArray(this.data)?a=this.data:a=ce(this,"children")||[];for(let s=0,n=a.length;s<n;s++)this.insertChild({data:a[s]})}get label(){return ce(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return ce(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const a=e.childNodes.indexOf(this);if(a>-1)return e.childNodes[a+1]}return null}get previousSibling(){const e=this.parent;if(e){const a=e.childNodes.indexOf(this);if(a>-1)return a>0?e.childNodes[a-1]:null}return null}contains(e,a=!0){return(this.childNodes||[]).some(s=>s===e||a&&s.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,a,s){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof te)){if(!s){const n=this.getChildren(!0);n.includes(e.data)||(typeof a>"u"||a<0?n.push(e.data):n.splice(a,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=Ae(new te(e)),e instanceof te&&e.initialize()}e.level=this.level+1,typeof a>"u"||a<0?this.childNodes.push(e):this.childNodes.splice(a,0,e),this.updateLeafState()}insertBefore(e,a){let s;a&&(s=this.childNodes.indexOf(a)),this.insertChild(e,s)}insertAfter(e,a){let s;a&&(s=this.childNodes.indexOf(a),s!==-1&&(s+=1)),this.insertChild(e,s)}removeChild(e){const a=this.getChildren()||[],s=a.indexOf(e.data);s>-1&&a.splice(s,1);const n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(e){let a=null;for(let s=0;s<this.childNodes.length;s++)if(this.childNodes[s].data===e){a=this.childNodes[s];break}a&&this.removeChild(a)}expand(e,a){const s=()=>{if(a){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{Array.isArray(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||fe(this),s())}):s()}doCreateChildren(e,a={}){e.forEach(s=>{this.insertChild(Object.assign({data:s},a),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,a,s,n){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:l,allWithoutDisable:d}=Be(this.childNodes);!this.isLeaf&&!l&&d&&(this.checked=!1,e=!1);const i=()=>{if(a){const f=this.childNodes;for(let u=0,m=f.length;u<m;u++){const N=f[u];n=n||e!==!1;const K=N.disabled?N.checked:n;N.setChecked(K,a,!0,n)}const{half:r,all:h}=Be(f);h||(this.checked=h,this.indeterminate=r)}};if(this.shouldLoadData()){this.loadData(()=>{i(),fe(this)},{checked:e!==!1});return}else i()}const o=this.parent;!o||o.level===0||s||fe(o)}getChildren(e=!1){if(this.level===0)return this.data;const a=this.data;if(!a)return null;const s=this.store.props;let n="children";return s&&(n=s.children||"children"),a[n]===void 0&&(a[n]=null),e&&!a[n]&&(a[n]=[]),a[n]}updateChildren(){const e=this.getChildren()||[],a=this.childNodes.map(o=>o.data),s={},n=[];e.forEach((o,l)=>{const d=o[se];!!d&&a.findIndex(f=>f[se]===d)>=0?s[d]={index:l,data:o}:n.push({index:l,data:o})}),this.store.lazy||a.forEach(o=>{s[o[se]]||this.removeChildByData(o)}),n.forEach(({index:o,data:l})=>{this.insertChild({data:l},o)}),this.updateLeafState()}loadData(e,a={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(a).length)){this.loading=!0;const s=n=>{this.childNodes=[],this.doCreateChildren(n,a),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)};this.store.load(this,s)}else e&&e.call(this)}}class kn{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const a in e)Se(e,a)&&(this[a]=e[a]);this.nodesMap={}}initialize(){if(this.root=new te({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,a=>{this.root.doCreateChildren(a),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const a=this.filterNodeMethod,s=this.lazy,n=function(o){const l=o.root?o.root.childNodes:o.childNodes;if(l.forEach(d=>{d.visible=a.call(d,e,d.data,d),n(d)}),!o.visible&&l.length){let d=!0;d=!l.some(i=>i.visible),o.root?o.root.visible=d===!1:o.visible=d===!1}!e||o.visible&&!o.isLeaf&&(!s||o.loaded)&&o.expand()};n(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof te)return e;const a=Dt(e)?Oe(this.key,e):e;return this.nodesMap[a]||null}insertBefore(e,a){const s=this.getNode(a);s.parent.insertBefore({data:e},s)}insertAfter(e,a){const s=this.getNode(a);s.parent.insertAfter({data:e},s)}remove(e){const a=this.getNode(e);a&&a.parent&&(a===this.currentNode&&(this.currentNode=null),a.parent.removeChild(a))}append(e,a){const s=a?this.getNode(a):this.root;s&&s.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],a=this.nodesMap;e.forEach(s=>{const n=a[s];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const a=this.key;!e||!e.data||(a?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(s=>{this.deregisterNode(s)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,a=!1){const s=[],n=function(o){(o.root?o.root.childNodes:o.childNodes).forEach(d=>{(d.checked||a&&d.indeterminate)&&(!e||e&&d.isLeaf)&&s.push(d.data),n(d)})};return n(this),s}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(a=>(a||{})[this.key])}getHalfCheckedNodes(){const e=[],a=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),a(o)})};return a(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],a=this.nodesMap;for(const s in a)Se(a,s)&&e.push(a[s]);return e}updateChildren(e,a){const s=this.nodesMap[e];if(!s)return;const n=s.childNodes;for(let o=n.length-1;o>=0;o--){const l=n[o];this.remove(l.data)}for(let o=0,l=a.length;o<l;o++){const d=a[o];this.append(d,s.data)}}_setCheckedKeys(e,a=!1,s){const n=this._getAllNodes().sort((i,f)=>i.level-f.level),o=Object.create(null),l=Object.keys(s);n.forEach(i=>i.setChecked(!1,!1));const d=i=>{i.childNodes.forEach(f=>{var r;o[f.data[e]]=!0,(r=f.childNodes)!=null&&r.length&&d(f)})};for(let i=0,f=n.length;i<f;i++){const r=n[i],h=r.data[e].toString();if(!l.includes(h)){r.checked&&!o[h]&&r.setChecked(!1,!1);continue}if(r.childNodes.length&&d(r),r.isLeaf||this.checkStrictly){r.setChecked(!0,!1);continue}if(r.setChecked(!0,!0),a){r.setChecked(!1,!1);const m=function(N){N.childNodes.forEach(b=>{b.isLeaf||b.setChecked(!1,!1),m(b)})};m(r)}}}setCheckedNodes(e,a=!1){const s=this.key,n={};e.forEach(o=>{n[(o||{})[s]]=!0}),this._setCheckedKeys(s,a,n)}setCheckedKeys(e,a=!1){this.defaultCheckedKeys=e;const s=this.key,n={};e.forEach(o=>{n[o]=!0}),this._setCheckedKeys(s,a,n)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(a=>{const s=this.getNode(a);s&&s.expand(null,this.autoExpandParent)})}setChecked(e,a,s){const n=this.getNode(e);n&&n.setChecked(!!a,s)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const a=this.currentNode;a&&(a.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,a=!0){const s=e[this.key],n=this.nodesMap[s];this.setCurrentNode(n),a&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,a=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const s=this.getNode(e);s&&(this.setCurrentNode(s),a&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const Nn=G({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(t){const e=J("tree"),a=ne("NodeInstance"),s=ne("RootTree");return()=>{const n=t.node,{data:o,store:l}=n;return t.renderContent?t.renderContent(De,{_self:a,node:n,data:o,store:l}):Ie(s.ctx.slots,"default",{node:n,data:o},()=>[De("span",{class:e.be("node","label")},[n.label])])}}});var Cn=ae(Nn,[["__file","tree-node-content.vue"]]);function st(t){const e=ne("TreeNodeMap",null),a={treeNodeExpand:s=>{t.node!==s&&t.node.collapse()},children:[]};return e&&e.children.push(a),oe("TreeNodeMap",a),{broadcastExpanded:s=>{if(!!t.accordion)for(const n of a.children)n.treeNodeExpand(s)}}}const ot=Symbol("dragEvents");function bn({props:t,ctx:e,el$:a,dropIndicator$:s,store:n}){const o=J("tree"),l=S({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return oe(ot,{treeNodeDragStart:({event:r,treeNode:h})=>{if(typeof t.allowDrag=="function"&&!t.allowDrag(h.node))return r.preventDefault(),!1;r.dataTransfer.effectAllowed="move";try{r.dataTransfer.setData("text/plain","")}catch{}l.value.draggingNode=h,e.emit("node-drag-start",h.node,r)},treeNodeDragOver:({event:r,treeNode:h})=>{const u=h,m=l.value.dropNode;m&&m.node.id!==u.node.id&&Ce(m.$el,o.is("drop-inner"));const N=l.value.draggingNode;if(!N||!u)return;let K=!0,b=!0,F=!0,z=!0;typeof t.allowDrop=="function"&&(K=t.allowDrop(N.node,u.node,"prev"),z=b=t.allowDrop(N.node,u.node,"inner"),F=t.allowDrop(N.node,u.node,"next")),r.dataTransfer.dropEffect=b||K||F?"move":"none",(K||b||F)&&(m==null?void 0:m.node.id)!==u.node.id&&(m&&e.emit("node-drag-leave",N.node,m.node,r),e.emit("node-drag-enter",N.node,u.node,r)),K||b||F?l.value.dropNode=u:l.value.dropNode=null,u.node.nextSibling===N.node&&(F=!1),u.node.previousSibling===N.node&&(K=!1),u.node.contains(N.node,!1)&&(b=!1),(N.node===u.node||N.node.contains(u.node))&&(K=!1,b=!1,F=!1);const H=u.$el.querySelector(`.${o.be("node","content")}`).getBoundingClientRect(),j=a.value.getBoundingClientRect();let T;const A=K?b?.25:F?.45:1:-1,I=F?b?.75:K?.55:0:1;let _=-9999;const y=r.clientY-H.top;y<H.height*A?T="before":y>H.height*I?T="after":b?T="inner":T="none";const x=u.$el.querySelector(`.${o.be("node","expand-icon")}`).getBoundingClientRect(),V=s.value;T==="before"?_=x.top-j.top:T==="after"&&(_=x.bottom-j.top),V.style.top=`${_}px`,V.style.left=`${x.right-j.left}px`,T==="inner"?ht(u.$el,o.is("drop-inner")):Ce(u.$el,o.is("drop-inner")),l.value.showDropIndicator=T==="before"||T==="after",l.value.allowDrop=l.value.showDropIndicator||z,l.value.dropType=T,e.emit("node-drag-over",N.node,u.node,r)},treeNodeDragEnd:r=>{const{draggingNode:h,dropType:u,dropNode:m}=l.value;if(r.preventDefault(),r.dataTransfer.dropEffect="move",h&&m){const N={data:h.node.data};u!=="none"&&h.node.remove(),u==="before"?m.node.parent.insertBefore(N,m.node):u==="after"?m.node.parent.insertAfter(N,m.node):u==="inner"&&m.node.insertChild(N),u!=="none"&&n.value.registerNode(N),Ce(m.$el,o.is("drop-inner")),e.emit("node-drag-end",h.node,m.node,u,r),u!=="none"&&e.emit("node-drop",h.node,m.node,u,r)}h&&!m&&e.emit("node-drag-end",h.node,null,u,r),l.value.showDropIndicator=!1,l.value.draggingNode=null,l.value.dropNode=null,l.value.allowDrop=!0}}),{dragState:l}}const En=G({name:"ElTreeNode",components:{ElCollapseTransition:mn,ElCheckbox:et,NodeContent:Cn,ElIcon:Le,Loading:Ve},props:{node:{type:te,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(t,e){const a=J("tree"),{broadcastExpanded:s}=st(t),n=ne("RootTree"),o=S(!1),l=S(!1),d=S(null),i=S(null),f=S(null),r=ne(ot),h=Pe();oe("NodeInstance",h),t.node.expanded&&(o.value=!0,l.value=!0);const u=n.props.props.children||"children";W(()=>{const y=t.node.data[u];return y&&[...y]},()=>{t.node.updateChildren()}),W(()=>t.node.indeterminate,y=>{K(t.node.checked,y)}),W(()=>t.node.checked,y=>{K(y,t.node.indeterminate)}),W(()=>t.node.expanded,y=>{le(()=>o.value=y),y&&(l.value=!0)});const m=y=>Oe(n.props.nodeKey,y.data),N=y=>{const x=t.props.class;if(!x)return{};let V;if(we(x)){const{data:g}=y;V=x(g,y)}else V=x;return wt(V)?{[V]:!0}:V},K=(y,x)=>{(d.value!==y||i.value!==x)&&n.ctx.emit("check-change",t.node.data,y,x),d.value=y,i.value=x},b=y=>{$e(n.store,n.ctx.emit,()=>n.store.value.setCurrentNode(t.node)),n.currentNode.value=t.node,n.props.expandOnClickNode&&z(),n.props.checkOnClickNode&&!t.node.disabled&&H(null,{target:{checked:!t.node.checked}}),n.ctx.emit("node-click",t.node.data,t.node,h,y)},F=y=>{n.instance.vnode.props.onNodeContextmenu&&(y.stopPropagation(),y.preventDefault()),n.ctx.emit("node-contextmenu",y,t.node.data,t.node,h)},z=()=>{t.node.isLeaf||(o.value?(n.ctx.emit("node-collapse",t.node.data,t.node,h),t.node.collapse()):(t.node.expand(),e.emit("node-expand",t.node.data,t.node,h)))},H=(y,x)=>{t.node.setChecked(x.target.checked,!n.props.checkStrictly),le(()=>{const V=n.store.value;n.ctx.emit("check",t.node.data,{checkedNodes:V.getCheckedNodes(),checkedKeys:V.getCheckedKeys(),halfCheckedNodes:V.getHalfCheckedNodes(),halfCheckedKeys:V.getHalfCheckedKeys()})})};return{ns:a,node$:f,tree:n,expanded:o,childNodeRendered:l,oldChecked:d,oldIndeterminate:i,getNodeKey:m,getNodeClass:N,handleSelectChange:K,handleClick:b,handleContextMenu:F,handleExpandIconClick:z,handleCheckChange:H,handleChildNodeExpand:(y,x,V)=>{s(x),n.ctx.emit("node-expand",y,x,V)},handleDragStart:y=>{!n.props.draggable||r.treeNodeDragStart({event:y,treeNode:t})},handleDragOver:y=>{y.preventDefault(),n.props.draggable&&r.treeNodeDragOver({event:y,treeNode:{$el:f.value,node:t.node}})},handleDrop:y=>{y.preventDefault()},handleDragEnd:y=>{!n.props.draggable||r.treeNodeDragEnd(y)},CaretRight:pt}}}),Dn=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],wn=["aria-expanded"];function An(t,e,a,s,n,o){const l=q("el-icon"),d=q("el-checkbox"),i=q("loading"),f=q("node-content"),r=q("el-tree-node"),h=q("el-collapse-transition");return Te((E(),U("div",{ref:"node$",class:P([t.ns.b("node"),t.ns.is("expanded",t.expanded),t.ns.is("current",t.node.isCurrent),t.ns.is("hidden",!t.node.visible),t.ns.is("focusable",!t.node.disabled),t.ns.is("checked",!t.node.disabled&&t.node.checked),t.getNodeClass(t.node)]),role:"treeitem",tabindex:"-1","aria-expanded":t.expanded,"aria-disabled":t.node.disabled,"aria-checked":t.node.checked,draggable:t.tree.props.draggable,"data-key":t.getNodeKey(t.node),onClick:e[1]||(e[1]=ee((...u)=>t.handleClick&&t.handleClick(...u),["stop"])),onContextmenu:e[2]||(e[2]=(...u)=>t.handleContextMenu&&t.handleContextMenu(...u)),onDragstart:e[3]||(e[3]=ee((...u)=>t.handleDragStart&&t.handleDragStart(...u),["stop"])),onDragover:e[4]||(e[4]=ee((...u)=>t.handleDragOver&&t.handleDragOver(...u),["stop"])),onDragend:e[5]||(e[5]=ee((...u)=>t.handleDragEnd&&t.handleDragEnd(...u),["stop"])),onDrop:e[6]||(e[6]=ee((...u)=>t.handleDrop&&t.handleDrop(...u),["stop"]))},[Z("div",{class:P(t.ns.be("node","content")),style:Kt({paddingLeft:(t.node.level-1)*t.tree.props.indent+"px"})},[t.tree.props.icon||t.CaretRight?(E(),O(l,{key:0,class:P([t.ns.be("node","expand-icon"),t.ns.is("leaf",t.node.isLeaf),{expanded:!t.node.isLeaf&&t.expanded}]),onClick:ee(t.handleExpandIconClick,["stop"])},{default:M(()=>[(E(),O(At(t.tree.props.icon||t.CaretRight)))]),_:1},8,["class","onClick"])):R("v-if",!0),t.showCheckbox?(E(),O(d,{key:1,"model-value":t.node.checked,indeterminate:t.node.indeterminate,disabled:!!t.node.disabled,onClick:e[0]||(e[0]=ee(()=>{},["stop"])),onChange:t.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):R("v-if",!0),t.node.loading?(E(),O(l,{key:2,class:P([t.ns.be("node","loading-icon"),t.ns.is("loading")])},{default:M(()=>[L(i)]),_:1},8,["class"])):R("v-if",!0),L(f,{node:t.node,"render-content":t.renderContent},null,8,["node","render-content"])],6),L(h,null,{default:M(()=>[!t.renderAfterExpand||t.childNodeRendered?Te((E(),U("div",{key:0,class:P(t.ns.be("node","children")),role:"group","aria-expanded":t.expanded},[(E(!0),U(ie,null,me(t.node.childNodes,u=>(E(),O(r,{key:t.getNodeKey(u),"render-content":t.renderContent,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,node:u,accordion:t.accordion,props:t.props,onNodeExpand:t.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,wn)),[[Fe,t.expanded]]):R("v-if",!0)]),_:1})],42,Dn)),[[Fe,t.node.visible]])}var Kn=ae(En,[["render",An],["__file","tree-node.vue"]]);function Sn({el$:t},e){const a=J("tree"),s=qe([]),n=qe([]);at(()=>{l()}),St(()=>{s.value=Array.from(t.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"))}),W(n,d=>{d.forEach(i=>{i.setAttribute("tabindex","-1")})}),Tt(t,"keydown",d=>{const i=d.target;if(!i.className.includes(a.b("node")))return;const f=d.code;s.value=Array.from(t.value.querySelectorAll(`.${a.is("focusable")}[role=treeitem]`));const r=s.value.indexOf(i);let h;if([Y.up,Y.down].includes(f)){if(d.preventDefault(),f===Y.up){h=r===-1?0:r!==0?r-1:s.value.length-1;const m=h;for(;!e.value.getNode(s.value[h].dataset.key).canFocus;){if(h--,h===m){h=-1;break}h<0&&(h=s.value.length-1)}}else{h=r===-1?0:r<s.value.length-1?r+1:0;const m=h;for(;!e.value.getNode(s.value[h].dataset.key).canFocus;){if(h++,h===m){h=-1;break}h>=s.value.length&&(h=0)}}h!==-1&&s.value[h].focus()}[Y.left,Y.right].includes(f)&&(d.preventDefault(),i.click());const u=i.querySelector('[type="checkbox"]');[Y.enter,Y.space].includes(f)&&u&&(d.preventDefault(),u.click())});const l=()=>{var d;s.value=Array.from(t.value.querySelectorAll(`.${a.is("focusable")}[role=treeitem]`)),n.value=Array.from(t.value.querySelectorAll("input[type=checkbox]"));const i=t.value.querySelectorAll(`.${a.is("checked")}[role=treeitem]`);if(i.length){i[0].setAttribute("tabindex","0");return}(d=s.value[0])==null||d.setAttribute("tabindex","0")}}const Tn=G({name:"ElTree",components:{ElTreeNode:Kn},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:ft}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(t,e){const{t:a}=nt(),s=J("tree"),n=S(new kn({key:t.nodeKey,data:t.data,lazy:t.lazy,props:t.props,load:t.load,currentNodeKey:t.currentNodeKey,checkStrictly:t.checkStrictly,checkDescendants:t.checkDescendants,defaultCheckedKeys:t.defaultCheckedKeys,defaultExpandedKeys:t.defaultExpandedKeys,autoExpandParent:t.autoExpandParent,defaultExpandAll:t.defaultExpandAll,filterNodeMethod:t.filterNodeMethod}));n.value.initialize();const o=S(n.value.root),l=S(null),d=S(null),i=S(null),{broadcastExpanded:f}=st(t),{dragState:r}=bn({props:t,ctx:e,el$:d,dropIndicator$:i,store:n});Sn({el$:d},n);const h=$(()=>{const{childNodes:c}=o.value;return!c||c.length===0||c.every(({visible:C})=>!C)});W(()=>t.currentNodeKey,c=>{n.value.setCurrentNodeKey(c)}),W(()=>t.defaultCheckedKeys,c=>{n.value.setDefaultCheckedKey(c)}),W(()=>t.defaultExpandedKeys,c=>{n.value.setDefaultExpandedKeys(c)}),W(()=>t.data,c=>{n.value.setData(c)},{deep:!0}),W(()=>t.checkStrictly,c=>{n.value.checkStrictly=c});const u=c=>{if(!t.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");n.value.filter(c)},m=c=>Oe(t.nodeKey,c.data),N=c=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const C=n.value.getNode(c);if(!C)return[];const B=[C.data];let X=C.parent;for(;X&&X!==o.value;)B.push(X.data),X=X.parent;return B.reverse()},K=(c,C)=>n.value.getCheckedNodes(c,C),b=c=>n.value.getCheckedKeys(c),F=()=>{const c=n.value.getCurrentNode();return c?c.data:null},z=()=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const c=F();return c?c[t.nodeKey]:null},H=(c,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");n.value.setCheckedNodes(c,C)},j=(c,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");n.value.setCheckedKeys(c,C)},T=(c,C,B)=>{n.value.setChecked(c,C,B)},A=()=>n.value.getHalfCheckedNodes(),I=()=>n.value.getHalfCheckedKeys(),_=(c,C=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");$e(n,e.emit,()=>n.value.setUserCurrentNode(c,C))},y=(c,C=!0)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");$e(n,e.emit,()=>n.value.setCurrentNodeKey(c,C))},x=c=>n.value.getNode(c),V=c=>{n.value.remove(c)},g=(c,C)=>{n.value.append(c,C)},v=(c,C)=>{n.value.insertBefore(c,C)},p=(c,C)=>{n.value.insertAfter(c,C)},k=(c,C,B)=>{f(C),e.emit("node-expand",c,C,B)},D=(c,C)=>{if(!t.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");n.value.updateChildren(c,C)};return oe("RootTree",{ctx:e,props:t,store:n,root:o,currentNode:l,instance:Pe()}),oe(vt,void 0),{ns:s,store:n,root:o,currentNode:l,dragState:r,el$:d,dropIndicator$:i,isEmpty:h,filter:u,getNodeKey:m,getNodePath:N,getCheckedNodes:K,getCheckedKeys:b,getCurrentNode:F,getCurrentKey:z,setCheckedNodes:H,setCheckedKeys:j,setChecked:T,getHalfCheckedNodes:A,getHalfCheckedKeys:I,setCurrentNode:_,setCurrentKey:y,t:a,getNode:x,remove:V,append:g,insertBefore:v,insertAfter:p,handleNodeExpand:k,updateKeyChildren:D}}});function Fn(t,e,a,s,n,o){const l=q("el-tree-node");return E(),U("div",{ref:"el$",class:P([t.ns.b(),t.ns.is("dragging",!!t.dragState.draggingNode),t.ns.is("drop-not-allow",!t.dragState.allowDrop),t.ns.is("drop-inner",t.dragState.dropType==="inner"),{[t.ns.m("highlight-current")]:t.highlightCurrent}]),role:"tree"},[(E(!0),U(ie,null,me(t.root.childNodes,d=>(E(),O(l,{key:t.getNodeKey(d),node:d,props:t.props,accordion:t.accordion,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent,onNodeExpand:t.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),t.isEmpty?(E(),U("div",{key:0,class:P(t.ns.e("empty-block"))},[Ie(t.$slots,"empty",{},()=>{var d;return[Z("span",{class:P(t.ns.e("empty-text"))},ge((d=t.emptyText)!=null?d:t.t("el.tree.emptyText")),3)]})],2)):R("v-if",!0),Te(Z("div",{ref:"dropIndicator$",class:P(t.ns.e("drop-indicator"))},null,2),[[Fe,t.dragState.showDropIndicator]])],2)}var ve=ae(Tn,[["render",Fn],["__file","tree.vue"]]);ve.install=t=>{t.component(ve.name,ve)};const xn=ve,$n=xn,Je=[{value:"guide",label:"Guide",children:[{value:"disciplines",label:"Disciplines",children:[{value:"consistency",label:"Consistency"},{value:"feedback",label:"Feedback"},{value:"efficiency",label:"Efficiency"},{value:"controllability",label:"Controllability"}]},{value:"navigation",label:"Navigation",children:[{value:"side nav",label:"Side Navigation"},{value:"top nav",label:"Top Navigation"}]}]},{value:"component",label:"Component",children:[{value:"basic",label:"Basic",children:[{value:"layout",label:"Layout"},{value:"color",label:"Color"},{value:"typography",label:"Typography"},{value:"icon",label:"Icon"},{value:"button",label:"Button"}]},{value:"notice",label:"Notice",children:[{value:"alert",label:"Alert"},{value:"loading",label:"Loading"},{value:"message",label:"Message"},{value:"message-box",label:"MessageBox"},{value:"notification",label:"Notification"}]}]}],Bn=G({__name:"index",props:{name:{default:""},placeholder:{default:"\u8BF7\u9009\u62E9"},loadingText:{default:"\u52A0\u8F7D\u4E2D"},emptyText:{default:"\u5C1A\u672A\u9009\u62E9"},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},modelValue:null,options:{type:[Array,Function],default:()=>[]},props:{default:()=>({})},cascaderAttrs:null,expires:{default:()=>new Date(new Date().getTime()+1e3*60*60*24*365)}},emits:["update:modelValue","change","init"],setup(t,{emit:e}){const a=t,[s,n]=ze(),[o,l]=ze(),d=S(!1),i=S(),f=$t(()=>!d.value&&!a.disabled&&n(),300),r=$(()=>({label:"label",value:"value",children:"children",multiple:a.multiple,emitPath:!1,...a.props})),h=$(()=>({label:r.value.label,value:r.value.value,children:r.value.children,disabled:""})),u=$({get:()=>a.modelValue,set:v=>e("update:modelValue",v)}),m=$(()=>Array.isArray(a.options)?a.options:i.value||[]),N=$(()=>d.value?a.loadingText:a.placeholder),K=$({get(){let v=a.modelValue;a.multiple&&(v=gt(a,"modelValue[0]")||[]);const k=Bt.getPath(m.value,D=>D[r.value.value]===v).map(D=>D[r.value.label]);if(a.multiple){if(!k||k.length===0||!Array.isArray(a.modelValue))return;const D=[...a.modelValue];return D[0]=k.join(" / "),D}return k.join(" / ")},set(){}}),b=Lt(),F=$(()=>({[b["is-active"]]:s.value})),z=S(),H=S();Ft(H,v=>{let p=v.target,k=!1;do k=p.classList?p.classList.contains(b.select):!1,p=p.parentNode;while(k===!1&&p!==null&&p.nodeName!=="BODY");!k&&n(!1)});const j=S(),T=()=>le(()=>{var v,p;(p=(v=j.value)==null?void 0:v.popperRef)==null||p.popperInstanceRef.update()}),A=(v,p)=>v?v.includes(p[r.value.value]):!0,I=S(),_=v=>{le(()=>{var p;return(p=I.value)==null?void 0:p.filter(v)}),T()},y=S(),x=v=>{var k;const p=(k=y.value)==null?void 0:k.getCheckedNodes(!0);e("change",v,p),a.multiple?_(v):n()},V=()=>{e("update:modelValue",a.multiple?[]:""),a.multiple&&_([])};W(s,v=>{v&&a.multiple&&_(a.modelValue||"")});const g=async()=>{if(Array.isArray(a.options))return;const v=`tree-picker-${a.name}`;if(a.name){const p=Ue.get(v);if(p){i.value=p,e("init",p);return}}d.value=!0;try{i.value=await a.options(),a.name&&Ue.set(v,i.value,{expires:a.expires}),e("init",i.value)}finally{d.value=!1}};return xt(()=>g()),(v,p)=>(E(),O(w(qt),{ref_key:"myPopover",ref:j,visible:w(s),placement:"bottom","popper-class":w(b).popover,onBeforeEnter:p[2]||(p[2]=()=>w(l)()),onAfterLeave:p[3]||(p[3]=()=>w(l)())},{reference:M(()=>[L(Pt,Ke({ref_key:"mySelect",ref:z,modelValue:w(K),"onUpdate:modelValue":p[1]||(p[1]=k=>je(K)?K.value=k:null),placeholder:w(N),"collapse-tags":"",clearable:"",disabled:d.value||t.disabled,multiple:t.multiple,class:[w(F),w(b).select],"popper-class":w(b)["popover-select"]},v.$attrs,{onClick:w(f),onClear:V}),null,16,["modelValue","placeholder","disabled","multiple","class","popper-class","onClick"])]),default:M(()=>[Z("div",{ref_key:"myWrapper",ref:H,class:P(w(b).wrapper)},[t.multiple?(E(),U("div",{key:0,class:P(w(b).selected)},[L(w(tt),null,{default:M(()=>[L(w($n),{ref_key:"myTree",ref:I,"default-expand-all":"",data:w(m),"node-key":w(r).value,props:w(h),"filter-node-method":A,"empty-text":t.emptyText},null,8,["data","node-key","props","empty-text"])]),_:1})],2)):R("v-if",!0),w(o)?(E(),O(w(fn),Ke({key:1,ref_key:"myCascader",ref:y,modelValue:w(u),"onUpdate:modelValue":p[0]||(p[0]=k=>je(u)?u.value=k:null),props:w(r),options:w(m)},t.cascaderAttrs,{onExpandChange:T,onChange:x}),null,16,["modelValue","props","options"])):R("v-if",!0)],2)]),_:1},8,["visible","popper-class"]))}}),Ln="_popover_8h79y_1",Vn="_wrapper_8h79y_6",Pn="_select_8h79y_13",In="_selected_8h79y_24",Mn={popover:Ln,wrapper:Vn,select:Pn,"is-active":"_is-active_8h79y_17",selected:In,"popover-select":"_popover-select_8h79y_47"},On={$style:Mn},Qe=ke(Bn,[["__cssModules",On],["__file","index.vue"]]),Hn=G({__name:"example",setup(t){const e=S(""),a=S(!1),s=S(!0),n=d=>{e.value=d?[]:""},o=()=>new Promise(d=>{setTimeout(()=>d(Je),3e3)}),l=()=>{s.value=!1,le(()=>{s.value=!0})};return(d,i)=>(E(),O(mt,null,{default:M(()=>[L(w(ue),{label:"\u5C55\u793A\u533A\uFF1A\u540C\u6B65"},{default:M(()=>[L(Qe,{modelValue:e.value,"onUpdate:modelValue":i[0]||(i[0]=f=>e.value=f),options:w(Je),multiple:a.value,block:""},null,8,["modelValue","options","multiple"])]),_:1}),L(w(ue),{label:"\u5C55\u793A\u533A\uFF1A\u5F02\u6B65"},{default:M(()=>[L(w(zt),null,{default:M(()=>[s.value?(E(),O(Qe,{key:0,modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=f=>e.value=f),options:o,multiple:a.value,width:"300px"},null,8,["modelValue","multiple"])):R("v-if",!0),L(w(jt),{onClick:l},{default:M(()=>[ye("\u91CD\u65B0\u52A0\u8F7D")]),_:1})]),_:1})]),_:1}),L(w(ue),{label:"\u53C2\u6570\uFF1A\u5355/\u591A\u9009"},{default:M(()=>[L(w(Ut),{modelValue:a.value,"onUpdate:modelValue":i[2]||(i[2]=f=>a.value=f),"active-text":"\u591A\u9009","inactive-text":"\u5355\u9009","active-value":!0,"inactive-value":!1,onChange:n},null,8,["modelValue"])]),_:1}),L(w(ue),{label:"\u7ED3\u679C"},{default:M(()=>[Z("span",null,ge(e.value),1)]),_:1})]),_:1}))}}),_n=ke(Hn,[["__file","example.vue"]]),qn=G({__name:"usage",setup(t){const e={params:[{param:"*v-model",description:"\u7ED1\u5B9A\u503C",type:"Value | Value[]",defaultValue:"-"},{param:"*multiple",description:"\u662F\u5426\u591A\u9009",type:"boolean",defaultValue:"false"},{param:"*options",description:"\u6811\u5F62\u7ED3\u6784\u6570\u636E\uFF0C\u53C2\u8003 el-cascader \uFF0C\u53EF\u4EE5\u662F Promise \u6570\u636E",type:"ITreeOption | (() => Promise<ITreeOption>)",defaultValue:"[]"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascader-%E5%B1%9E%E6%80%A7",defaultValue:"-"},{param:"placeholder",description:"placeholder",type:"string",defaultValue:"\u8BF7\u9009\u62E9"},{param:"loadingText",description:"\u52A0\u8F7D\u5F02\u6B65\u6570\u636E\u65F6\u7684\u6587\u672C",type:"string",defaultValue:"\u52A0\u8F7D\u4E2D"},{param:"emptyText",description:"\u590D\u9009\u672A\u9009\u62E9\u65F6\uFF0C\u5DF2\u9009\u6570\u636E\u9762\u677F\u5C55\u793A\u7684\u6587\u6848",type:"string",defaultValue:"\u5C1A\u672A\u9009\u62E9"},{param:"name",description:"\u4F7F\u7528 localStorage \u7F13\u5B58\u65F6\u7684 key\uFF0C\u7A7A\u4E0D\u7F13\u5B58",type:"string",defaultValue:""},{param:"expires",description:"\u5BF9\u6570\u636E\u8FDB\u884C localStorage \u7F13\u5B58\uFF0C\u6307\u5B9A\u65E5\u671F\u5230\u671F\u6216\u8005 X \u79D2\u540E\u5931\u6548\u3002\u4E0D\u7F13\u5B58\u8BBE\u7F6E\u4E3A 0",type:"Date | number",defaultValue:"7200"},{param:"props",description:"\u7EA7\u8054\u9009\u62E9\u5668 CascaderPanel \u7684 props \u53C2\u6570\uFF0C\u4F1A\u8986\u76D6\u5185\u7F6E\u529F\u80FD",type:"CascaderProps",defaultValue:"-"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascaderprops",defaultValue:"-"},{param:"cascaderAttrs",description:"\u7EA7\u8054\u9009\u62E9\u5668 CascaderPanel \u7684\u539F\u59CB\u53C2\u6570\uFF0C\u4F1A\u8986\u76D6\u5185\u7F6E\u529F\u80FD",type:"CascaderAttributes",defaultValue:"-"},{param:"-",description:"-",type:"https://element-plus.gitee.io/zh-CN/component/cascader.html#cascader-attributes",defaultValue:"-"},{param:"\u5176\u4ED6",description:"h-select \u7684\u5C5E\u6027\u3001\u4E8B\u4EF6",type:"./select.html#api",defaultValue:"-"}],types:[{param:"Value",description:"string | number | boolean"},{param:"ITreeOption",description:"{label: string, value: Value, children: ITreeOption[], ...\u5176\u4ED6}"}],events:[{name:"init",description:"options \u4E3A\u5F02\u6B65\u65F6\uFF0C\u52A0\u8F7D\u5B8C\u6210\u7684\u56DE\u8C03",param:"options"},{name:"change",description:"\u9009\u62E9\u53D8\u5316\u65F6\u7684\u89E6\u53D1",param:"value, node"}]};return(a,s)=>(E(),O(yt,{data:e}))}}),zn=ke(qn,[["__file","usage.vue"]]),jn=Z("h2",{id:"\u529F\u80FD",tabindex:"-1"},[Z("a",{class:"header-anchor",href:"#\u529F\u80FD","aria-hidden":"true"},"#"),ye(" \u529F\u80FD")],-1),Un=Z("p",null,"\u7528\u4E8E\u6811\u5F62\u6570\u636E\u7684\u9009\u62E9\uFF0C\u5229\u7528Select\u3001Cascader\u3001Popover\u8FDB\u884C\u6269\u5C55\uFF0C\u589E\u5F3A\u591A\u9009\u529F\u80FD\u3002",-1),Rn=Z("p",null,"\u4E0D\u540C\u4E8E\u5B98\u65B9\u7684 Cascader\uFF0C\u5728\u591A\u9009\u7ED3\u679C\u5C55\u793A\u65F6\u4F7F\u7528\u5355\u72EC\u7684\u9762\u677F\u5C55\u793A\u6811\u5F62\u9009\u62E9\u7ED3\u679C\u3002",-1),Wn=Z("h2",{id:"\u529F\u80FD\u793A\u4F8B",tabindex:"-1"},[Z("a",{class:"header-anchor",href:"#\u529F\u80FD\u793A\u4F8B","aria-hidden":"true"},"#"),ye(" \u529F\u80FD\u793A\u4F8B")],-1),Yn=Vt(`<h2 id="\u6700\u5C0F\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u6700\u5C0F\u793A\u4F8B" aria-hidden="true">#</a> \u6700\u5C0F\u793A\u4F8B</h2><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HTreePicker</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:options</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>treeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300px<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> Wrapper <span class="token keyword">from</span> <span class="token string">&#39;@/components/simple-wrapper.vue&#39;</span>
<span class="token keyword">import</span> treeData <span class="token keyword">from</span> <span class="token string">&#39;./data&#39;</span>
<span class="token keyword">import</span> HTreePicker <span class="token keyword">from</span> <span class="token string">&#39;../index.vue&#39;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><br><br><br><br><br><br><div class="highlight-line">\xA0</div><br><br><div class="highlight-line">\xA0</div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2>`,3),Zn={__name:"tree-picker.html",setup(t){return(e,a)=>(E(),U("div",null,[jn,Un,Rn,Wn,L(_n),Yn,L(zn)]))}},ma=ke(Zn,[["__file","tree-picker.html.vue"]]);export{ma as default};
