import{a0 as L,G as X,J as Ee,f as ce,g as S,a1 as Be,z as T,E as we,O as ke,a9 as Me,r as $,o as c,h as m,w as v,V as U,W as q,d as E,a as g,X as u,Y as x,as as j,c as N,a3 as F,a4 as y,t as V,at as K,R as de,b as G,Z as Ie,l as Se,n as Te,x as fe,aP as me,s as ee,q as $e,Q as Ae,K as ne,D as se,B as oe,c6 as Oe,u as p,T as Re,_ as Ve}from"./app.8c8a4a35.js";import{H as te}from"./index.8e8fcb18.js";import{i as ae}from"./isBoolean.344d92a7.js";import{E as pe}from"./index.d8710a2c.js";import{E as Le}from"./index.a0761fdb.js";import{E as Pe,u as ze,b as De,a as He}from"./index.0ebb197b.js";import{J as je,am as Fe,s as Ke,as as Ne,G as Ue,u as qe,c as Ge,ar as le,j as re,h as Xe,_ as Ye}from"./document.119ae42e.js";import{o as ie}from"./aria.ff564609.js";import{i as Ze}from"./validator.b33499a8.js";const Y="_trap-focus-children",B=[],ue=e=>{if(B.length===0)return;const n=B[B.length-1][Y];if(n.length>0&&e.code===je.tab){if(n.length===1){e.preventDefault(),document.activeElement!==n[0]&&n[0].focus();return}const o=e.shiftKey,t=e.target===n[0],a=e.target===n[n.length-1];t&&o&&(e.preventDefault(),n[n.length-1].focus()),a&&!o&&(e.preventDefault(),n[0].focus())}},Je={beforeMount(e){e[Y]=ie(e),B.push(e),B.length<=1&&document.addEventListener("keydown",ue)},updated(e){L(()=>{e[Y]=ie(e)})},unmounted(){B.shift(),B.length===0&&document.removeEventListener("keydown",ue)}},We=(e,n)=>{let o;X(()=>e.value,t=>{var a,l;t?(o=document.activeElement,Ee(n)&&((l=(a=n.value).focus)==null||l.call(a))):o.focus()})},Qe=ce({name:"ElMessageBox",directives:{TrapFocus:Je},components:{ElButton:pe,ElFocusTrap:Fe,ElInput:Le,ElOverlay:Pe,ElIcon:Ke,...Ne},inheritAttrs:!1,props:{buttonSize:{type:String,validator:Ze},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{t:o}=Ue(),t=qe("message-box"),a=S(!1),{nextZIndex:l}=Ge(),s=Be({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:l()}),f=T(()=>{const i=s.type;return{[t.bm("icon",i)]:i&&le[i]}}),w=re(),k=re(),O=Xe(T(()=>e.buttonSize),{prop:!0,form:!0,formItem:!0}),d=T(()=>s.icon||le[s.type]||""),r=T(()=>!!s.message),b=S(),z=S(),M=S(),D=S(),Z=S(),ve=T(()=>s.confirmButtonClass);X(()=>s.inputValue,async i=>{await L(),e.boxType==="prompt"&&i!==null&&W()},{immediate:!0}),X(()=>a.value,i=>{var C,I;i&&(e.boxType!=="prompt"&&(s.autofocus?M.value=(I=(C=Z.value)==null?void 0:C.$el)!=null?I:b.value:M.value=b.value),s.zIndex=l()),e.boxType==="prompt"&&(i?L().then(()=>{var _;D.value&&D.value.$el&&(s.autofocus?M.value=(_=Ce())!=null?_:b.value:M.value=b.value)}):(s.editorErrorMessage="",s.validateError=!1))});const ge=T(()=>e.draggable);ze(b,z,ge),we(async()=>{await L(),e.closeOnHashChange&&window.addEventListener("hashchange",R)}),ke(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",R)});function R(){!a.value||(a.value=!1,L(()=>{s.action&&n("action",s.action)}))}const J=()=>{e.closeOnClickModal&&H(s.distinguishCancelAndClose?"close":"cancel")},ye=He(J),be=i=>{if(s.inputType!=="textarea")return i.preventDefault(),H("confirm")},H=i=>{var C;e.boxType==="prompt"&&i==="confirm"&&!W()||(s.action=i,s.beforeClose?(C=s.beforeClose)==null||C.call(s,i,s,R):R())},W=()=>{if(e.boxType==="prompt"){const i=s.inputPattern;if(i&&!i.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||o("el.messagebox.error"),s.validateError=!0,!1;const C=s.inputValidator;if(typeof C=="function"){const I=C(s.inputValue);if(I===!1)return s.editorErrorMessage=s.inputErrorMessage||o("el.messagebox.error"),s.validateError=!0,!1;if(typeof I=="string")return s.editorErrorMessage=I,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},Ce=()=>{const i=D.value.$refs;return i.input||i.textarea},Q=()=>{H("close")},he=()=>{e.closeOnPressEscape&&Q()};return e.lockScroll&&De(a),We(a),{...Me(s),ns:t,overlayEvent:ye,visible:a,hasMessage:r,typeClass:f,contentId:w,inputId:k,btnSize:O,iconComponent:d,confirmButtonClasses:ve,rootRef:b,focusStartRef:M,headerRef:z,inputRef:D,confirmRef:Z,doClose:R,handleClose:Q,onCloseRequested:he,handleWrapperClick:J,handleInputEnter:be,handleAction:H,t:o}}}),_e=["aria-label","aria-describedby"],xe=["aria-label"],en=["id"];function nn(e,n,o,t,a,l){const s=$("el-icon"),f=$("close"),w=$("el-input"),k=$("el-button"),O=$("el-focus-trap"),d=$("el-overlay");return c(),m(Ie,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=r=>e.$emit("vanish")),persisted:""},{default:v(()=>[U(E(d,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:v(()=>[g("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:u(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...r)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...r)),onMousedown:n[9]||(n[9]=(...r)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...r)),onMouseup:n[10]||(n[10]=(...r)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...r))},[E(O,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:v(()=>[g("div",{ref:"rootRef",class:u([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),{[e.ns.m("center")]:e.center}]),style:x(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=j(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(c(),N("div",{key:0,ref:"headerRef",class:u(e.ns.e("header"))},[g("div",{class:u(e.ns.e("title"))},[e.iconComponent&&e.center?(c(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:v(()=>[(c(),m(F(e.iconComponent)))]),_:1},8,["class"])):y("v-if",!0),g("span",null,V(e.title),1)],2),e.showClose?(c(),N("button",{key:0,type:"button",class:u(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=K(j(r=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[E(s,{class:u(e.ns.e("close"))},{default:v(()=>[E(f)]),_:1},8,["class"])],42,xe)):y("v-if",!0)],2)):y("v-if",!0),g("div",{id:e.contentId,class:u(e.ns.e("content"))},[g("div",{class:u(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(c(),m(s,{key:0,class:u([e.ns.e("status"),e.typeClass])},{default:v(()=>[(c(),m(F(e.iconComponent)))]),_:1},8,["class"])):y("v-if",!0),e.hasMessage?(c(),N("div",{key:1,class:u(e.ns.e("message"))},[de(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(c(),m(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(c(),m(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0},{default:v(()=>[G(V(e.dangerouslyUseHTMLString?"":e.message),1)]),_:1},8,["for"]))])],2)):y("v-if",!0)],2),U(g("div",{class:u(e.ns.e("input"))},[E(w,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>e.inputValue=r),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:u({invalid:e.validateError}),onKeydown:K(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),g("div",{class:u(e.ns.e("errormsg")),style:x({visibility:e.editorErrorMessage?"visible":"hidden"})},V(e.editorErrorMessage),7)],2),[[q,e.showInput]])],10,en),g("div",{class:u(e.ns.e("btns"))},[e.showCancelButton?(c(),m(k,{key:0,loading:e.cancelButtonLoading,class:u([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=r=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=K(j(r=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:v(()=>[G(V(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):y("v-if",!0),U(E(k,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,class:u([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=r=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=K(j(r=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:v(()=>[G(V(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[q,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,_e)]),_:3},8,["z-index","overlay-class","mask"]),[[q,e.visible]])]),_:3})}var sn=Ye(Qe,[["render",nn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const P=new Map,on=(e,n,o=null)=>{const t=E(sn,e,ne(e.message)||fe(e.message)?{default:ne(e.message)?e.message:()=>e.message}:null);return t.appContext=o,me(t,n),document.body.appendChild(n.firstElementChild),t.component},tn=()=>document.createElement("div"),an=(e,n)=>{const o=tn();e.onVanish=()=>{me(null,o),P.delete(a)},e.onAction=l=>{const s=P.get(a);let f;e.showInput?f={value:a.inputValue,action:l}:f=l,e.callback?e.callback(f,t.proxy):l==="cancel"||l==="close"?e.distinguishCancelAndClose&&l!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(f)};const t=on(e,o,n),a=t.proxy;for(const l in e)ee(e,l)&&!ee(a.$props,l)&&(a[l]=e[l]);return a.visible=!0,a};function A(e,n=null){if(!Se)return Promise.reject();let o;return Te(e)||fe(e)?e={message:e}:o=e.callback,new Promise((t,a)=>{const l=an(e,n!=null?n:A._context);P.set(l,{options:e,callback:o,resolve:t,reject:a})})}const ln=["alert","confirm","prompt"],rn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};ln.forEach(e=>{A[e]=un(e)});function un(e){return(n,o,t,a)=>{let l="";return $e(o)?(t=o,l=""):Ae(o)?l="":l=o,A(Object.assign({title:l,message:n,type:"",...rn[e]},t,{boxType:e}),a)}}A.close=()=>{P.forEach((e,n)=>{n.doClose()}),P.clear()};A._context=null;const h=A;h.install=e=>{h._context=e._context,e.config.globalProperties.$msgbox=h,e.config.globalProperties.$messageBox=h,e.config.globalProperties.$alert=h.alert,e.config.globalProperties.$confirm=h.confirm,e.config.globalProperties.$prompt=h.prompt};const cn=h;function Tn(e,n){const o={};return Object.keys(n).forEach(t=>{const a=Symbol(t);o[t]=a,se(a,n[t])}),se(e,o),o}function dn(e){const n=oe(e,{}),o={};return Object.keys(n).forEach(t=>{o[t]=oe(n[t])}),o}const $n={button:{type:Object}},fn=Symbol("VCConfig"),mn=()=>dn(fn),pn={key:1},vn=ce({__name:"index",props:{icon:null,time:{default:800},type:{default:""},confirm:{type:Boolean,default:void 0},confirmInfo:null},emits:["click"],setup(e,{emit:n}){const o=e,{button:t}=mn(),a={title:"\u63D0\u793A",confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",msg:"\u786E\u8BA4\u8981\u5220\u9664\u8FD9\u6761\u6570\u636E\u5417"},l=ae(t==null?void 0:t.confirm)?t==null?void 0:t.confirm:ae(o.confirm)?o.confirm:o.type==="warning",{name:s,type:f="el",position:w="left"}=o.icon||{},k=async()=>{const{msg:d,title:r,confirmButtonText:b,cancelButtonText:z}={...a,...t==null?void 0:t.confirmInfo,...o.confirmInfo};try{return await cn.confirm(d,r,{confirmButtonText:b,cancelButtonText:z,type:"warning",dangerouslyUseHTMLString:!0})}catch{return!1}},O=Oe(async d=>{if(l){await k()&&n("click",d);return}n("click",d)},o.time);return(d,r)=>(c(),m(p(pe),Re(d.$attrs,{type:e.type,class:d.$style.button,onClick:p(O)}),{default:v(()=>[p(w)==="left"&&p(s)?(c(),m(te,{key:0,type:p(f),name:p(s)},null,8,["type","name"])):y("v-if",!0),d.$slots.default?(c(),N("span",pn,[de(d.$slots,"default")])):y("v-if",!0),p(w)==="right"&&p(s)?(c(),m(te,{key:2,type:p(f),name:p(s)},null,8,["type","name"])):y("v-if",!0)]),_:3},16,["type","class","onClick"]))}}),gn="_button_l1gah_1",yn={button:gn},bn={$style:yn},An=Ve(vn,[["__cssModules",bn],["__file","index.vue"]]);export{An as H,fn as K,$n as p,Tn as u};
