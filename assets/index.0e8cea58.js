import{A as E,G as N,h as L,ab as C,g as W,c as z,r as I,d as D,y as x,P as f}from"./document.6b81ac63.js";import{K as A,aq as U,O as $,G,aM as K,m as j,J as q,aN as F,N as v,f as J,d as V,U as k,am as Q}from"./app.2f0c0fdb.js";import{g as Z}from"./scroll.9ffe664e.js";const ce=(e,o,n)=>{let s={offsetX:0,offsetY:0};const a=l=>{const u=l.clientX,r=l.clientY,{offsetX:d,offsetY:m}=s,i=e.value.getBoundingClientRect(),p=i.left,y=i.top,O=i.width,S=i.height,T=document.documentElement.clientWidth,Y=document.documentElement.clientHeight,P=-p+d,B=-y+m,H=T-p-O+d,X=Y-y-S+m,h=b=>{const M=Math.min(Math.max(d+b.clientX-u,P),H),w=Math.min(Math.max(m+b.clientY-r,B),X);s={offsetX:M,offsetY:w},e.value&&(e.value.style.transform=`translate(${E(M)}, ${E(w)})`)},g=()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",h),document.addEventListener("mouseup",g)},c=()=>{o.value&&e.value&&o.value.addEventListener("mousedown",a)},t=()=>{o.value&&e.value&&o.value.removeEventListener("mousedown",a)};A(()=>{U(()=>{n.value?c():t()})}),$(()=>{t()})},le=(e,o={})=>{G(e)||N("[useLockscreen]","You need to pass a ref param to this function");const n=o.ns||L("popup"),s=K(()=>n.bm("parent","hidden"));if(!j||C(document.body,s.value))return;let a=0,c=!1,t="0";const l=()=>{setTimeout(()=>{I(document==null?void 0:document.body,s.value),c&&document&&(document.body.style.width=t)},200)};q(e,u=>{if(!u){l();return}c=!C(document.body,s.value),c&&(t=document.body.style.width),a=Z(n.namespace.value);const r=document.documentElement.clientHeight<document.body.scrollHeight,d=W(document.body,"overflowY");a>0&&(r||d==="scroll")&&c&&(document.body.style.width=`calc(100% - ${a}px)`),z(document.body,s.value)}),F(()=>l())},_=e=>{if(!e)return{onClick:v,onMousedown:v,onMouseup:v};let o=!1,n=!1;return{onClick:t=>{o&&n&&e(t),o=n=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},R=D({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),ee={click:e=>e instanceof MouseEvent},te="overlay";var oe=J({name:"ElOverlay",props:R,emits:ee,setup(e,{slots:o,emit:n}){const s=L(te),a=u=>{n("click",u)},{onClick:c,onMousedown:t,onMouseup:l}=_(e.customMaskEvent?void 0:a);return()=>e.mask?V("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:t,onMouseup:l},[k(o,"default")],f.STYLE|f.CLASS|f.PROPS,["onClick","onMouseup","onMousedown"]):Q("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(o,"default")])}});const ue=oe;export{ue as E,_ as a,le as b,ce as u};
