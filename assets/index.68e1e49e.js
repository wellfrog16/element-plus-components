import{K as ce,E as oe,am as de,O as fe,J as me,aL as pe,l as te,G as H,aM as ve,N as Y,f as K,d as N,R as h,ai as ye,B as Z,z as A,o as L,c as V,a as R,X as w,u as o,t as ge,w as B,h as U,a3 as Ce,a4 as W,Y as se,as as be,L as he,g as I,a0 as we,A as ke,aN as J,ag as Ee,D as Me,V as Te,W as Be,T as Ie,aw as Se,Z as De,ab as Le}from"./app.996e40ef.js";import{q as j,v as Ae,u as x,ab as Q,g as $e,d as Oe,r as Fe,e as G,p as q,P as X,o as Pe,G as Ne,al as ze,s as Re,_ as le,am as Ye,U as ne,c as Ve,j as _,A as Xe,an as He,ao as Ue,w as We}from"./document.8ebdd996.js";import{g as je}from"./scroll.f2a72a91.js";import{u as ee}from"./index.d817f8b2.js";const qe=(...e)=>t=>{e.forEach(n=>{ce(n)?n(t):n.value=t})},ae=Symbol("dialogInjectionKey"),Ke=(e,t,n)=>{let i={offsetX:0,offsetY:0};const u=a=>{const c=a.clientX,p=a.clientY,{offsetX:m,offsetY:v}=i,l=e.value.getBoundingClientRect(),f=l.left,k=l.top,$=l.width,O=l.height,F=document.documentElement.clientWidth,S=document.documentElement.clientHeight,P=-f+m,D=-k+v,E=F-f-$+m,M=S-k-O+v,y=s=>{const g=Math.min(Math.max(m+s.clientX-c,P),E),C=Math.min(Math.max(v+s.clientY-p,D),M);i={offsetX:g,offsetY:C},e.value.style.transform=`translate(${j(g)}, ${j(C)})`},T=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",T)},d=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",u)},r=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",u)};oe(()=>{de(()=>{n.value?d():r()})}),fe(()=>{r()})},xe=e=>{me(e)||Ae("[useLockscreen]","You need to pass a ref param to this function");const t=x("popup"),n=pe(()=>t.bm("parent","hidden"));if(!te||Q(document.body,n.value))return;let i=0,u=!1,d="0";const r=()=>{setTimeout(()=>{Fe(document.body,n.value),u&&(document.body.style.width=d)},200)};H(e,a=>{if(!a){r();return}u=!Q(document.body,n.value),u&&(d=document.body.style.width),i=je(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,p=$e(document.body,"overflowY");i>0&&(c||p==="scroll")&&u&&(document.body.style.width=`calc(100% - ${i}px)`),Oe(document.body,n.value)}),ve(()=>r())},ie=e=>{if(!e)return{onClick:Y,onMousedown:Y,onMouseup:Y};let t=!1,n=!1;return{onClick:r=>{t&&n&&e(r),t=n=!1},onMousedown:r=>{t=r.target===r.currentTarget},onMouseup:r=>{n=r.target===r.currentTarget}}},Ge=G({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:q([String,Array,Object])},zIndex:{type:q([String,Number])}}),Ze={click:e=>e instanceof MouseEvent};var Je=K({name:"ElOverlay",props:Ge,emits:Ze,setup(e,{slots:t,emit:n}){const i=x("overlay"),u=c=>{n("click",c)},{onClick:d,onMousedown:r,onMouseup:a}=ie(e.customMaskEvent?void 0:u);return()=>e.mask?N("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:r,onMouseup:a},[h(t,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):ye("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(t,"default")])}});const Qe=Je,re=G({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:Pe},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),_e={close:()=>!0},eo=["aria-label"],oo=["id"],to={name:"ElDialogContent"},so=K({...to,props:re,emits:_e,setup(e){const t=e,{t:n}=Ne(),{Close:i}=Ye,{dialogRef:u,headerRef:d,bodyId:r,ns:a,style:c}=Z(ae),{focusTrapRef:p}=Z(ze),m=qe(p,u),v=A(()=>t.draggable);return Ke(u,d,v),(l,f)=>(L(),V("div",{ref:o(m),class:w([o(a).b(),o(a).is("fullscreen",l.fullscreen),o(a).is("draggable",o(v)),o(a).is("align-center",l.alignCenter),{[o(a).m("center")]:l.center},l.customClass]),style:se(o(c)),tabindex:"-1",onClick:f[1]||(f[1]=be(()=>{},["stop"]))},[R("header",{ref_key:"headerRef",ref:d,class:w(o(a).e("header"))},[h(l.$slots,"header",{},()=>[R("span",{role:"heading",class:w(o(a).e("title"))},ge(l.title),3)]),l.showClose?(L(),V("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:w(o(a).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=k=>l.$emit("close"))},[N(o(Re),{class:w(o(a).e("close"))},{default:B(()=>[(L(),U(Ce(l.closeIcon||o(i))))]),_:1},8,["class"])],10,eo)):W("v-if",!0)],2),R("div",{id:o(r),class:w(o(a).e("body"))},[h(l.$slots,"default")],10,oo),l.$slots.footer?(L(),V("footer",{key:0,class:w(o(a).e("footer"))},[h(l.$slots,"footer")],2)):W("v-if",!0)],6))}});var lo=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const no=G({...re,appendToBody:{type:Boolean,default:!1},beforeClose:{type:q(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ne]:e=>he(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(e,t)=>{const i=ke().emit,{nextZIndex:u}=Ve();let d="";const r=_(),a=_(),c=I(!1),p=I(!1),m=I(!1),v=I(e.zIndex||u());let l,f;const k=Xe("namespace",He),$=A(()=>{const b={},z=`--${k.value}-dialog`;return e.fullscreen||(e.top&&(b[`${z}-margin-top`]=e.top),e.width&&(b[`${z}-width`]=j(e.width))),b}),O=A(()=>e.alignCenter?{display:"flex"}:{});function F(){i("opened")}function S(){i("closed"),i(ne,!1),e.destroyOnClose&&(m.value=!1)}function P(){i("close")}function D(){f==null||f(),l==null||l(),e.openDelay&&e.openDelay>0?{stop:l}=J(()=>T(),e.openDelay):T()}function E(){l==null||l(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=J(()=>s(),e.closeDelay):s()}function M(){function b(z){z||(p.value=!0,c.value=!1)}e.beforeClose?e.beforeClose(b):E()}function y(){e.closeOnClickModal&&M()}function T(){!te||(c.value=!0)}function s(){c.value=!1}function g(){i("openAutoFocus")}function C(){i("closeAutoFocus")}e.lockScroll&&xe(c);function ue(){e.closeOnPressEscape&&M()}return H(()=>e.modelValue,b=>{b?(p.value=!1,D(),m.value=!0,v.value=e.zIndex?v.value++:u(),we(()=>{i("open"),t.value&&(t.value.scrollTop=0)})):c.value&&E()}),H(()=>e.fullscreen,b=>{!t.value||(b?(d=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=d)}),oe(()=>{e.modelValue&&(c.value=!0,m.value=!0,D())}),{afterEnter:F,afterLeave:S,beforeLeave:P,handleClose:M,onModalClick:y,close:E,doClose:s,onOpenAutoFocus:g,onCloseAutoFocus:C,onCloseRequested:ue,titleId:r,bodyId:a,closed:p,style:$,overlayDialogStyle:O,rendered:m,visible:c,zIndex:v}},ro=["aria-label","aria-labelledby","aria-describedby"],uo={name:"ElDialog",inheritAttrs:!1},co=K({...uo,props:no,emits:ao,setup(e,{expose:t}){const n=e,i=Ee();ee({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},A(()=>!!i.title)),ee({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},A(()=>!!n.customClass));const u=x("dialog"),d=I(),r=I(),a=I(),{visible:c,titleId:p,bodyId:m,style:v,overlayDialogStyle:l,rendered:f,zIndex:k,afterEnter:$,afterLeave:O,beforeLeave:F,handleClose:S,onModalClick:P,onOpenAutoFocus:D,onCloseAutoFocus:E,onCloseRequested:M}=io(n,d);Me(ae,{dialogRef:d,headerRef:r,bodyId:m,ns:u,rendered:f,style:v});const y=ie(P),T=A(()=>n.draggable&&!n.fullscreen);return t({visible:c,dialogContentRef:a}),(s,g)=>(L(),U(Le,{to:"body",disabled:!s.appendToBody},[N(De,{name:"dialog-fade",onAfterEnter:o($),onAfterLeave:o(O),onBeforeLeave:o(F),persisted:""},{default:B(()=>[Te(N(o(Qe),{"custom-mask-event":"",mask:s.modal,"overlay-class":s.modalClass,"z-index":o(k)},{default:B(()=>[R("div",{role:"dialog","aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(p),"aria-describedby":o(m),class:w(`${o(u).namespace.value}-overlay-dialog`),style:se(o(l)),onClick:g[0]||(g[0]=(...C)=>o(y).onClick&&o(y).onClick(...C)),onMousedown:g[1]||(g[1]=(...C)=>o(y).onMousedown&&o(y).onMousedown(...C)),onMouseup:g[2]||(g[2]=(...C)=>o(y).onMouseup&&o(y).onMouseup(...C))},[N(o(Ue),{loop:"",trapped:o(c),"focus-start-el":"container",onFocusAfterTrapped:o(D),onFocusAfterReleased:o(E),onReleaseRequested:o(M)},{default:B(()=>[o(f)?(L(),U(lo,Ie({key:0,ref_key:"dialogContentRef",ref:a},s.$attrs,{"custom-class":s.customClass,center:s.center,"align-center":s.alignCenter,"close-icon":s.closeIcon,draggable:o(T),fullscreen:s.fullscreen,"show-close":s.showClose,title:s.title,onClose:o(S)}),Se({header:B(()=>[s.$slots.title?h(s.$slots,"title",{key:1}):h(s.$slots,"header",{key:0,close:o(S),titleId:o(p),titleClass:o(u).e("title")})]),default:B(()=>[h(s.$slots,"default")]),_:2},[s.$slots.footer?{name:"footer",fn:B(()=>[h(s.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):W("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[Be,o(c)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const go=We(fo);export{go as E};
