import{G as Z,h as N,ac as M,g as j,c as q,r as J,d as B,y as k,P as x,x as Q,U as A,p as X,i as P,A as R,ar as ee,n as oe}from"./document.cdfca6ca.js";import{G as te,aN as ne,m as F,J as w,aO as le,N as S,f as ae,d as se,U as T,am as ue,L as ce,g as p,E as I,a4 as ie,K as de,H as re,aP as D}from"./app.b12c36a8.js";import{a as fe}from"./use-global-config.d5b29c73.js";import{g as ye}from"./scroll.a766c1a0.js";const me=(e,o={})=>{te(e)||Z("[useLockscreen]","You need to pass a ref param to this function");const a=o.ns||N("popup"),c=ne(()=>a.bm("parent","hidden"));if(!F||M(document.body,c.value))return;let n=0,s=!1,t="0";const d=()=>{setTimeout(()=>{J(document==null?void 0:document.body,c.value),s&&document&&(document.body.style.width=t)},200)};w(e,r=>{if(!r){d();return}s=!M(document.body,c.value),s&&(t=document.body.style.width),n=ye(a.namespace.value);const u=document.documentElement.clientHeight<document.body.scrollHeight,f=j(document.body,"overflowY");n>0&&(u||f==="scroll")&&s&&(document.body.style.width=`calc(100% - ${n}px)`),q(document.body,c.value)}),le(()=>d())},ve=e=>{if(!e)return{onClick:S,onMousedown:S,onMouseup:S};let o=!1,a=!1;return{onClick:t=>{o&&a&&e(t),o=a=!1},onMousedown:t=>{o=t.target===t.currentTarget},onMouseup:t=>{a=t.target===t.currentTarget}}},pe=B({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:k([String,Array,Object])},zIndex:{type:k([String,Number])}}),Ce={click:e=>e instanceof MouseEvent},ge="overlay";var be=ae({name:"ElOverlay",props:pe,emits:Ce,setup(e,{slots:o,emit:a}){const c=N(ge),n=r=>{a("click",r)},{onClick:s,onMousedown:t,onMouseup:d}=ve(e.customMaskEvent?void 0:n);return()=>e.mask?se("div",{class:[c.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:t,onMouseup:d},[T(o,"default")],x.STYLE|x.CLASS|x.PROPS,["onClick","onMouseup","onMousedown"]):ue("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[T(o,"default")])}});const Be=be,he=B({center:Boolean,alignCenter:Boolean,closeIcon:{type:Q},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ee={close:()=>!0},Oe=B({...he,appendToBody:Boolean,beforeClose:{type:k(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Me={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[A]:e=>ce(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},Pe=(e,o)=>{var a;const n=re().emit,{nextZIndex:s}=X();let t="";const d=P(),r=P(),u=p(!1),f=p(!1),v=p(!1),C=p((a=e.zIndex)!=null?a:s());let y,m;const L=fe("namespace",oe),z=I(()=>{const l={},i=`--${L.value}-dialog`;return e.fullscreen||(e.top&&(l[`${i}-margin-top`]=e.top),e.width&&(l[`${i}-width`]=R(e.width))),l}),H=I(()=>e.alignCenter?{display:"flex"}:{});function U(){n("opened")}function V(){n("closed"),n(A,!1),e.destroyOnClose&&(v.value=!1)}function $(){n("close")}function E(){m==null||m(),y==null||y(),e.openDelay&&e.openDelay>0?{stop:y}=D(()=>O(),e.openDelay):O()}function g(){y==null||y(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=D(()=>h(),e.closeDelay):h()}function b(){function l(i){i||(f.value=!0,u.value=!1)}e.beforeClose?e.beforeClose(l):g()}function Y(){e.closeOnClickModal&&b()}function O(){!F||(u.value=!0)}function h(){u.value=!1}function _(){n("openAutoFocus")}function G(){n("closeAutoFocus")}function W(l){var i;((i=l.detail)==null?void 0:i.focusReason)==="pointer"&&l.preventDefault()}e.lockScroll&&me(u);function K(){e.closeOnPressEscape&&b()}return w(()=>e.modelValue,l=>{l?(f.value=!1,E(),v.value=!0,C.value=ee(e.zIndex)?s():C.value++,ie(()=>{n("open"),o.value&&(o.value.scrollTop=0)})):u.value&&g()}),w(()=>e.fullscreen,l=>{!o.value||(l?(t=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=t)}),de(()=>{e.modelValue&&(u.value=!0,v.value=!0,E())}),{afterEnter:U,afterLeave:V,beforeLeave:$,handleClose:b,onModalClick:Y,close:g,doClose:h,onOpenAutoFocus:_,onCloseAutoFocus:G,onCloseRequested:K,onFocusoutPrevented:W,titleId:d,bodyId:r,closed:f,style:z,overlayDialogStyle:H,rendered:v,visible:u,zIndex:C}};export{Be as E,Ee as a,Oe as b,Me as c,he as d,ve as e,Pe as u};
