import{f as C,g as w,aA as z,z as $,o as m,h as y,w as o,d as p,b as B,u as c,V as j,X as f,a as b,J as D,aK as k,_,t as L,c as O,e as U}from"./app.2fb0167a.js";import{E as q,W,D as H}from"./document.81ebf482.js";import{D as T}from"./vuedraggable.umd.d4021b6b.js";import{H as F}from"./index.6be3e154.js";import{H as M}from"./index.c1057db6.js";import{E as V}from"./index.2dc3d91c.js";import{v as N}from"./directive.6b48857d.js";import{E as P}from"./index.2924b257.js";import{E as S}from"./index.8c9100e4.js";import"./index.2ec58eb5.js";import"./use-dialog.c784b941.js";import"./scroll.32bab5bb.js";import"./index.07c415ed.js";import"./typescript.72bf8adc.js";const J={modelValue:{type:Array,default:()=>[]},visible:{type:Boolean,required:!0},destroyOnClose:{type:Boolean,default:!1},limit:{type:Number,default:5},maxSize:{type:Number,default:2*1024*1024},httpRequest:{type:Function,required:!0,default:()=>{}},beforeUpload:{type:Function,default:()=>!0},beforeRemove:{type:Function,default:()=>!0}},K={class:"el-upload-list__item"},X=["src"],Z=C({__name:"index",props:J,emits:["update:visible","update:modelValue","error","close"],setup(g,{emit:i}){const s=g,t=w(!1),e=z(s.modelValue),d=$({get:()=>s.visible,set:a=>{i("update:visible",a),a||i("close")}}),h=a=>{if(!k)return"";const n=a;return n.url?n.url:k.URL.createObjectURL(n)},u=()=>{i("update:modelValue",e.value),d.value=!1},r=async({file:a})=>{const n=await s.httpRequest(a)||a;e.value=[...e.value,n],t.value=!1},v=a=>{if(a.size>s.maxSize){const n=`\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC7${s.maxSize/1024/1024}M`;return i("error",n),!1}return s.beforeUpload?s.beforeUpload(a)?(t.value=!0,!0):!1:(t.value=!0,!0)},x=async(a,n)=>{if(s.beforeRemove){t.value=!0;const l=await s.beforeRemove(a,n);return t.value=!1,l}return!0},A=async a=>{if(!await x(a,e.value))return;const l=e.value.findIndex(E=>E===a);e.value.splice(l,1),e.value=[...e.value]},R=()=>{const a=`\u6587\u4EF6\u6570\u91CF\u4E0D\u80FD\u8D85\u8FC7 ${s.limit} \u4E2A`;i("error",a)},I=a=>{k&&k.open(h(a))};return(a,n)=>(m(),y(M,{modelValue:c(d),"onUpdate:modelValue":n[1]||(n[1]=l=>D(d)?d.value=l:null),title:"\u4E0A\u4F20\u56FE\u7247","close-on-click-modal":!1,class:f(a.$style.dialog),width:660,"show-close":!1,"destroy-on-close":a.destroyOnClose,"append-to-body":""},{footer:o(()=>[p(c(V),{type:"primary",loading:t.value,onClick:u},{default:o(()=>[B("\u786E \u5B9A")]),_:1},8,["loading"])]),default:o(()=>[p(c(T),{modelValue:c(e),"onUpdate:modelValue":n[0]||(n[0]=l=>D(e)?e.value=l:null),"item-key":"uid",class:f(["el-upload-list--picture-card",[a.$style.draggable]])},{header:o(()=>[j((m(),y(c(P),{multiple:"",action:"","file-list":a.modelValue,"show-file-list":!1,"http-request":r,"before-upload":v,accept:".jpg,.jpeg,.png",class:f(a.$style.upload),limit:a.limit,"on-exceed":R},{default:o(()=>[p(F,{name:"Plus"})]),_:1},8,["file-list","class","limit"])),[[c(N),t.value]])]),item:o(({element:l})=>[b("div",K,[b("img",{class:"el-upload-list__item-thumbnail",src:h(l)},null,8,X),b("span",{class:f(["el-upload-list__item-actions",[a.$style.opration]])},[p(F,{name:"ZoomIn",onClick:E=>I(l)},null,8,["onClick"]),p(F,{name:"Delete",onClick:E=>A(l)},null,8,["onClick"])],2)])]),_:1},8,["modelValue","class"])]),_:1},8,["modelValue","class","destroy-on-close"]))}}),G="_dialog_16nlm_1",Q="_upload_16nlm_9",Y="_opration_16nlm_36",aa="_draggable_16nlm_49",sa={dialog:G,upload:Q,opration:Y,draggable:aa},na={$style:sa},ea=_(Z,[["__cssModules",na],["__file","index.vue"]]),ta=C({__name:"example",setup(g){const s=w([{name:"\u5C71.png",size:9988,type:"image/jpeg",url:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",uid:1625899269286}]),t=w(!1),e=()=>{t.value=!0},d=async u=>k?{name:u.name,size:u.size,type:u.type,url:k.URL.createObjectURL(u)}:void 0,h=u=>{S.error({message:u})};return(u,r)=>(m(),y(W,null,{default:o(()=>[p(c(q),{label:"\u5C55\u793A\u533A"},{default:o(()=>[p(c(V),{onClick:e},{default:o(()=>[B("\u6253\u5F00")]),_:1}),p(ea,{modelValue:s.value,"onUpdate:modelValue":r[0]||(r[0]=v=>s.value=v),visible:t.value,"onUpdate:visible":r[1]||(r[1]=v=>t.value=v),"http-request":d,limit:200,onError:h},null,8,["modelValue","visible"])]),_:1}),p(c(q),{label:"\u7ED3\u679C"},{default:o(()=>[b("span",null,L(s.value),1)]),_:1})]),_:1}))}}),la=_(ta,[["__file","example.vue"]]),pa=C({__name:"usage",setup(g){const i={params:[{param:"*v-model",description:"\u7ED1\u5B9A\u503C",type:"(File | IUploadFile)[]",defaultValue:"[]"},{param:"*v-model:visible",description:"\u663E\u793A/\u9690\u85CF",type:"boolen",defaultValue:"false"},{param:"*http-request",description:"\u81EA\u5B9A\u4E49\u4E0A\u4F20",type:"\u4E0B\u4E00\u884C",defaultValue:"() => {}"},{param:"-",rowType:"paramType",description:"(file: File) => Promise<IUploadFile | File | void>"},{param:"destroyOnClose",description:"\u5BF9\u8BDD\u6846\u5173\u95ED\u65F6\u6CE8\u9500\u5185\u5BB9",type:"boolen",defaultValue:"false"},{param:"max-size",description:"\u6587\u4EF6\u5927\u5C0F\u9650\u5236",type:"number",defaultValue:"2 * 1024 * 1024"},{param:"limit",description:"\u6700\u5927\u5141\u8BB8\u4E0A\u4F20\u4E2A\u6570",type:"number",defaultValue:"5"},{param:"before-upload",description:"\u4E0A\u4F20\u524D\u56DE\u8C03\uFF0Creturn false \u4E2D\u6B62\u4E0A\u4F20",type:"\u4E0B\u4E00\u884C",defaultValue:"()=>true"},{param:"-",rowType:"paramType",description:"(file: File) => boolean"},{param:"before-remove",description:"\u5220\u9664\u524D\u56DE\u8C03\uFF0Creturn false \u4E2D\u6B62\u5220\u9664\uFF0C\u7528\u4E8E\u5148\u63A5\u53E3\u5220\u9664\uFF0C\u518D\u5C55\u793A\u5220\u9664",type:"\u4E0B\u4E00\u884C",defaultValue:"()=>true"},{param:"-",rowType:"paramType",description:"(file: File | IUploadFile, fileList: (File | IUploadFile)[]) => boolean"}],types:[{param:"IUploadFile",description:"{ url: string; size: number; type: string; name: string}"}],events:[{name:"error",description:"\u4E0D\u7B26\u5408\u6587\u4EF6\u5927\u5C0F\u9650\u5236\u7684\u56DE\u8C03",param:"\u9519\u8BEF\u6587\u672C"},{name:"close",description:"\u5BF9\u8BDD\u6846\u5173\u95ED\u7684\u56DE\u8C03",param:"-"}]};return(s,t)=>(m(),y(H,{data:i}))}}),oa=_(pa,[["__file","usage.vue"]]),ia=U('<h2 id="\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u529F\u80FD" aria-hidden="true">#</a> \u529F\u80FD</h2><p>\u7528\u4E8E\u4E00\u6B21\u4E0A\u4F20\u591A\u5F20\u56FE\u7247\uFF0C\u652F\u6301<strong>\u62D6\u62FD</strong>\u6392\u5E8F</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>\u6B64\u7EC4\u4EF6\u4F9D\u8D56 vuedraggable-es\uFF0C\u4F7F\u7528\u65F6\u9700\u8981</p><p>npm i vuedraggable-es@^4.1.1</p></div><h2 id="\u529F\u80FD\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u529F\u80FD\u793A\u4F8B" aria-hidden="true">#</a> \u529F\u80FD\u793A\u4F8B</h2>',4),ua=U(`<h2 id="\u6700\u5C0F\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u6700\u5C0F\u793A\u4F8B" aria-hidden="true">#</a> \u6700\u5C0F\u793A\u4F8B</h2><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ElButton</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleClick<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\u6253\u5F00<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ElButton</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>HDialogUploadImages</span>
            <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>result<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name"><span class="token namespace">v-model:</span>visible</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>visible<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:http-request</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>httpRequest<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">:limit</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@error</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleError<span class="token punctuation">&quot;</span></span>
        <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Wrapper</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span> <span class="token attr-name">setup</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElButton<span class="token punctuation">,</span> ElMessage <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;element-plus&#39;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> defaultWindow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@wfrog/utils&#39;</span>
<span class="token keyword">import</span> Wrapper <span class="token keyword">from</span> <span class="token string">&#39;@/components/simple-wrapper.vue&#39;</span>
<span class="token keyword">import</span> HDialogUploadImages <span class="token keyword">from</span> <span class="token string">&#39;../index.vue&#39;</span>
<span class="token keyword">import</span> type <span class="token punctuation">{</span> IUploadFile <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;../props&#39;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> ref<span class="token operator">&lt;</span><span class="token punctuation">(</span>File <span class="token operator">|</span> IUploadFile<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> visible <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    visible<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">httpRequest</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">file</span><span class="token operator">:</span> File</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>defaultWindow<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token punctuation">}</span>
    <span class="token keyword">const</span> myFile <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> file<span class="token punctuation">.</span>name<span class="token punctuation">,</span>
        <span class="token literal-property property">size</span><span class="token operator">:</span> file<span class="token punctuation">.</span>size<span class="token punctuation">,</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> file<span class="token punctuation">.</span>type<span class="token punctuation">,</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> defaultWindow<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> myFile
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleError</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">message</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br><br><br><br><br><br><br><br><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><div class="highlight-line">\xA0</div><br><br><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2>`,3),ca={__name:"dialog-upload-images.html",setup(g){return(i,s)=>(m(),O("div",null,[ia,p(la),ua,p(oa)]))}},Ca=_(ca,[["__file","dialog-upload-images.html.vue"]]);export{Ca as default};
